function t(t,e){const n=Object.create(null),r=t.split(",");for(let i=0;i<r.length;i++)n[r[i]]=!0;return e?t=>!!n[t.toLowerCase()]:t=>!!n[t]}const e=t("Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt"),n=t("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function r(t){if(_(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],o=r(S(i)?s(i):i);if(o)for(const t in o)e[t]=o[t]}return e}if(k(t))return t}const i=/;(?![^(]*\))/g,o=/:(.+)/;function s(t){const e={};return t.split(i).forEach((t=>{if(t){const n=t.split(o);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function a(t){let e="";if(S(t))e=t;else if(_(t))for(let n=0;n<t.length;n++){const r=a(t[n]);r&&(e+=r+" ")}else if(k(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const u=t=>null==t?"":k(t)?JSON.stringify(t,c,2):String(t),c=(t,e)=>I(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n])=>(t[`${e} =>`]=n,t)),{})}:T(e)?{[`Set(${e.size})`]:[...e.values()]}:!k(e)||_(e)||D(e)?e:String(e),l={},h=[],f=()=>{},p=()=>!1,d=/^on[^a-z]/,v=t=>d.test(t),g=t=>t.startsWith("onUpdate:"),m=Object.assign,y=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},b=Object.prototype.hasOwnProperty,w=(t,e)=>b.call(t,e),_=Array.isArray,I=t=>"[object Map]"===R(t),T=t=>"[object Set]"===R(t),E=t=>"function"==typeof t,S=t=>"string"==typeof t,A=t=>"symbol"==typeof t,k=t=>null!==t&&"object"==typeof t,N=t=>k(t)&&E(t.then)&&E(t.catch),C=Object.prototype.toString,R=t=>C.call(t),D=t=>"[object Object]"===R(t),O=t=>S(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,x=t(",key,ref,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),P=t=>{const e=Object.create(null);return n=>e[n]||(e[n]=t(n))},L=/-(\w)/g,M=P((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),F=/\B([A-Z])/g,U=P((t=>t.replace(F,"-$1").toLowerCase())),V=P((t=>t.charAt(0).toUpperCase()+t.slice(1))),j=P((t=>t?`on${V(t)}`:"")),q=(t,e)=>t!==e&&(t==t||e==e),B=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},K=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},G=t=>{const e=parseFloat(t);return isNaN(e)?t:e},H=new WeakMap,z=[];let W;const Q=Symbol(""),X=Symbol("");function $(t,e=l){(function(t){return t&&!0===t._isEffect})(t)&&(t=t.raw);const n=function(t,e){const n=function(){if(!n.active)return t();if(!z.includes(n)){Z(n);try{return et.push(tt),tt=!0,z.push(n),W=n,t()}finally{z.pop(),rt(),W=z[z.length-1]}}};return n.id=J++,n.allowRecurse=!!e.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=t,n.deps=[],n.options=e,n}(t,e);return e.lazy||n(),n}function Y(t){t.active&&(Z(t),t.options.onStop&&t.options.onStop(),t.active=!1)}let J=0;function Z(t){const{deps:e}=t;if(e.length){for(let n=0;n<e.length;n++)e[n].delete(t);e.length=0}}let tt=!0;const et=[];function nt(){et.push(tt),tt=!1}function rt(){const t=et.pop();tt=void 0===t||t}function it(t,e,n){if(!tt||void 0===W)return;let r=H.get(t);r||H.set(t,r=new Map);let i=r.get(n);i||r.set(n,i=new Set),i.has(W)||(i.add(W),W.deps.push(i))}function ot(t,e,n,r,i,o){const s=H.get(t);if(!s)return;const a=new Set,u=t=>{t&&t.forEach((t=>{(t!==W||t.allowRecurse)&&a.add(t)}))};if("clear"===e)s.forEach(u);else if("length"===n&&_(t))s.forEach(((t,e)=>{("length"===e||e>=r)&&u(t)}));else switch(void 0!==n&&u(s.get(n)),e){case"add":_(t)?O(n)&&u(s.get("length")):(u(s.get(Q)),I(t)&&u(s.get(X)));break;case"delete":_(t)||(u(s.get(Q)),I(t)&&u(s.get(X)));break;case"set":I(t)&&u(s.get(Q))}a.forEach((t=>{t.options.scheduler?t.options.scheduler(t):t()}))}const st=t("__proto__,__v_isRef,__isVue"),at=new Set(Object.getOwnPropertyNames(Symbol).map((t=>Symbol[t])).filter(A)),ut=pt(),ct=pt(!1,!0),lt=pt(!0),ht=ft();function ft(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{const n=Array.prototype[e];t[e]=function(...t){const e=Jt(this);for(let n=0,i=this.length;n<i;n++)it(e,0,n+"");const r=n.apply(e,t);return-1===r||!1===r?n.apply(e,t.map(Jt)):r}})),["push","pop","shift","unshift","splice"].forEach((e=>{const n=Array.prototype[e];t[e]=function(...t){nt();const e=n.apply(this,t);return rt(),e}})),t}function pt(t=!1,e=!1){return function(n,r,i){if("__v_isReactive"===r)return!t;if("__v_isReadonly"===r)return t;if("__v_raw"===r&&i===(t?e?Gt:Kt:e?Bt:qt).get(n))return n;const o=_(n);if(!t&&o&&w(ht,r))return Reflect.get(ht,r,i);const s=Reflect.get(n,r,i);if(A(r)?at.has(r):st(r))return s;if(t||it(n,0,r),e)return s;if(ee(s)){return!o||!O(r)?s.value:s}return k(s)?t?Wt(s):zt(s):s}}function dt(t=!1){return function(e,n,r,i){let o=e[n];if(!t&&(r=Jt(r),o=Jt(o),!_(e)&&ee(o)&&!ee(r)))return o.value=r,!0;const s=_(e)&&O(n)?Number(n)<e.length:w(e,n),a=Reflect.set(e,n,r,i);return e===Jt(i)&&(s?q(r,o)&&ot(e,"set",n,r):ot(e,"add",n,r)),a}}const vt={get:ut,set:dt(),deleteProperty:function(t,e){const n=w(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&n&&ot(t,"delete",e,void 0),r},has:function(t,e){const n=Reflect.has(t,e);return A(e)&&at.has(e)||it(t,0,e),n},ownKeys:function(t){return it(t,0,_(t)?"length":Q),Reflect.ownKeys(t)}},gt={get:lt,set:(t,e)=>!0,deleteProperty:(t,e)=>!0},mt=m({},vt,{get:ct,set:dt(!0)}),yt=t=>k(t)?zt(t):t,bt=t=>k(t)?Wt(t):t,wt=t=>t,_t=t=>Reflect.getPrototypeOf(t);function It(t,e,n=!1,r=!1){const i=Jt(t=t.__v_raw),o=Jt(e);e!==o&&!n&&it(i,0,e),!n&&it(i,0,o);const{has:s}=_t(i),a=r?wt:n?bt:yt;return s.call(i,e)?a(t.get(e)):s.call(i,o)?a(t.get(o)):void(t!==i&&t.get(e))}function Tt(t,e=!1){const n=this.__v_raw,r=Jt(n),i=Jt(t);return t!==i&&!e&&it(r,0,t),!e&&it(r,0,i),t===i?n.has(t):n.has(t)||n.has(i)}function Et(t,e=!1){return t=t.__v_raw,!e&&it(Jt(t),0,Q),Reflect.get(t,"size",t)}function St(t){t=Jt(t);const e=Jt(this);return _t(e).has.call(e,t)||(e.add(t),ot(e,"add",t,t)),this}function At(t,e){e=Jt(e);const n=Jt(this),{has:r,get:i}=_t(n);let o=r.call(n,t);o||(t=Jt(t),o=r.call(n,t));const s=i.call(n,t);return n.set(t,e),o?q(e,s)&&ot(n,"set",t,e):ot(n,"add",t,e),this}function kt(t){const e=Jt(this),{has:n,get:r}=_t(e);let i=n.call(e,t);i||(t=Jt(t),i=n.call(e,t)),r&&r.call(e,t);const o=e.delete(t);return i&&ot(e,"delete",t,void 0),o}function Nt(){const t=Jt(this),e=0!==t.size,n=t.clear();return e&&ot(t,"clear",void 0,void 0),n}function Ct(t,e){return function(n,r){const i=this,o=i.__v_raw,s=Jt(o),a=e?wt:t?bt:yt;return!t&&it(s,0,Q),o.forEach(((t,e)=>n.call(r,a(t),a(e),i)))}}function Rt(t,e,n){return function(...r){const i=this.__v_raw,o=Jt(i),s=I(o),a="entries"===t||t===Symbol.iterator&&s,u="keys"===t&&s,c=i[t](...r),l=n?wt:e?bt:yt;return!e&&it(o,0,u?X:Q),{next(){const{value:t,done:e}=c.next();return e?{value:t,done:e}:{value:a?[l(t[0]),l(t[1])]:l(t),done:e}},[Symbol.iterator](){return this}}}}function Dt(t){return function(...e){return"delete"!==t&&this}}function Ot(){const t={get(t){return It(this,t)},get size(){return Et(this)},has:Tt,add:St,set:At,delete:kt,clear:Nt,forEach:Ct(!1,!1)},e={get(t){return It(this,t,!1,!0)},get size(){return Et(this)},has:Tt,add:St,set:At,delete:kt,clear:Nt,forEach:Ct(!1,!0)},n={get(t){return It(this,t,!0)},get size(){return Et(this,!0)},has(t){return Tt.call(this,t,!0)},add:Dt("add"),set:Dt("set"),delete:Dt("delete"),clear:Dt("clear"),forEach:Ct(!0,!1)},r={get(t){return It(this,t,!0,!0)},get size(){return Et(this,!0)},has(t){return Tt.call(this,t,!0)},add:Dt("add"),set:Dt("set"),delete:Dt("delete"),clear:Dt("clear"),forEach:Ct(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach((i=>{t[i]=Rt(i,!1,!1),n[i]=Rt(i,!0,!1),e[i]=Rt(i,!1,!0),r[i]=Rt(i,!0,!0)})),[t,n,e,r]}const[xt,Pt,Lt,Mt]=Ot();function Ft(t,e){const n=e?t?Mt:Lt:t?Pt:xt;return(e,r,i)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get(w(n,r)&&r in e?n:e,r,i)}const Ut={get:Ft(!1,!1)},Vt={get:Ft(!1,!0)},jt={get:Ft(!0,!1)},qt=new WeakMap,Bt=new WeakMap,Kt=new WeakMap,Gt=new WeakMap;function Ht(t){return t.__v_skip||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>R(t).slice(8,-1))(t))}function zt(t){return t&&t.__v_isReadonly?t:Qt(t,!1,vt,Ut,qt)}function Wt(t){return Qt(t,!0,gt,jt,Kt)}function Qt(t,e,n,r,i){if(!k(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const o=i.get(t);if(o)return o;const s=Ht(t);if(0===s)return t;const a=new Proxy(t,2===s?r:n);return i.set(t,a),a}function Xt(t){return $t(t)?Xt(t.__v_raw):!(!t||!t.__v_isReactive)}function $t(t){return!(!t||!t.__v_isReadonly)}function Yt(t){return Xt(t)||$t(t)}function Jt(t){return t&&Jt(t.__v_raw)||t}function Zt(t){return K(t,"__v_skip",!0),t}const te=t=>k(t)?zt(t):t;function ee(t){return Boolean(t&&!0===t.__v_isRef)}function ne(t){return ie(t)}class re{constructor(t,e){this._rawValue=t,this._shallow=e,this.__v_isRef=!0,this._value=e?t:te(t)}get value(){return it(Jt(this),0,"value"),this._value}set value(t){q(Jt(t),this._rawValue)&&(this._rawValue=t,this._value=this._shallow?t:te(t),ot(Jt(this),"set","value",t))}}function ie(t,e=!1){return ee(t)?t:new re(t,e)}function oe(t){return ee(t)?t.value:t}const se={get:(t,e,n)=>oe(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const i=t[e];return ee(i)&&!ee(n)?(i.value=n,!0):Reflect.set(t,e,n,r)}};function ae(t){return Xt(t)?t:new Proxy(t,se)}class ue{constructor(t,e,n){this._setter=e,this._dirty=!0,this.__v_isRef=!0,this.effect=$(t,{lazy:!0,scheduler:()=>{this._dirty||(this._dirty=!0,ot(Jt(this),"set","value"))}}),this.__v_isReadonly=n}get value(){const t=Jt(this);return t._dirty&&(t._value=this.effect(),t._dirty=!1),it(t,0,"value"),t._value}set value(t){this._setter(t)}}function ce(t,e,n,r){let i;try{i=r?t(...r):t()}catch(o){he(o,e,n)}return i}function le(t,e,n,r){if(E(t)){const i=ce(t,e,n,r);return i&&N(i)&&i.catch((t=>{he(t,e,n)})),i}const i=[];for(let o=0;o<t.length;o++)i.push(le(t[o],e,n,r));return i}function he(t,e,n,r=!0){e&&e.vnode;if(e){let r=e.parent;const i=e.proxy,o=n;for(;r;){const e=r.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,i,o))return;r=r.parent}const s=e.appContext.config.errorHandler;if(s)return void ce(s,null,10,[t,i,o])}!function(t,e,n,r=!0){console.error(t)}(t,0,0,r)}let fe=!1,pe=!1;const de=[];let ve=0;const ge=[];let me=null,ye=0;const be=[];let we=null,_e=0;const Ie=Promise.resolve();let Te=null,Ee=null;function Se(t){const e=Te||Ie;return t?e.then(this?t.bind(this):t):e}function Ae(t){if(!(de.length&&de.includes(t,fe&&t.allowRecurse?ve+1:ve)||t===Ee)){const e=function(t){let e=ve+1,n=de.length;const r=De(t);for(;e<n;){const t=e+n>>>1;De(de[t])<r?e=t+1:n=t}return e}(t);e>-1?de.splice(e,0,t):de.push(t),ke()}}function ke(){fe||pe||(pe=!0,Te=Ie.then(Oe))}function Ne(t,e,n,r){_(t)?n.push(...t):e&&e.includes(t,t.allowRecurse?r+1:r)||n.push(t),ke()}function Ce(t,e=null){if(ge.length){for(Ee=e,me=[...new Set(ge)],ge.length=0,ye=0;ye<me.length;ye++)me[ye]();me=null,ye=0,Ee=null,Ce(t,e)}}function Re(t){if(be.length){const t=[...new Set(be)];if(be.length=0,we)return void we.push(...t);for(we=t,we.sort(((t,e)=>De(t)-De(e))),_e=0;_e<we.length;_e++)we[_e]();we=null,_e=0}}const De=t=>null==t.id?1/0:t.id;function Oe(t){pe=!1,fe=!0,Ce(t),de.sort(((t,e)=>De(t)-De(e)));try{for(ve=0;ve<de.length;ve++){const t=de[ve];t&&!1!==t.active&&ce(t,null,14)}}finally{ve=0,de.length=0,Re(),fe=!1,Te=null,(de.length||ge.length||be.length)&&Oe(t)}}function xe(t,e,...n){const r=t.vnode.props||l;let i=n;const o=e.startsWith("update:"),s=o&&e.slice(7);if(s&&s in r){const t=`${"modelValue"===s?"model":s}Modifiers`,{number:e,trim:o}=r[t]||l;o?i=n.map((t=>t.trim())):e&&(i=n.map(G))}let a,u=r[a=j(e)]||r[a=j(M(e))];!u&&o&&(u=r[a=j(U(e))]),u&&le(u,t,6,i);const c=r[a+"Once"];if(c){if(t.emitted){if(t.emitted[a])return}else t.emitted={};t.emitted[a]=!0,le(c,t,6,i)}}function Pe(t,e,n=!1){const r=e.emitsCache,i=r.get(t);if(void 0!==i)return i;const o=t.emits;let s={},a=!1;if(!E(t)){const r=t=>{const n=Pe(t,e,!0);n&&(a=!0,m(s,n))};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}return o||a?(_(o)?o.forEach((t=>s[t]=null)):m(s,o),r.set(t,s),s):(r.set(t,null),null)}function Le(t,e){return!(!t||!v(e))&&(e=e.slice(2).replace(/Once$/,""),w(t,e[0].toLowerCase()+e.slice(1))||w(t,U(e))||w(t,e))}let Me=null,Fe=null;function Ue(t){const e=Me;return Me=t,Fe=t&&t.type.__scopeId||null,e}function Ve(t){Fe=t}function je(){Fe=null}const qe=t=>Be;function Be(t,e=Me,n){if(!e)return t;if(t._n)return t;const r=(...n)=>{r._d&&dr(-1);const i=Ue(e),o=t(...n);return Ue(i),r._d&&dr(1),o};return r._n=!0,r._c=!0,r._d=!0,r}function Ke(t){const{type:e,vnode:n,proxy:r,withProxy:i,props:o,propsOptions:[s],slots:a,attrs:u,emit:c,render:l,renderCache:h,data:f,setupState:p,ctx:d,inheritAttrs:v}=t;let m;const y=Ue(t);try{let t;if(4&n.shapeFlag){const e=i||r;m=Sr(l.call(e,e,h,o,p,f,d)),t=u}else{const n=e;0,m=Sr(n.length>1?n(o,{attrs:u,slots:a,emit:c}):n(o,null)),t=e.props?u:Ge(u)}let y=m;if(t&&!1!==v){const e=Object.keys(t),{shapeFlag:n}=y;e.length&&(1&n||6&n)&&(s&&e.some(g)&&(t=He(t,s)),y=Ir(y,t))}0,n.dirs&&(y.dirs=y.dirs?y.dirs.concat(n.dirs):n.dirs),n.transition&&(y.transition=n.transition),m=y}catch(b){lr.length=0,he(b,t,1),m=_r(ur)}return Ue(y),m}const Ge=t=>{let e;for(const n in t)("class"===n||"style"===n||v(n))&&((e||(e={}))[n]=t[n]);return e},He=(t,e)=>{const n={};for(const r in t)g(r)&&r.slice(9)in e||(n[r]=t[r]);return n};function ze(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let i=0;i<r.length;i++){const o=r[i];if(e[o]!==t[o]&&!Le(n,o))return!0}return!1}function We(t,e){if(Lr){let n=Lr.provides;const r=Lr.parent&&Lr.parent.provides;r===n&&(n=Lr.provides=Object.create(r)),n[t]=e}else;}function Qe(t,e,n=!1){const r=Lr||Me;if(r){const i=null==r.parent?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(i&&t in i)return i[t];if(arguments.length>1)return n&&E(e)?e.call(r.proxy):e}}function Xe(t,e){return Je(t,null,e)}const $e={};function Ye(t,e,n){return Je(t,e,n)}function Je(t,e,{immediate:n,deep:r,flush:i,onTrack:o,onTrigger:s}=l,a=Lr){let u,c,h=!1,p=!1;if(ee(t)?(u=()=>t.value,h=!!t._shallow):Xt(t)?(u=()=>t,r=!0):_(t)?(p=!0,h=t.some(Xt),u=()=>t.map((t=>ee(t)?t.value:Xt(t)?en(t):E(t)?ce(t,a,2):void 0))):u=E(t)?e?()=>ce(t,a,2):()=>{if(!a||!a.isUnmounted)return c&&c(),le(t,a,3,[d])}:f,e&&r){const t=u;u=()=>en(t())}let d=t=>{c=b.options.onStop=()=>{ce(t,a,4)}},v=p?[]:$e;const g=()=>{if(b.active)if(e){const t=b();(r||h||(p?t.some(((t,e)=>q(t,v[e]))):q(t,v)))&&(c&&c(),le(e,a,3,[t,v===$e?void 0:v,d]),v=t)}else b()};let m;g.allowRecurse=!!e,m="sync"===i?g:"post"===i?()=>Jn(g,a&&a.suspense):()=>{!a||a.isMounted?function(t){Ne(t,me,ge,ye)}(g):g()};const b=$(u,{lazy:!0,onTrack:o,onTrigger:s,scheduler:m});return Br(b,a),e?n?g():v=b():"post"===i?Jn(b,a&&a.suspense):b(),()=>{Y(b),a&&y(a.effects,b)}}function Ze(t,e,n){const r=this.proxy,i=S(t)?t.includes(".")?tn(r,t):()=>r[t]:t.bind(r,r);let o;return E(e)?o=e:(o=e.handler,n=e),Je(i,o.bind(r),n,this)}function tn(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function en(t,e=new Set){if(!k(t)||e.has(t)||t.__v_skip)return t;if(e.add(t),ee(t))en(t.value,e);else if(_(t))for(let n=0;n<t.length;n++)en(t[n],e);else if(T(t)||I(t))t.forEach((t=>{en(t,e)}));else if(D(t))for(const n in t)en(t[n],e);return t}function nn(t){return E(t)?{setup:t,name:t.name}:t}const rn=t=>!!t.type.__asyncLoader,on=t=>t.type.__isKeepAlive;function sn(t,e){un(t,"a",e)}function an(t,e){un(t,"da",e)}function un(t,e,n=Lr){const r=t.__wdc||(t.__wdc=()=>{let e=n;for(;e;){if(e.isDeactivated)return;e=e.parent}t()});if(ln(e,r,n),n){let t=n.parent;for(;t&&t.parent;)on(t.parent.vnode)&&cn(r,e,n,t),t=t.parent}}function cn(t,e,n,r){const i=ln(e,t,r,!0);mn((()=>{y(r[e],i)}),n)}function ln(t,e,n=Lr,r=!1){if(n){const i=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;nt(),Mr(n);const i=le(e,n,t,r);return Mr(null),rt(),i});return r?i.unshift(o):i.push(o),o}}const hn=t=>(e,n=Lr)=>(!Ur||"sp"===t)&&ln(t,e,n),fn=hn("bm"),pn=hn("m"),dn=hn("bu"),vn=hn("u"),gn=hn("bum"),mn=hn("um"),yn=hn("sp"),bn=hn("rtg"),wn=hn("rtc");function _n(t,e=Lr){ln("ec",t,e)}let In=!0;function Tn(t){const e=An(t),n=t.proxy,r=t.ctx;In=!1,e.beforeCreate&&En(e.beforeCreate,t,"bc");const{data:i,computed:o,methods:s,watch:a,provide:u,inject:c,created:l,beforeMount:h,mounted:p,beforeUpdate:d,updated:v,activated:g,deactivated:m,beforeDestroy:y,beforeUnmount:b,destroyed:w,unmounted:I,render:T,renderTracked:S,renderTriggered:A,errorCaptured:N,serverPrefetch:C,expose:R,inheritAttrs:D,components:O,directives:x,filters:P}=e;if(c&&function(t,e,n=f){_(t)&&(t=Rn(t));for(const r in t){const n=t[r];k(n)?e[r]="default"in n?Qe(n.from||r,n.default,!0):Qe(n.from||r):e[r]=Qe(n)}}(c,r,null),s)for(const f in s){const t=s[f];E(t)&&(r[f]=t.bind(n))}if(i){const e=i.call(n,n);k(e)&&(t.data=zt(e))}if(In=!0,o)for(const _ in o){const t=o[_],e=Gr({get:E(t)?t.bind(n,n):E(t.get)?t.get.bind(n,n):f,set:!E(t)&&E(t.set)?t.set.bind(n):f});Object.defineProperty(r,_,{enumerable:!0,configurable:!0,get:()=>e.value,set:t=>e.value=t})}if(a)for(const f in a)Sn(a[f],r,n,f);if(u){const t=E(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{We(e,t[e])}))}function L(t,e){_(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(l&&En(l,t,"c"),L(fn,h),L(pn,p),L(dn,d),L(vn,v),L(sn,g),L(an,m),L(_n,N),L(wn,S),L(bn,A),L(gn,b),L(mn,I),L(yn,C),_(R))if(R.length){const e=t.exposed||(t.exposed={});R.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});T&&t.render===f&&(t.render=T),null!=D&&(t.inheritAttrs=D),O&&(t.components=O),x&&(t.directives=x)}function En(t,e,n){le(_(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function Sn(t,e,n,r){const i=r.includes(".")?tn(n,r):()=>n[r];if(S(t)){const n=e[t];E(n)&&Ye(i,n)}else if(E(t))Ye(i,t.bind(n));else if(k(t))if(_(t))t.forEach((t=>Sn(t,e,n,r)));else{const r=E(t.handler)?t.handler.bind(n):e[t.handler];E(r)&&Ye(i,r,t)}}function An(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:i,optionsCache:o,config:{optionMergeStrategies:s}}=t.appContext,a=o.get(e);let u;return a?u=a:i.length||n||r?(u={},i.length&&i.forEach((t=>kn(u,t,s,!0))),kn(u,e,s)):u=e,o.set(e,u),u}function kn(t,e,n,r=!1){const{mixins:i,extends:o}=e;o&&kn(t,o,n,!0),i&&i.forEach((e=>kn(t,e,n,!0)));for(const s in e)if(r&&"expose"===s);else{const r=Nn[s]||n&&n[s];t[s]=r?r(t[s],e[s]):e[s]}return t}const Nn={data:Cn,props:On,emits:On,methods:On,computed:On,beforeCreate:Dn,created:Dn,beforeMount:Dn,mounted:Dn,beforeUpdate:Dn,updated:Dn,beforeDestroy:Dn,destroyed:Dn,activated:Dn,deactivated:Dn,errorCaptured:Dn,serverPrefetch:Dn,components:On,directives:On,watch:function(t,e){if(!t)return e;if(!e)return t;const n=m(Object.create(null),t);for(const r in e)n[r]=Dn(t[r],e[r]);return n},provide:Cn,inject:function(t,e){return On(Rn(t),Rn(e))}};function Cn(t,e){return e?t?function(){return m(E(t)?t.call(this,this):t,E(e)?e.call(this,this):e)}:e:t}function Rn(t){if(_(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function Dn(t,e){return t?[...new Set([].concat(t,e))]:e}function On(t,e){return t?m(m(Object.create(null),t),e):e}function xn(t,e,n,r=!1){const i={},o={};K(o,yr,1),t.propsDefaults=Object.create(null),Pn(t,e,i,o);for(const s in t.propsOptions[0])s in i||(i[s]=void 0);n?t.props=r?i:Qt(i,!1,mt,Vt,Bt):t.type.props?t.props=i:t.props=o,t.attrs=o}function Pn(t,e,n,r){const[i,o]=t.propsOptions;let s,a=!1;if(e)for(let u in e){if(x(u))continue;const c=e[u];let l;i&&w(i,l=M(u))?o&&o.includes(l)?(s||(s={}))[l]=c:n[l]=c:Le(t.emitsOptions,u)||c!==r[u]&&(r[u]=c,a=!0)}if(o){const e=Jt(n),r=s||l;for(let s=0;s<o.length;s++){const a=o[s];n[a]=Ln(i,e,a,r[a],t,!w(r,a))}}return a}function Ln(t,e,n,r,i,o){const s=t[n];if(null!=s){const t=w(s,"default");if(t&&void 0===r){const t=s.default;if(s.type!==Function&&E(t)){const{propsDefaults:o}=i;n in o?r=o[n]:(Mr(i),r=o[n]=t.call(null,e),Mr(null))}else r=t}s[0]&&(o&&!t?r=!1:!s[1]||""!==r&&r!==U(n)||(r=!0))}return r}function Mn(t,e,n=!1){const r=e.propsCache,i=r.get(t);if(i)return i;const o=t.props,s={},a=[];let u=!1;if(!E(t)){const r=t=>{u=!0;const[n,r]=Mn(t,e,!0);m(s,n),r&&a.push(...r)};!n&&e.mixins.length&&e.mixins.forEach(r),t.extends&&r(t.extends),t.mixins&&t.mixins.forEach(r)}if(!o&&!u)return r.set(t,h),h;if(_(o))for(let h=0;h<o.length;h++){const t=M(o[h]);Fn(t)&&(s[t]=l)}else if(o)for(const l in o){const t=M(l);if(Fn(t)){const e=o[l],n=s[t]=_(e)||E(e)?{type:e}:e;if(n){const e=jn(Boolean,n.type),r=jn(String,n.type);n[0]=e>-1,n[1]=r<0||e<r,(e>-1||w(n,"default"))&&a.push(t)}}}const c=[s,a];return r.set(t,c),c}function Fn(t){return"$"!==t[0]}function Un(t){const e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Vn(t,e){return Un(t)===Un(e)}function jn(t,e){return _(e)?e.findIndex((e=>Vn(e,t))):E(e)&&Vn(e,t)?0:-1}const qn=t=>"_"===t[0]||"$stable"===t,Bn=t=>_(t)?t.map(Sr):[Sr(t)],Kn=(t,e,n)=>{const r=Be((t=>Bn(e(t))),n);return r._c=!1,r},Gn=(t,e,n)=>{const r=t._ctx;for(const i in t){if(qn(i))continue;const n=t[i];if(E(n))e[i]=Kn(0,n,r);else if(null!=n){const t=Bn(n);e[i]=()=>t}}},Hn=(t,e)=>{const n=Bn(e);t.slots.default=()=>n};function zn(t,e){if(null===Me)return t;const n=Me.proxy,r=t.dirs||(t.dirs=[]);for(let i=0;i<e.length;i++){let[t,o,s,a=l]=e[i];E(t)&&(t={mounted:t,updated:t}),r.push({dir:t,instance:n,value:o,oldValue:void 0,arg:s,modifiers:a})}return t}function Wn(t,e,n,r){const i=t.dirs,o=e&&e.dirs;for(let s=0;s<i.length;s++){const a=i[s];o&&(a.oldValue=o[s].value);let u=a.dir[r];u&&(nt(),le(u,n,8,[t.el,a,t,e]),rt())}}function Qn(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Xn=0;function $n(t,e){return function(n,r=null){null==r||k(r)||(r=null);const i=Qn(),o=new Set;let s=!1;const a=i.app={_uid:Xn++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:zr,get config(){return i.config},set config(t){},use:(t,...e)=>(o.has(t)||(t&&E(t.install)?(o.add(t),t.install(a,...e)):E(t)&&(o.add(t),t(a,...e))),a),mixin:t=>(i.mixins.includes(t)||i.mixins.push(t),a),component:(t,e)=>e?(i.components[t]=e,a):i.components[t],directive:(t,e)=>e?(i.directives[t]=e,a):i.directives[t],mount(o,u,c){if(!s){const l=_r(n,r);return l.appContext=i,u&&e?e(l,o):t(l,o,c),s=!0,a._container=o,o.__vue_app__=a,l.component.proxy}},unmount(){s&&(t(null,a._container),delete a._container.__vue_app__)},provide:(t,e)=>(i.provides[t]=e,a)};return a}}const Yn={scheduler:Ae,allowRecurse:!0},Jn=function(t,e){e&&e.pendingBranch?_(t)?e.effects.push(...t):e.effects.push(t):Ne(t,we,be,_e)},Zn=(t,e,n,r,i=!1)=>{if(_(t))return void t.forEach(((t,o)=>Zn(t,e&&(_(e)?e[o]:e),n,r,i)));if(rn(r)&&!i)return;const o=4&r.shapeFlag?qr(r.component)||r.component.proxy:r.el,s=i?null:o,{i:a,r:u}=t,c=e&&e.r,h=a.refs===l?a.refs={}:a.refs,f=a.setupState;if(null!=c&&c!==u&&(S(c)?(h[c]=null,w(f,c)&&(f[c]=null)):ee(c)&&(c.value=null)),S(u)){const t=()=>{h[u]=s,w(f,u)&&(f[u]=s)};s?(t.id=-1,Jn(t,n)):t()}else if(ee(u)){const t=()=>{u.value=s};s?(t.id=-1,Jn(t,n)):t()}else E(u)&&ce(u,a,12,[s,h])};function tr(t){return function(t,e){const{insert:n,remove:r,patchProp:i,forcePatchProp:o,createElement:s,createText:a,createComment:u,setText:c,setElementText:p,parentNode:d,nextSibling:v,setScopeId:g=f,cloneNode:y,insertStaticContent:b}=t,_=(t,e,n,r=null,i=null,o=null,s=!1,a=null,u=!1)=>{t&&!mr(t,e)&&(r=st(t),J(t,i,o,!0),t=null),-2===e.patchFlag&&(u=!1,e.dynamicChildren=null);const{type:c,ref:l,shapeFlag:h}=e;switch(c){case ar:I(t,e,n,r);break;case ur:T(t,e,n,r);break;case cr:null==t&&E(e,n,r,s);break;case sr:F(t,e,n,r,i,o,s,a,u);break;default:1&h?k(t,e,n,r,i,o,s,a,u):6&h?V(t,e,n,r,i,o,s,a,u):(64&h||128&h)&&c.process(t,e,n,r,i,o,s,a,u,ut)}null!=l&&i&&Zn(l,t&&t.ref,o,e||t,!e)},I=(t,e,r,i)=>{if(null==t)n(e.el=a(e.children),r,i);else{const n=e.el=t.el;e.children!==t.children&&c(n,e.children)}},T=(t,e,r,i)=>{null==t?n(e.el=u(e.children||""),r,i):e.el=t.el},E=(t,e,n,r)=>{const i=b(t.children,e,n,r,t.staticCache);t.el||(t.staticCache=i),t.el=i[0],t.anchor=i[i.length-1]},S=({el:t,anchor:e},r,i)=>{let o;for(;t&&t!==e;)o=v(t),n(t,r,i),t=o;n(e,r,i)},A=({el:t,anchor:e})=>{let n;for(;t&&t!==e;)n=v(t),r(t),t=n;r(e)},k=(t,e,n,r,i,o,s,a,u)=>{s=s||"svg"===e.type,null==t?C(e,n,r,i,o,s,a,u):O(t,e,i,o,s,a,u)},C=(t,e,r,o,a,u,c,l)=>{let h,f;const{type:d,props:v,shapeFlag:g,transition:m,patchFlag:b,dirs:w}=t;if(t.el&&void 0!==y&&-1===b)h=t.el=y(t.el);else{if(h=t.el=s(t.type,u,v&&v.is,v),8&g?p(h,t.children):16&g&&D(t.children,h,null,o,a,u&&"foreignObject"!==d,c,l||!!t.dynamicChildren),w&&Wn(t,null,o,"created"),v){for(const e in v)x(e)||i(h,e,null,v[e],u,t.children,o,a,it);(f=v.onVnodeBeforeMount)&&er(f,o,t)}R(h,t,t.scopeId,c,o)}w&&Wn(t,null,o,"beforeMount");const _=(!a||a&&!a.pendingBranch)&&m&&!m.persisted;_&&m.beforeEnter(h),n(h,e,r),((f=v&&v.onVnodeMounted)||_||w)&&Jn((()=>{f&&er(f,o,t),_&&m.enter(h),w&&Wn(t,null,o,"mounted")}),a)},R=(t,e,n,r,i)=>{if(n&&g(t,n),r)for(let o=0;o<r.length;o++)g(t,r[o]);if(i){if(e===i.subTree){const e=i.vnode;R(t,e,e.scopeId,e.slotScopeIds,i.parent)}}},D=(t,e,n,r,i,o,s,a,u=0)=>{for(let c=u;c<t.length;c++){const u=t[c]=a?Ar(t[c]):Sr(t[c]);_(null,u,e,n,r,i,o,s,a)}},O=(t,e,n,r,s,a,u)=>{const c=e.el=t.el;let{patchFlag:h,dynamicChildren:f,dirs:d}=e;h|=16&t.patchFlag;const v=t.props||l,g=e.props||l;let m;if((m=g.onVnodeBeforeUpdate)&&er(m,n,e,t),d&&Wn(e,t,n,"beforeUpdate"),h>0){if(16&h)L(c,e,v,g,n,r,s);else if(2&h&&v.class!==g.class&&i(c,"class",null,g.class,s),4&h&&i(c,"style",v.style,g.style,s),8&h){const a=e.dynamicProps;for(let e=0;e<a.length;e++){const u=a[e],l=v[u],h=g[u];(h!==l||o&&o(c,u))&&i(c,u,l,h,s,t.children,n,r,it)}}1&h&&t.children!==e.children&&p(c,e.children)}else u||null!=f||L(c,e,v,g,n,r,s);const y=s&&"foreignObject"!==e.type;f?P(t.dynamicChildren,f,c,n,r,y,a):u||z(t,e,c,null,n,r,y,a,!1),((m=g.onVnodeUpdated)||d)&&Jn((()=>{m&&er(m,n,e,t),d&&Wn(e,t,n,"updated")}),r)},P=(t,e,n,r,i,o,s)=>{for(let a=0;a<e.length;a++){const u=t[a],c=e[a],l=u.el&&(u.type===sr||!mr(u,c)||6&u.shapeFlag||64&u.shapeFlag)?d(u.el):n;_(u,c,l,null,r,i,o,s,!0)}},L=(t,e,n,r,s,a,u)=>{if(n!==r){for(const c in r){if(x(c))continue;const l=r[c],h=n[c];(l!==h||o&&o(t,c))&&i(t,c,h,l,u,e.children,s,a,it)}if(n!==l)for(const o in n)x(o)||o in r||i(t,o,n[o],null,u,e.children,s,a,it)}},F=(t,e,r,i,o,s,u,c,l)=>{const h=e.el=t?t.el:a(""),f=e.anchor=t?t.anchor:a("");let{patchFlag:p,dynamicChildren:d,slotScopeIds:v}=e;d&&(l=!0),v&&(c=c?c.concat(v):v),null==t?(n(h,r,i),n(f,r,i),D(e.children,r,f,o,s,u,c,l)):p>0&&64&p&&d&&t.dynamicChildren?(P(t.dynamicChildren,d,r,o,s,u,c),(null!=e.key||o&&e===o.subTree)&&nr(t,e,!0)):z(t,e,r,f,o,s,u,c,l)},V=(t,e,n,r,i,o,s,a,u)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?i.ctx.activate(e,n,r,s,u):j(e,n,r,i,o,s,u):q(t,e,u)},j=(t,e,n,r,i,o,s)=>{const a=t.component=function(t,e,n){const r=t.type,i=(e?e.appContext:t.appContext)||xr,o={uid:Pr++,vnode:t,type:r,parent:e,appContext:i,root:null,next:null,subTree:null,update:null,render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,effects:null,provides:e?e.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Mn(r,i),emitsOptions:Pe(r,i),emit:null,emitted:null,propsDefaults:l,inheritAttrs:r.inheritAttrs,ctx:l,data:l,props:l,attrs:l,slots:l,refs:l,setupState:l,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=xe.bind(null,o),o}(t,r,i);if(on(t)&&(a.ctx.renderer=ut),function(t,e=!1){Ur=e;const{props:n,children:r}=t.vnode,i=Fr(t);xn(t,n,i,e),((t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=Jt(e),K(e,"_",n)):Gn(e,t.slots={})}else t.slots={},e&&Hn(t,e);K(t.slots,yr,1)})(t,r);const o=i?function(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=Zt(new Proxy(t.ctx,Dr));const{setup:r}=n;if(r){const n=t.setupContext=r.length>1?function(t){const e=e=>{t.exposed=e||{}};return{attrs:t.attrs,slots:t.slots,emit:t.emit,expose:e}}(t):null;Lr=t,nt();const i=ce(r,t,0,[t.props,n]);if(rt(),Lr=null,N(i)){const n=()=>{Lr=null};if(i.then(n,n),e)return i.then((e=>{Vr(t,e)})).catch((e=>{he(e,t,0)}));t.asyncDep=i}else Vr(t,i)}else jr(t)}(t,e):void 0;Ur=!1}(a),a.asyncDep){if(i&&i.registerDep(a,G),!t.el){const t=a.subTree=_r(ur);T(null,t,e,n)}}else G(a,t,e,n,i,o,s)},q=(t,e,n)=>{const r=e.component=t.component;if(function(t,e,n){const{props:r,children:i,component:o}=t,{props:s,children:a,patchFlag:u}=e,c=o.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&u>=0))return!(!i&&!a||a&&a.$stable)||r!==s&&(r?!s||ze(r,s,c):!!s);if(1024&u)return!0;if(16&u)return r?ze(r,s,c):!!s;if(8&u){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(s[n]!==r[n]&&!Le(c,n))return!0}}return!1}(t,e,n)){if(r.asyncDep&&!r.asyncResolved)return void H(r,e,n);r.next=e,function(t){const e=de.indexOf(t);e>ve&&de.splice(e,1)}(r.update),r.update()}else e.component=t.component,e.el=t.el,r.vnode=e},G=(t,e,n,r,i,o,s)=>{t.update=$((function(){if(t.isMounted){let e,{next:n,bu:r,u:a,parent:u,vnode:c}=t,l=n;n?(n.el=c.el,H(t,n,s)):n=c,r&&B(r),(e=n.props&&n.props.onVnodeBeforeUpdate)&&er(e,u,n,c);const h=Ke(t),f=t.subTree;t.subTree=h,_(f,h,d(f.el),st(f),t,i,o),n.el=h.el,null===l&&function({vnode:t,parent:e},n){for(;e&&e.subTree===t;)(t=e.vnode).el=n,e=e.parent}(t,h.el),a&&Jn(a,i),(e=n.props&&n.props.onVnodeUpdated)&&Jn((()=>er(e,u,n,c)),i)}else{let s;const{el:a,props:u}=e,{bm:c,m:l,parent:h}=t;if(c&&B(c),(s=u&&u.onVnodeBeforeMount)&&er(s,h,e),a&&lt){const n=()=>{t.subTree=Ke(t),lt(a,t.subTree,t,i,null)};rn(e)?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{const s=t.subTree=Ke(t);_(null,s,n,r,t,i,o),e.el=s.el}if(l&&Jn(l,i),s=u&&u.onVnodeMounted){const t=e;Jn((()=>er(s,h,t)),i)}256&e.shapeFlag&&t.a&&Jn(t.a,i),t.isMounted=!0,e=n=r=null}}),Yn)},H=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,function(t,e,n,r){const{props:i,attrs:o,vnode:{patchFlag:s}}=t,a=Jt(i),[u]=t.propsOptions;let c=!1;if(!(r||s>0)||16&s){let r;Pn(t,e,i,o)&&(c=!0);for(const o in a)e&&(w(e,o)||(r=U(o))!==o&&w(e,r))||(u?!n||void 0===n[o]&&void 0===n[r]||(i[o]=Ln(u,a,o,void 0,t,!0)):delete i[o]);if(o!==a)for(const t in o)e&&w(e,t)||(delete o[t],c=!0)}else if(8&s){const n=t.vnode.dynamicProps;for(let r=0;r<n.length;r++){let s=n[r];const l=e[s];if(u)if(w(o,s))l!==o[s]&&(o[s]=l,c=!0);else{const e=M(s);i[e]=Ln(u,a,e,l,t,!1)}else l!==o[s]&&(o[s]=l,c=!0)}}c&&ot(t,"set","$attrs")}(t,e.props,r,n),((t,e,n)=>{const{vnode:r,slots:i}=t;let o=!0,s=l;if(32&r.shapeFlag){const t=e._;t?n&&1===t?o=!1:(m(i,e),n||1!==t||delete i._):(o=!e.$stable,Gn(e,i)),s=e}else e&&(Hn(t,e),s={default:1});if(o)for(const a in i)qn(a)||a in s||delete i[a]})(t,e.children,n),nt(),Ce(void 0,t.update),rt()},z=(t,e,n,r,i,o,s,a,u=!1)=>{const c=t&&t.children,l=t?t.shapeFlag:0,h=e.children,{patchFlag:f,shapeFlag:d}=e;if(f>0){if(128&f)return void Q(c,h,n,r,i,o,s,a,u);if(256&f)return void W(c,h,n,r,i,o,s,a,u)}8&d?(16&l&&it(c,i,o),h!==c&&p(n,h)):16&l?16&d?Q(c,h,n,r,i,o,s,a,u):it(c,i,o,!0):(8&l&&p(n,""),16&d&&D(h,n,r,i,o,s,a,u))},W=(t,e,n,r,i,o,s,a,u)=>{e=e||h;const c=(t=t||h).length,l=e.length,f=Math.min(c,l);let p;for(p=0;p<f;p++){const r=e[p]=u?Ar(e[p]):Sr(e[p]);_(t[p],r,n,null,i,o,s,a,u)}c>l?it(t,i,o,!0,!1,f):D(e,n,r,i,o,s,a,u,f)},Q=(t,e,n,r,i,o,s,a,u)=>{let c=0;const l=e.length;let f=t.length-1,p=l-1;for(;c<=f&&c<=p;){const r=t[c],l=e[c]=u?Ar(e[c]):Sr(e[c]);if(!mr(r,l))break;_(r,l,n,null,i,o,s,a,u),c++}for(;c<=f&&c<=p;){const r=t[f],c=e[p]=u?Ar(e[p]):Sr(e[p]);if(!mr(r,c))break;_(r,c,n,null,i,o,s,a,u),f--,p--}if(c>f){if(c<=p){const t=p+1,h=t<l?e[t].el:r;for(;c<=p;)_(null,e[c]=u?Ar(e[c]):Sr(e[c]),n,h,i,o,s,a,u),c++}}else if(c>p)for(;c<=f;)J(t[c],i,o,!0),c++;else{const d=c,v=c,g=new Map;for(c=v;c<=p;c++){const t=e[c]=u?Ar(e[c]):Sr(e[c]);null!=t.key&&g.set(t.key,c)}let m,y=0;const b=p-v+1;let w=!1,I=0;const T=new Array(b);for(c=0;c<b;c++)T[c]=0;for(c=d;c<=f;c++){const r=t[c];if(y>=b){J(r,i,o,!0);continue}let l;if(null!=r.key)l=g.get(r.key);else for(m=v;m<=p;m++)if(0===T[m-v]&&mr(r,e[m])){l=m;break}void 0===l?J(r,i,o,!0):(T[l-v]=c+1,l>=I?I=l:w=!0,_(r,e[l],n,null,i,o,s,a,u),y++)}const E=w?function(t){const e=t.slice(),n=[0];let r,i,o,s,a;const u=t.length;for(r=0;r<u;r++){const u=t[r];if(0!==u){if(i=n[n.length-1],t[i]<u){e[r]=i,n.push(r);continue}for(o=0,s=n.length-1;o<s;)a=(o+s)/2|0,t[n[a]]<u?o=a+1:s=a;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}o=n.length,s=n[o-1];for(;o-- >0;)n[o]=s,s=e[s];return n}(T):h;for(m=E.length-1,c=b-1;c>=0;c--){const t=v+c,h=e[t],f=t+1<l?e[t+1].el:r;0===T[c]?_(null,h,n,f,i,o,s,a,u):w&&(m<0||c!==E[m]?X(h,n,f,2):m--)}}},X=(t,e,r,i,o=null)=>{const{el:s,type:a,transition:u,children:c,shapeFlag:l}=t;if(6&l)return void X(t.component.subTree,e,r,i);if(128&l)return void t.suspense.move(e,r,i);if(64&l)return void a.move(t,e,r,ut);if(a===sr){n(s,e,r);for(let t=0;t<c.length;t++)X(c[t],e,r,i);return void n(t.anchor,e,r)}if(a===cr)return void S(t,e,r);if(2!==i&&1&l&&u)if(0===i)u.beforeEnter(s),n(s,e,r),Jn((()=>u.enter(s)),o);else{const{leave:t,delayLeave:i,afterLeave:o}=u,a=()=>n(s,e,r),c=()=>{t(s,(()=>{a(),o&&o()}))};i?i(s,a,c):c()}else n(s,e,r)},J=(t,e,n,r=!1,i=!1)=>{const{type:o,props:s,ref:a,children:u,dynamicChildren:c,shapeFlag:l,patchFlag:h,dirs:f}=t;if(null!=a&&Zn(a,null,n,t,!0),256&l)return void e.ctx.deactivate(t);const p=1&l&&f;let d;if((d=s&&s.onVnodeBeforeUnmount)&&er(d,e,t),6&l)et(t.component,n,r);else{if(128&l)return void t.suspense.unmount(n,r);p&&Wn(t,null,e,"beforeUnmount"),64&l?t.type.remove(t,e,n,i,ut,r):c&&(o!==sr||h>0&&64&h)?it(c,e,n,!1,!0):(o===sr&&(128&h||256&h)||!i&&16&l)&&it(u,e,n),r&&Z(t)}((d=s&&s.onVnodeUnmounted)||p)&&Jn((()=>{d&&er(d,e,t),p&&Wn(t,null,e,"unmounted")}),n)},Z=t=>{const{type:e,el:n,anchor:i,transition:o}=t;if(e===sr)return void tt(n,i);if(e===cr)return void A(t);const s=()=>{r(n),o&&!o.persisted&&o.afterLeave&&o.afterLeave()};if(1&t.shapeFlag&&o&&!o.persisted){const{leave:e,delayLeave:r}=o,i=()=>e(n,s);r?r(t.el,s,i):i()}else s()},tt=(t,e)=>{let n;for(;t!==e;)n=v(t),r(t),t=n;r(e)},et=(t,e,n)=>{const{bum:r,effects:i,update:o,subTree:s,um:a}=t;if(r&&B(r),i)for(let u=0;u<i.length;u++)Y(i[u]);o&&(Y(o),J(s,t,e,n)),a&&Jn(a,e),Jn((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},it=(t,e,n,r=!1,i=!1,o=0)=>{for(let s=o;s<t.length;s++)J(t[s],e,n,r,i)},st=t=>6&t.shapeFlag?st(t.component.subTree):128&t.shapeFlag?t.suspense.next():v(t.anchor||t.el),at=(t,e,n)=>{null==t?e._vnode&&J(e._vnode,null,null,!0):_(e._vnode||null,t,e,null,null,null,n),Re(),e._vnode=t},ut={p:_,um:J,m:X,r:Z,mt:j,mc:D,pc:z,pbc:P,n:st,o:t};let ct,lt;e&&([ct,lt]=e(ut));return{render:at,hydrate:ct,createApp:$n(at,ct)}}(t)}function er(t,e,n,r=null){le(t,e,7,[n,r])}function nr(t,e,n=!1){const r=t.children,i=e.children;if(_(r)&&_(i))for(let o=0;o<r.length;o++){const t=r[o];let e=i[o];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=i[o]=Ar(i[o]),e.el=t.el),n||nr(t,e))}}function rr(t,e){return function(t,e,n=!0,r=!1){const i=Me||Lr;if(i){const n=i.type;if("components"===t){const t=Kr(n);if(t&&(t===e||t===M(e)||t===V(M(e))))return n}const o=or(i[t]||n[t],e)||or(i.appContext[t],e);return!o&&r?n:o}}("components",t,!0,e)||t}const ir=Symbol();function or(t,e){return t&&(t[e]||t[M(e)]||t[V(M(e))])}const sr=Symbol(void 0),ar=Symbol(void 0),ur=Symbol(void 0),cr=Symbol(void 0),lr=[];let hr=null;function fr(t=!1){lr.push(hr=t?null:[])}let pr=1;function dr(t){pr+=t}function vr(t,e,n,r,i){const o=_r(t,e,n,r,i,!0);return o.dynamicChildren=pr>0?hr||h:null,lr.pop(),hr=lr[lr.length-1]||null,pr>0&&hr&&hr.push(o),o}function gr(t){return!!t&&!0===t.__v_isVNode}function mr(t,e){return t.type===e.type&&t.key===e.key}const yr="__vInternal",br=({key:t})=>null!=t?t:null,wr=({ref:t})=>null!=t?S(t)||ee(t)||E(t)?{i:Me,r:t}:t:null,_r=function(t,e=null,n=null,i=0,o=null,s=!1){t&&t!==ir||(t=ur);if(gr(t)){const r=Ir(t,e,!0);return n&&kr(r,n),r}u=t,E(u)&&"__vccOpts"in u&&(t=t.__vccOpts);var u;if(e){(Yt(e)||yr in e)&&(e=m({},e));let{class:t,style:n}=e;t&&!S(t)&&(e.class=a(t)),k(n)&&(Yt(n)&&!_(n)&&(n=m({},n)),e.style=r(n))}const c=S(t)?1:(t=>t.__isSuspense)(t)?128:(t=>t.__isTeleport)(t)?64:k(t)?4:E(t)?2:0,l={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&br(e),ref:e&&wr(e),scopeId:Fe,slotScopeIds:null,children:null,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,shapeFlag:c,patchFlag:i,dynamicProps:o,dynamicChildren:null,appContext:null};kr(l,n),128&c&&t.normalize(l);pr>0&&!s&&hr&&(i>0||6&c)&&32!==i&&hr.push(l);return l};function Ir(t,e,n=!1){const{props:i,ref:o,patchFlag:s,children:u}=t,c=e?function(...t){const e=m({},t[0]);for(let n=1;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=a([e.class,i.class]));else if("style"===t)e.style=r([e.style,i.style]);else if(v(t)){const n=e[t],r=i[t];n!==r&&(e[t]=n?[].concat(n,r):r)}else""!==t&&(e[t]=i[t])}return e}(i||{},e):i;return{__v_isVNode:!0,__v_skip:!0,type:t.type,props:c,key:c&&br(c),ref:e&&e.ref?n&&o?_(o)?o.concat(wr(e)):[o,wr(e)]:wr(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:u,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,staticCache:t.staticCache,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==sr?-1===s?16:16|s:s,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Ir(t.ssContent),ssFallback:t.ssFallback&&Ir(t.ssFallback),el:t.el,anchor:t.anchor}}function Tr(t=" ",e=0){return _r(ar,null,t,e)}function Er(t="",e=!1){return e?(fr(),vr(ur,null,t)):_r(ur,null,t)}function Sr(t){return null==t||"boolean"==typeof t?_r(ur):_(t)?_r(sr,null,t.slice()):"object"==typeof t?Ar(t):_r(ar,null,String(t))}function Ar(t){return null===t.el?t:Ir(t)}function kr(t,e){let n=0;const{shapeFlag:r}=t;if(null==e)e=null;else if(_(e))n=16;else if("object"==typeof e){if(1&r||64&r){const n=e.default;return void(n&&(n._c&&(n._d=!1),kr(t,n()),n._c&&(n._d=!0)))}{n=32;const r=e._;r||yr in e?3===r&&Me&&(1===Me.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=Me}}else E(e)?(e={default:e,_ctx:Me},n=32):(e=String(e),64&r?(n=16,e=[Tr(e)]):n=8);t.children=e,t.shapeFlag|=n}function Nr(t,e){let n;if(_(t)||S(t)){n=new Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=e(t[r],r)}else if("number"==typeof t){n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r+1,r)}else if(k(t))if(t[Symbol.iterator])n=Array.from(t,e);else{const r=Object.keys(t);n=new Array(r.length);for(let i=0,o=r.length;i<o;i++){const o=r[i];n[i]=e(t[o],o,i)}}else n=[];return n}const Cr=t=>t?Fr(t)?qr(t)||t.proxy:Cr(t.parent):null,Rr=m(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>Cr(t.parent),$root:t=>Cr(t.root),$emit:t=>t.emit,$options:t=>An(t),$forceUpdate:t=>()=>Ae(t.update),$nextTick:t=>Se.bind(t.proxy),$watch:t=>Ze.bind(t)}),Dr={get({_:t},e){const{ctx:n,setupState:r,data:i,props:o,accessCache:s,type:a,appContext:u}=t;let c;if("$"!==e[0]){const a=s[e];if(void 0!==a)switch(a){case 0:return r[e];case 1:return i[e];case 3:return n[e];case 2:return o[e]}else{if(r!==l&&w(r,e))return s[e]=0,r[e];if(i!==l&&w(i,e))return s[e]=1,i[e];if((c=t.propsOptions[0])&&w(c,e))return s[e]=2,o[e];if(n!==l&&w(n,e))return s[e]=3,n[e];In&&(s[e]=4)}}const h=Rr[e];let f,p;return h?("$attrs"===e&&it(t,0,e),h(t)):(f=a.__cssModules)&&(f=f[e])?f:n!==l&&w(n,e)?(s[e]=3,n[e]):(p=u.config.globalProperties,w(p,e)?p[e]:void 0)},set({_:t},e,n){const{data:r,setupState:i,ctx:o}=t;if(i!==l&&w(i,e))i[e]=n;else if(r!==l&&w(r,e))r[e]=n;else if(w(t.props,e))return!1;return("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:i,propsOptions:o}},s){let a;return void 0!==n[s]||t!==l&&w(t,s)||e!==l&&w(e,s)||(a=o[0])&&w(a,s)||w(r,s)||w(Rr,s)||w(i.config.globalProperties,s)}},Or=m({},Dr,{get(t,e){if(e!==Symbol.unscopables)return Dr.get(t,e,t)},has:(t,n)=>"_"!==n[0]&&!e(n)}),xr=Qn();let Pr=0;let Lr=null;const Mr=t=>{Lr=t};function Fr(t){return 4&t.vnode.shapeFlag}let Ur=!1;function Vr(t,e,n){E(e)?t.render=e:k(e)&&(t.setupState=ae(e)),jr(t)}function jr(t,e,n){const r=t.type;t.render||(t.render=r.render||f,t.render._rc&&(t.withProxy=new Proxy(t.ctx,Or))),Lr=t,nt(),Tn(t),rt(),Lr=null}function qr(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy(ae(Zt(t.exposed)),{get:(e,n)=>n in e?e[n]:n in Rr?Rr[n](t):void 0}))}function Br(t,e=Lr){e&&(e.effects||(e.effects=[])).push(t)}function Kr(t){return E(t)&&t.displayName||t.name}function Gr(t){const e=function(t){let e,n;return E(t)?(e=t,n=f):(e=t.get,n=t.set),new ue(e,n,E(t)||!t.set)}(t);return Br(e.effect),e}function Hr(t,e,n){const r=arguments.length;return 2===r?k(e)&&!_(e)?gr(e)?_r(t,null,[e]):_r(t,e):_r(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):3===r&&gr(n)&&(n=[n]),_r(t,e,n))}const zr="3.1.4",Wr="http://www.w3.org/2000/svg",Qr="undefined"!=typeof document?document:null,Xr={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const i=e?Qr.createElementNS(Wr,t):Qr.createElement(t,n?{is:n}:void 0);return"select"===t&&r&&null!=r.multiple&&i.setAttribute("multiple",r.multiple),i},createText:t=>Qr.createTextNode(t),createComment:t=>Qr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Qr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},cloneNode(t){const e=t.cloneNode(!0);return"_value"in t&&(e._value=t._value),e},insertStaticContent(t,e,n,r,i){if(i){let t,r,o=0,s=i.length;for(;o<s;o++){const a=i[o].cloneNode(!0);0===o&&(t=a),o===s-1&&(r=a),e.insertBefore(a,n)}return[t,r]}const o=n?n.previousSibling:e.lastChild;if(n){let i,o=!1;n instanceof Element?i=n:(o=!0,i=r?Qr.createElementNS(Wr,"g"):Qr.createElement("div"),e.insertBefore(i,n)),i.insertAdjacentHTML("beforebegin",t),o&&e.removeChild(i)}else e.insertAdjacentHTML("beforeend",t);let s=o?o.nextSibling:e.firstChild;const a=n?n.previousSibling:e.lastChild,u=[];for(;s&&(u.push(s),s!==a);)s=s.nextSibling;return u}};const $r=/\s*!important$/;function Yr(t,e,n){if(_(n))n.forEach((n=>Yr(t,e,n)));else if(e.startsWith("--"))t.setProperty(e,n);else{const r=function(t,e){const n=Zr[e];if(n)return n;let r=M(e);if("filter"!==r&&r in t)return Zr[e]=r;r=V(r);for(let i=0;i<Jr.length;i++){const n=Jr[i]+r;if(n in t)return Zr[e]=n}return e}(t,e);$r.test(n)?t.setProperty(U(r),n.replace($r,""),"important"):t[r]=n}}const Jr=["Webkit","Moz","ms"],Zr={};const ti="http://www.w3.org/1999/xlink";let ei=Date.now,ni=!1;if("undefined"!=typeof window){ei()>document.createEvent("Event").timeStamp&&(ei=()=>performance.now());const t=navigator.userAgent.match(/firefox\/(\d+)/i);ni=!!(t&&Number(t[1])<=53)}let ri=0;const ii=Promise.resolve(),oi=()=>{ri=0};function si(t,e,n,r){t.addEventListener(e,n,r)}function ai(t,e,n,r,i=null){const o=t._vei||(t._vei={}),s=o[e];if(r&&s)s.value=r;else{const[n,a]=function(t){let e;if(ui.test(t)){let n;for(e={};n=t.match(ui);)t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}return[U(t.slice(2)),e]}(e);if(r){si(t,n,o[e]=function(t,e){const n=t=>{const r=t.timeStamp||ei();(ni||r>=n.attached-1)&&le(function(t,e){if(_(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t(e)))}return e}(t,n.value),e,5,[t])};return n.value=t,n.attached=(()=>ri||(ii.then(oi),ri=ei()))(),n}(r,i),a)}else s&&(!function(t,e,n,r){t.removeEventListener(e,n,r)}(t,n,s,a),o[e]=void 0)}}const ui=/(?:Once|Passive|Capture)$/;const ci=/^on[a-z]/;const li=t=>{const e=t.props["onUpdate:modelValue"];return _(e)?t=>B(e,t):e};function hi(t){t.target.composing=!0}function fi(t){const e=t.target;e.composing&&(e.composing=!1,function(t,e){const n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}(e,"input"))}const pi={created(t,{modifiers:{lazy:e,trim:n,number:r}},i){t._assign=li(i);const o=r||"number"===t.type;si(t,e?"change":"input",(e=>{if(e.target.composing)return;let r=t.value;n?r=r.trim():o&&(r=G(r)),t._assign(r)})),n&&si(t,"change",(()=>{t.value=t.value.trim()})),e||(si(t,"compositionstart",hi),si(t,"compositionend",fi),si(t,"change",fi))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{trim:n,number:r}},i){if(t._assign=li(i),t.composing)return;if(document.activeElement===t){if(n&&t.value.trim()===e)return;if((r||"number"===t.type)&&G(t.value)===e)return}const o=null==e?"":e;t.value!==o&&(t.value=o)}},di=["ctrl","shift","alt","meta"],vi={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>di.some((n=>t[`${n}Key`]&&!e.includes(n)))},gi=(t,e)=>(n,...r)=>{for(let t=0;t<e.length;t++){const r=vi[e[t]];if(r&&r(n,e))return}return t(n,...r)},mi=m({patchProp:(t,e,r,i,o=!1,s,a,u,c)=>{switch(e){case"class":!function(t,e,n){if(null==e&&(e=""),n)t.setAttribute("class",e);else{const n=t._vtc;n&&(e=(e?[e,...n]:[...n]).join(" ")),t.className=e}}(t,i,o);break;case"style":!function(t,e,n){const r=t.style;if(n)if(S(n)){if(e!==n){const e=r.display;r.cssText=n,"_vod"in t&&(r.display=e)}}else{for(const t in n)Yr(r,t,n[t]);if(e&&!S(e))for(const t in e)null==n[t]&&Yr(r,t,"")}else t.removeAttribute("style")}(t,r,i);break;default:v(e)?g(e)||ai(t,e,0,i,a):function(t,e,n,r){if(r)return"innerHTML"===e||!!(e in t&&ci.test(e)&&E(n));if("spellcheck"===e||"draggable"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if(ci.test(e)&&S(n))return!1;return e in t}(t,e,i,o)?function(t,e,n,r,i,o,s){if("innerHTML"===e||"textContent"===e)return r&&s(r,i,o),void(t[e]=null==n?"":n);if("value"===e&&"PROGRESS"!==t.tagName){t._value=n;const r=null==n?"":n;return t.value!==r&&(t.value=r),void(null==n&&t.removeAttribute(e))}if(""===n||null==n){const r=typeof t[e];if(""===n&&"boolean"===r)return void(t[e]=!0);if(null==n&&"string"===r)return t[e]="",void t.removeAttribute(e);if("number"===r)return t[e]=0,void t.removeAttribute(e)}try{t[e]=n}catch(Rb){}}(t,e,i,s,a,u,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),function(t,e,r,i,o){if(i&&e.startsWith("xlink:"))null==r?t.removeAttributeNS(ti,e.slice(6,e.length)):t.setAttributeNS(ti,e,r);else{const i=n(e);null==r||i&&!1===r?t.removeAttribute(e):t.setAttribute(e,i?"":r)}}(t,e,i,o))}},forcePatchProp:(t,e)=>"value"===e},Xr);let yi;const bi=(...t)=>{const e=(yi||(yi=tr(mi))).createApp(...t),{mount:n}=e;return e.mount=t=>{const r=function(t){if(S(t)){return document.querySelector(t)}return t}
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(t);if(!r)return;const i=e._component;E(i)||i.render||i.template||(i.template=r.innerHTML),r.innerHTML="";const o=n(r,!1,r instanceof SVGElement);return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};var wi=function(t,e){return(wi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function _i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}wi(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var Ii=function(){return(Ii=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function Ti(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(Rb){o(Rb)}}function a(t){try{u(r.throw(t))}catch(Rb){o(Rb)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function Ei(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!(i=s.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(Rb){o=[6,Rb],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function Si(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ai(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function ki(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ni={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var l=s<<4&240|a>>2;if(r.push(l),64!==u){var h=a<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Ci(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=Ci(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Ri=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Di(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oi(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Rb){return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var xi=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Pi.prototype.create),o}return _i(e,t),e}(Error),Pi=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?Li(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new xi(i,a,r);return u},t}();function Li(t,e){return t.replace(Mi,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Mi=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Ui(t,e){var n=new Vi(t,e);return n.subscribe.bind(n)}var Vi=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=ji),void 0===r.error&&(r.error=ji),void 0===r.complete&&(r.complete=ji);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(Rb){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(Rb){"undefined"!=typeof console&&console.error&&console.error(Rb)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function ji(){}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(t){return t&&t._delegate?t._delegate:t}var Bi=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),Ki=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ri;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(Rb){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Rb){if(r)return null;throw Rb}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(Rb){}try{for(var r=Si(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Ai(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService({instanceIdentifier:u});a.resolve(c)}catch(Rb){}}}catch(l){e={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Ti(this,void 0,void 0,(function(){var t;return Ei(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(ki(ki([],Ai(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),Ai(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var s=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var a=Si(this.instancesDeferred.entries()),u=a.next();!u.done;u=a.next()){var c=Ai(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(s)}}catch(f){e={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return s},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=Si(i),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(s){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gi,Hi=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Ki(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function zi(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Wi,Qi,Xi=[];(Qi=Wi||(Wi={}))[Qi.DEBUG=0]="DEBUG",Qi[Qi.VERBOSE=1]="VERBOSE",Qi[Qi.INFO=2]="INFO",Qi[Qi.WARN=3]="WARN",Qi[Qi.ERROR=4]="ERROR",Qi[Qi.SILENT=5]="SILENT";var $i,Yi={debug:Wi.DEBUG,verbose:Wi.VERBOSE,info:Wi.INFO,warn:Wi.WARN,error:Wi.ERROR,silent:Wi.SILENT},Ji=Wi.INFO,Zi=((Gi={})[Wi.DEBUG]="log",Gi[Wi.VERBOSE]="log",Gi[Wi.INFO]="info",Gi[Wi.WARN]="warn",Gi[Wi.ERROR]="error",Gi),to=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Zi[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,zi(["["+i+"]  "+t.name+":"],n))}},eo=function(){function t(t){this.name=t,this._logLevel=Ji,this._logHandler=to,this._userLogHandler=null,Xi.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Wi))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Yi[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zi([this,Wi.DEBUG],t)),this._logHandler.apply(this,zi([this,Wi.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zi([this,Wi.VERBOSE],t)),this._logHandler.apply(this,zi([this,Wi.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zi([this,Wi.INFO],t)),this._logHandler.apply(this,zi([this,Wi.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zi([this,Wi.WARN],t)),this._logHandler.apply(this,zi([this,Wi.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,zi([this,Wi.ERROR],t)),this._logHandler.apply(this,zi([this,Wi.ERROR],t))},t}();function no(t){Xi.forEach((function(e){e.setLogLevel(t)}))}var ro,io=(($i={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",$i["bad-app-name"]="Illegal App name: '{$appName}",$i["duplicate-app"]="Firebase App named '{$appName}' already exists",$i["app-deleted"]="Firebase App named '{$appName}' already deleted",$i["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",$i["invalid-log-argument"]="First argument to `onLog` must be null or a function.",$i),oo=new Pi("app","Firebase",io),so=((ro={})["@firebase/app"]="fire-core",ro["@firebase/analytics"]="fire-analytics",ro["@firebase/app-check"]="fire-app-check",ro["@firebase/auth"]="fire-auth",ro["@firebase/database"]="fire-rtdb",ro["@firebase/functions"]="fire-fn",ro["@firebase/installations"]="fire-iid",ro["@firebase/messaging"]="fire-fcm",ro["@firebase/performance"]="fire-perf",ro["@firebase/remote-config"]="fire-rc",ro["@firebase/storage"]="fire-gcs",ro["@firebase/firestore"]="fire-fst",ro["fire-js"]="fire-js",ro["firebase-wrapper"]="fire-js-all",ro),ao=new eo("@firebase/app"),uo=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Ci(void 0,t),this.container=new Hi(e.name),this._addComponent(new Bi("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(Rb){ao.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,Rb)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw oo.create("app-deleted",{appName:this.name_})},t}();uo.prototype.name&&uo.prototype.options||uo.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function co(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var s=o.name;if("string"!=typeof s||!s)throw oo.create("bad-app-name",{appName:String(s)});if(Fi(e,s))throw oo.create("duplicate-app",{appName:s});var a=new t(n,o,r);return e[s]=a,a},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=so[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),a=e.match(/\s|\//);if(s||a){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&a&&u.push("and"),a&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void ao.warn(u.join(" "))}o(new Bi(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:no,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw oo.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=Yi[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var s=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:Wi[n].toLowerCase(),message:s,args:i,type:e.name})}},r=0,i=Xi;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function i(t){if(!Fi(e,t=t||"[DEFAULT]"))throw oo.create("no-app",{appName:t});return e[t]}function o(o){var s=o.name;if(n.has(s))return ao.debug("There were multiple attempts to register component "+s+"."),"PUBLIC"===o.type?r[s]:null;if(n.set(s,o),"PUBLIC"===o.type){var a=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[s])throw oo.create("invalid-app-argument",{appName:s});return t[s]()};void 0!==o.serviceProps&&Ci(a,o.serviceProps),r[s]=a,t.prototype[s]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,s);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[s]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lo=function t(){var e=co(uo);return e.INTERNAL=Ii(Ii({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Ci(e,t)},createSubscribe:Ui,ErrorFactory:Pi,deepExtend:Ci}),e}(),ho=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){ao.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var fo=self.firebase.SDK_VERSION;fo&&fo.indexOf("LITE")>=0&&ao.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var po=lo.initializeApp;lo.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Oi()&&ao.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),po.apply(void 0,t)};var vo,go,mo=lo;(vo=mo).INTERNAL.registerComponent(new Bi("platform-logger",(function(t){return new ho(t)}),"PRIVATE")),vo.registerVersion("@firebase/app","0.6.28",go),vo.registerVersion("fire-js","");
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
mo.registerVersion("firebase","8.7.0","app"),mo.SDK_VERSION="8.7.0";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function bo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var wo,_o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Io=Io||{},To=_o||self;function Eo(){}function So(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ao(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var ko="closure_uid_"+(1e9*Math.random()>>>0),No=0;function Co(t,e,n){return t.call.apply(t.bind,arguments)}function Ro(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Do(t,e,n){return(Do=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Co:Ro).apply(null,arguments)}function Oo(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function xo(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Po(){this.s=this.s,this.o=this.o}var Lo={};Po.prototype.s=!1,Po.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,ko)&&t[ko]||(t[ko]=++No)}(this);delete Lo[t]}},Po.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Mo=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Fo=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function Uo(t){return Array.prototype.concat.apply([],arguments)}function Vo(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function jo(t){return/^[\s\xa0]*$/.test(t)}var qo,Bo=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Ko(t,e){return-1!=t.indexOf(e)}function Go(t,e){return t<e?-1:t>e?1:0}t:{var Ho=To.navigator;if(Ho){var zo=Ho.userAgent;if(zo){qo=zo;break t}}qo=""}function Wo(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function Qo(t){var e={};for(var n in t)e[n]=t[n];return e}var Xo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $o(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<Xo.length;o++)n=Xo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Yo(t){return Yo[" "](t),t}Yo[" "]=Eo;var Jo,Zo,ts=Ko(qo,"Opera"),es=Ko(qo,"Trident")||Ko(qo,"MSIE"),ns=Ko(qo,"Edge"),rs=ns||es,is=Ko(qo,"Gecko")&&!(Ko(qo.toLowerCase(),"webkit")&&!Ko(qo,"Edge"))&&!(Ko(qo,"Trident")||Ko(qo,"MSIE"))&&!Ko(qo,"Edge"),os=Ko(qo.toLowerCase(),"webkit")&&!Ko(qo,"Edge");function ss(){var t=To.document;return t?t.documentMode:void 0}t:{var as="",us=(Zo=qo,is?/rv:([^\);]+)(\)|;)/.exec(Zo):ns?/Edge\/([\d\.]+)/.exec(Zo):es?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Zo):os?/WebKit\/(\S+)/.exec(Zo):ts?/(?:Version)[ \/]?(\S+)/.exec(Zo):void 0);if(us&&(as=us?us[1]:""),es){var cs=ss();if(null!=cs&&cs>parseFloat(as)){Jo=String(cs);break t}}Jo=as}var ls,hs={};function fs(){return function(t){var e=hs;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=Bo(String(Jo)).split("."),n=Bo("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=Go(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||Go(0==o[2].length,0==s[2].length)||Go(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}))}if(To.document&&es){var ps=ss();ls=ps||(parseInt(Jo,10)||void 0)}else ls=void 0;var ds=ls,vs=function(){if(!To.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{To.addEventListener("test",Eo,e),To.removeEventListener("test",Eo,e)}catch(n){}return t}();function gs(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ms(t,e){if(gs.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(is){t:{try{Yo(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:ys[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ms.Z.h.call(this)}}gs.prototype.h=function(){this.defaultPrevented=!0},xo(ms,gs);var ys={2:"touch",3:"pen",4:"mouse"};ms.prototype.h=function(){ms.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var bs="closure_listenable_"+(1e6*Math.random()|0),ws=0;function _s(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ws,this.ca=this.fa=!1}function Is(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Ts(t){this.src=t,this.g={},this.h=0}function Es(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Mo(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Is(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Ss(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Ts.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=Ss(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new _s(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var As="closure_lm_"+(1e6*Math.random()|0),ks={};function Ns(t,e,n,r,i){if(r&&r.once)return Rs(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Ns(t,e[o],n,r,i);return null}return n=Fs(n),t&&t[bs]?t.N(e,n,Ao(r)?!!r.capture:!!r,i):Cs(t,e,n,!1,r,i)}function Cs(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ao(i)?!!i.capture:!!i,a=Ls(t);if(a||(t[As]=a=new Ts(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Ps;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)vs||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(xs(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Rs(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Rs(t,e[o],n,r,i);return null}return n=Fs(n),t&&t[bs]?t.O(e,n,Ao(r)?!!r.capture:!!r,i):Cs(t,e,n,!0,r,i)}function Ds(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ds(t,e[o],n,r,i);else r=Ao(r)?!!r.capture:!!r,n=Fs(n),t&&t[bs]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Ss(o=t.g[e],n,r,i))&&(Is(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Ls(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Ss(e,n,r,i)),(n=-1<t?e[t]:null)&&Os(n))}function Os(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[bs])Es(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(xs(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ls(e))?(Es(n,t),0==n.h&&(n.src=null,e[As]=null)):Is(t)}}}function xs(t){return t in ks?ks[t]:ks[t]="on"+t}function Ps(t,e){if(t.ca)t=!0;else{e=new ms(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Os(t),t=n.call(r,e)}return t}function Ls(t){return(t=t[As])instanceof Ts?t:null}var Ms="__closure_events_fn_"+(1e9*Math.random()>>>0);function Fs(t){return"function"==typeof t?t:(t[Ms]||(t[Ms]=function(e){return t.handleEvent(e)}),t[Ms])}function Us(){Po.call(this),this.i=new Ts(this),this.P=this,this.I=null}function Vs(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new gs(e,t);else if(e instanceof gs)e.target=e.target||t;else{var i=e;$o(e=new gs(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=js(s,r,!0,e)&&i}if(i=js(s=e.g=t,r,!0,e)&&i,i=js(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=js(s=e.g=n[o],r,!1,e)&&i}function js(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&Es(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}xo(Us,Po),Us.prototype[bs]=!0,Us.prototype.removeEventListener=function(t,e,n,r){Ds(this,t,e,n,r)},Us.prototype.M=function(){if(Us.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)Is(n[r]);delete e.g[t],e.h--}}this.I=null},Us.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},Us.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var qs=To.JSON.stringify;function Bs(){var t=$s,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ks,Gs=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=Hs.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),Hs=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new zs}),(function(t){return t.reset()})),zs=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Ws(t){To.setTimeout((function(){throw t}),0)}function Qs(t,e){Ks||function(){var t=To.Promise.resolve(void 0);Ks=function(){t.then(Ys)}}(),Xs||(Ks(),Xs=!0),$s.add(t,e)}var Xs=!1,$s=new Gs;function Ys(){for(var t;t=Bs();){try{t.h.call(t.g)}catch(n){Ws(n)}var e=Hs;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xs=!1}function Js(t,e){Us.call(this),this.h=t||1,this.g=e||To,this.j=Do(this.kb,this),this.l=Date.now()}function Zs(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function ta(t,e,n){if("function"==typeof t)n&&(t=Do(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Do(t.handleEvent,t)}return 2147483647<Number(e)?-1:To.setTimeout(t,e||0)}function ea(t){t.g=ta((function(){t.g=null,t.i&&(t.i=!1,ea(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}xo(Js,Us),(wo=Js.prototype).da=!1,wo.S=null,wo.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Vs(this,"tick"),this.da&&(Zs(this),this.start()))}},wo.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wo.M=function(){Js.Z.M.call(this),Zs(this),delete this.g};var na=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ea(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(To.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Po);function ra(t){Po.call(this),this.h=t,this.g={}}xo(ra,Po);var ia=[];function oa(t,e,n,r){Array.isArray(n)||(n&&(ia[0]=n.toString()),n=ia);for(var i=0;i<n.length;i++){var o=Ns(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function sa(t){Wo(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Os(t)}),t),t.g={}}function aa(){this.g=!0}function ua(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return qs(n)}catch(a){return e}}(t,n)+(r?" "+r:"")}))}ra.prototype.M=function(){ra.Z.M.call(this),sa(this)},ra.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},aa.prototype.Aa=function(){this.g=!1},aa.prototype.info=function(){};var ca={},la=null;function ha(){return la=la||new Us}function fa(t){gs.call(this,ca.Ma,t)}function pa(t){var e=ha();Vs(e,new fa(e,t))}function da(t,e){gs.call(this,ca.STAT_EVENT,t),this.stat=e}function va(t){var e=ha();Vs(e,new da(e,t))}function ga(t,e){gs.call(this,ca.Na,t),this.size=e}function ma(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return To.setTimeout((function(){t()}),e)}ca.Ma="serverreachability",xo(fa,gs),ca.STAT_EVENT="statevent",xo(da,gs),ca.Na="timingevent",xo(ga,gs);var ya={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ba={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function wa(){}function _a(t){return t.h||(t.h=t.i())}function Ia(){}wa.prototype.h=null;var Ta,Ea={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sa(){gs.call(this,"d")}function Aa(){gs.call(this,"c")}function ka(){}function Na(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new ra(this),this.P=Ra,t=rs?125:void 0,this.W=new Js(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Ca}function Ca(){this.i=null,this.g="",this.h=!1}xo(Sa,gs),xo(Aa,gs),xo(ka,wa),ka.prototype.g=function(){return new XMLHttpRequest},ka.prototype.i=function(){return{}},Ta=new ka;var Ra=45e3,Da={},Oa={};function xa(t,e,n){t.K=1,t.v=nu($a(e)),t.s=n,t.U=!0,Pa(t,null)}function Pa(t,e){t.F=Date.now(),Ua(t),t.A=$a(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),vu(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Ca,t.g=gc(t.l,n?e:null,!t.s),0<t.O&&(t.L=new na(Do(t.Ia,t,t.g),t.O)),oa(t.V,t.g,"readystatechange",t.gb),e=t.H?Qo(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),pa(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function La(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Ma(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Fa(t,n))==Oa){4==e&&(t.o=4,va(14),i=!1),ua(t.j,t.m,null,"[Incomplete Response]");break}if(r==Da){t.o=4,va(15),ua(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}ua(t.j,t.m,r,null),Ka(t,r)}La(t)&&r!=Oa&&r!=Da&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,va(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),uc(e),e.L=!0,va(11))):(ua(t.j,t.m,n,"[Invalid Chunked Response]"),Ba(t),qa(t))}function Fa(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Oa:(n=Number(e.substring(n,r)),isNaN(n)?Da:(r+=1)+n>e.length?Oa:(e=e.substr(r,n),t.C=r+n,e))}function Ua(t){t.Y=Date.now()+t.P,Va(t,t.P)}function Va(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=ma(Do(t.eb,t),e)}function ja(t){t.B&&(To.clearTimeout(t.B),t.B=null)}function qa(t){0==t.l.G||t.I||hc(t.l,t)}function Ba(t){ja(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Zs(t.W),sa(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ka(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||Iu(n.i,t)))if(n.I=t.N,!t.J&&Iu(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(g){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;lc(n),Zu(n)}ac(n),va(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=ma(Do(n.ab,n),6e3));if(1>=_u(n.i)&&n.ka){try{n.ka()}catch(g){}n.ka=void 0}}else pc(n,11)}else if((t.J||n.g==t)&&lc(n),!jo(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(Ko(l,"spdy")||Ko(l,"quic")||Ko(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Tu(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,eu(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=vc(r,r.H?r.la:null,r.W),p.J){Eu(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(ja(d),Ua(d)),r.g=p}else sc(r);0<n.l.length&&nc(n)}else"stop"!=o[0]&&"close"!=o[0]||pc(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?pc(n,7):Ju(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}pa(4)}catch(g){}}function Ga(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(So(t)||"string"==typeof t)Fo(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(So(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(So(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ha(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ha)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function za(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Wa(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Wa(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Wa(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(wo=Na.prototype).setTimeout=function(t){this.P=t},wo.gb=function(t){t=t.target;var e=this.L;e&&3==Wu(t)?e.l():this.Ia(t)},wo.Ia=function(t){try{if(t==this.g)t:{var e=Wu(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||rs||this.g&&(this.h.h||this.g.ga()||Qu(this.g)))){this.I||4!=e||7==n||pa(8==n||0>=r?3:2),ja(this);var i=this.g.ba();this.N=i;e:if(La(this)){var o=Qu(this.g);t="";var s=o.length,a=4==Wu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Ba(this),qa(this);var u="";break e}this.h.i=new To.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jo(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,va(12),Ba(this),qa(this);break t}ua(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ka(this,i)}this.U?(Ma(this,e,u),rs&&this.i&&3==e&&(oa(this.V,this.W,"tick",this.fb),this.W.start())):(ua(this.j,this.m,u,null),Ka(this,u)),4==e&&Ba(this),this.i&&!this.I&&(4==e?hc(this.l,this):(this.i=!1,Ua(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,va(12)):(this.o=0,va(13)),Ba(this),qa(this)}}}catch(f){}},wo.fb=function(){if(this.g){var t=Wu(this.g),e=this.g.ga();this.C<e.length&&(ja(this),Ma(this,t,e),this.i&&4!=t&&Ua(this))}},wo.cancel=function(){this.I=!0,Ba(this)},wo.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(pa(3),va(17)),Ba(this),this.o=2,qa(this)):Va(this,this.Y-t)},(wo=Ha.prototype).R=function(){za(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},wo.T=function(){return za(this),this.g.concat()},wo.get=function(t,e){return Wa(this.h,t)?this.h[t]:e},wo.set=function(t,e){Wa(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},wo.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qa=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Xa(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof Xa){this.g=void 0!==e?e:t.g,Ya(this,t.j),this.s=t.s,Ja(this,t.i),Za(this,t.m),this.l=t.l,e=t.h;var n=new hu;n.i=e.i,e.g&&(n.g=new Ha(e.g),n.h=e.h),tu(this,n),this.o=t.o}else t&&(n=String(t).match(Qa))?(this.g=!!e,Ya(this,n[1]||"",!0),this.s=ru(n[2]||""),Ja(this,n[3]||"",!0),Za(this,n[4]),this.l=ru(n[5]||"",!0),tu(this,n[6]||"",!0),this.o=ru(n[7]||"")):(this.g=!!e,this.h=new hu(null,this.g))}function $a(t){return new Xa(t)}function Ya(t,e,n){t.j=n?ru(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ja(t,e,n){t.i=n?ru(e,!0):e}function Za(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function tu(t,e,n){e instanceof hu?(t.h=e,function(t,e){e&&!t.j&&(fu(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(pu(this,e),vu(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=iu(e,cu)),t.h=new hu(e,t.g))}function eu(t,e,n){t.h.set(e,n)}function nu(t){return eu(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function ru(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function iu(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,ou),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ou(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Xa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(iu(e,su,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(iu(e,su,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(iu(n,"/"==n.charAt(0)?uu:au,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",iu(n,lu)),t.join("")};var su=/[#\/\?@]/g,au=/[#\?:]/g,uu=/[#\?]/g,cu=/[#\?@]/g,lu=/#/g;function hu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function fu(t){t.g||(t.g=new Ha,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function pu(t,e){fu(t),e=gu(t,e),Wa(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Wa((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&za(t)))}function du(t,e){return fu(t),e=gu(t,e),Wa(t.g.h,e)}function vu(t,e,n){pu(t,e),0<n.length&&(t.i=null,t.g.set(gu(t,e),Vo(n)),t.h+=n.length)}function gu(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(wo=hu.prototype).add=function(t,e){fu(this),this.i=null,t=gu(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},wo.forEach=function(t,e){fu(this),this.g.forEach((function(n,r){Fo(n,(function(n){t.call(e,n,r,this)}),this)}),this)},wo.T=function(){fu(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},wo.R=function(t){fu(this);var e=[];if("string"==typeof t)du(this,t)&&(e=Uo(e,this.g.get(gu(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=Uo(e,t[n])}return e},wo.set=function(t,e){return fu(this),this.i=null,du(this,t=gu(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},wo.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},wo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var mu=function(t,e){this.h=t,this.g=e};function yu(t){this.l=t||bu,To.PerformanceNavigationTiming?t=0<(t=To.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(To.g&&To.g.Ea&&To.g.Ea()&&To.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bu=10;function wu(t){return!!t.h||!!t.g&&t.g.size>=t.j}function _u(t){return t.h?1:t.g?t.g.size:0}function Iu(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Tu(t,e){t.g?t.g.add(e):t.h=e}function Eu(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Su(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=bo(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Vo(t.i)}function Au(){}function ku(){this.g=new Au}function Nu(t,e,n){var r=n||"";try{Ga(t,(function(t,n){var i=t;Ao(t)&&(i=qs(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(Rb){throw e.push(r+"type="+encodeURIComponent("_badmap")),Rb}}function Cu(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Ru(t){this.l=t.$b||null,this.j=t.ib||!1}function Du(t,e){Us.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Ou,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}yu.prototype.cancel=function(){var t,e;if(this.i=Su(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=bo(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Au.prototype.stringify=function(t){return To.JSON.stringify(t,void 0)},Au.prototype.parse=function(t){return To.JSON.parse(t,void 0)},xo(Ru,wa),Ru.prototype.g=function(){return new Du(this.l,this.j)},Ru.prototype.i=function(t){return function(){return t}}({}),xo(Du,Us);var Ou=0;function xu(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Pu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Lu(t)}function Lu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(wo=Du.prototype).open=function(t,e){if(this.readyState!=Ou)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Lu(this)},wo.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||To).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},wo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Pu(this)),this.readyState=Ou},wo.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Lu(this)),this.g&&(this.readyState=3,Lu(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==To.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xu(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},wo.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Pu(this):Lu(this),3==this.readyState&&xu(this)}},wo.Ua=function(t){this.g&&(this.response=this.responseText=t,Pu(this))},wo.Ta=function(t){this.g&&(this.response=t,Pu(this))},wo.ha=function(){this.g&&Pu(this)},wo.setRequestHeader=function(t,e){this.v.append(t,e)},wo.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},wo.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Du.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Mu=To.JSON.parse;function Fu(t){Us.call(this),this.headers=new Ha,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Uu,this.K=this.L=!1}xo(Fu,Us);var Uu="",Vu=/^https?$/i,ju=["POST","PUT"];function qu(t){return"content-type"==t.toLowerCase()}function Bu(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Ku(t),Hu(t)}function Ku(t){t.D||(t.D=!0,Vs(t,"complete"),Vs(t,"error"))}function Gu(t){if(t.h&&void 0!==Io&&(!t.C[1]||4!=Wu(t)||2!=t.ba()))if(t.v&&4==Wu(t))ta(t.Fa,0,t);else if(Vs(t,"readystatechange"),4==Wu(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Qa)[1]||null;if(!o&&To.self&&To.self.location){var s=To.self.location.protocol;o=s.substr(0,s.length-1)}i=!Vu.test(o?o.toLowerCase():"")}e=i}if(e)Vs(t,"complete"),Vs(t,"success");else{t.m=6;try{var a=2<Wu(t)?t.g.statusText:""}catch(u){a=""}t.j=a+" ["+t.ba()+"]",Ku(t)}}finally{Hu(t)}}}function Hu(t,e){if(t.g){zu(t);var n=t.g,r=t.C[0]?Eo:null;t.g=null,t.C=null,e||Vs(t,"ready");try{n.onreadystatechange=r}catch(Rb){}}}function zu(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(To.clearTimeout(t.A),t.A=null)}function Wu(t){return t.g?t.g.readyState:0}function Qu(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case Uu:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Xu(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Wo(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):eu(t,e,n))}function $u(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Yu(t){this.za=0,this.l=[],this.h=new aa,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=$u("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=$u("baseRetryDelayMs",5e3,t),this.$a=$u("retryDelaySeedMs",1e4,t),this.Ya=$u("forwardChannelMaxRetries",2,t),this.ra=$u("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new yu(t&&t.concurrentRequestLimit),this.Ca=new ku,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Ju(t){if(tc(t),3==t.G){var e=t.V++,n=$a(t.F);eu(n,"SID",t.J),eu(n,"RID",e),eu(n,"TYPE","terminate"),ic(t,n),(e=new Na(t,t.h,e,void 0)).K=2,e.v=nu($a(n)),n=!1,To.navigator&&To.navigator.sendBeacon&&(n=To.navigator.sendBeacon(e.v.toString(),"")),!n&&To.Image&&((new Image).src=e.v,n=!0),n||(e.g=gc(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ua(e)}dc(t)}function Zu(t){t.g&&(uc(t),t.g.cancel(),t.g=null)}function tc(t){Zu(t),t.u&&(To.clearTimeout(t.u),t.u=null),lc(t),t.i.cancel(),t.m&&("number"==typeof t.m&&To.clearTimeout(t.m),t.m=null)}function ec(t,e){t.l.push(new mu(t.Za++,e)),3==t.G&&nc(t)}function nc(t){wu(t.i)||t.m||(t.m=!0,Qs(t.Ha,t),t.C=0)}function rc(t,e){var n;n=e?e.m:t.V++;var r=$a(t.F);eu(r,"SID",t.J),eu(r,"RID",n),eu(r,"AID",t.U),ic(t,r),t.o&&t.s&&Xu(r,t.o,t.s),n=new Na(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=oc(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Tu(t.i,n),xa(n,r,e)}function ic(t,e){t.j&&Ga({},(function(t,n){eu(e,n,t)}))}function oc(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Do(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{Nu(l,s,"req"+c+"_")}catch(h){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function sc(t){t.g||t.u||(t.Y=1,Qs(t.Ga,t),t.A=0)}function ac(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=ma(Do(t.Ga,t),fc(t,t.A)),t.A++,!0)}function uc(t){null!=t.B&&(To.clearTimeout(t.B),t.B=null)}function cc(t){t.g=new Na(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=$a(t.oa);eu(e,"RID","rpc"),eu(e,"SID",t.J),eu(e,"CI",t.N?"0":"1"),eu(e,"AID",t.U),ic(t,e),eu(e,"TYPE","xmlhttp"),t.o&&t.s&&Xu(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=nu($a(e)),n.s=null,n.U=!0,Pa(n,t)}function lc(t){null!=t.v&&(To.clearTimeout(t.v),t.v=null)}function hc(t,e){var n=null;if(t.g==e){lc(t),uc(t),t.g=null;var r=2}else{if(!Iu(t.i,e))return;n=e.D,Eu(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;Vs(r=ha(),new ga(r,n,e,i)),nc(t)}else sc(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(_u(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=ma(Do(t.Ha,t,e),fc(t,t.C)),t.C++,0)))}(t,e)||2==r&&ac(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:pc(t,5);break;case 4:pc(t,10);break;case 3:pc(t,6);break;default:pc(t,2)}}function fc(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function pc(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Do(t.jb,t);n||(n=new Xa("//www.google.com/images/cleardot.gif"),To.location&&"http"==To.location.protocol||Ya(n,"https"),nu(n)),function(t,e){var n=new aa;if(To.Image){var r=new Image;r.onload=Oo(Cu,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Oo(Cu,n,r,"TestLoadImage: error",!1,e),r.onabort=Oo(Cu,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Oo(Cu,n,r,"TestLoadImage: timeout",!1,e),To.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else va(2);t.G=0,t.j&&t.j.va(e),dc(t),tc(t)}function dc(t){t.G=0,t.I=-1,t.j&&(0==Su(t.i).length&&0==t.l.length||(t.i.i.length=0,Vo(t.l),t.l.length=0),t.j.ua())}function vc(t,e,n){var r=function(t){return t instanceof Xa?$a(t):new Xa(t,void 0)}(n);if(""!=r.i)e&&Ja(r,e+"."+r.i),Za(r,r.m);else{var i=To.location;r=function(t,e,n,r){var i=new Xa(null,void 0);return t&&Ya(i,t),e&&Ja(i,e),n&&Za(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&Wo(t.aa,(function(t,e){eu(r,e,t)})),e=t.D,n=t.sa,e&&n&&eu(r,e,n),eu(r,"VER",t.ma),ic(t,r),r}function gc(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Fu(new Ru({ib:!0})):new Fu(t.qa)).L=t.H,e}function mc(){}function yc(){if(es&&!(10<=Number(ds)))throw Error("Environmental error: no available transport.")}function bc(t,e){Us.call(this),this.g=new Yu(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!jo(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!jo(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Ic(this)}function wc(t){Sa.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function _c(){Aa.call(this),this.status=1}function Ic(t){this.g=t}(wo=Fu.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ta.g(),this.C=this.u?_a(this.u):_a(Ta),this.g.onreadystatechange=Do(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(o){return void Bu(this,o)}t=n||"";var i=new Ha(this.headers);r&&Ga(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=qu,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=To.FormData&&t instanceof To.FormData,!(0<=Mo(ju,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{zu(this),0<this.B&&((this.K=function(t){return es&&fs()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Do(this.pa,this)):this.A=ta(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){Bu(this,o)}},wo.pa=function(){void 0!==Io&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Vs(this,"timeout"),this.abort(8))},wo.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Vs(this,"complete"),Vs(this,"abort"),Hu(this))},wo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hu(this,!0)),Fu.Z.M.call(this)},wo.Fa=function(){this.s||(this.F||this.v||this.l?Gu(this):this.cb())},wo.cb=function(){Gu(this)},wo.ba=function(){try{return 2<Wu(this)?this.g.status:-1}catch(Zo){return-1}},wo.ga=function(){try{return this.g?this.g.responseText:""}catch(Zo){return""}},wo.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Mu(e)}},wo.Da=function(){return this.m},wo.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(wo=Yu.prototype).ma=8,wo.G=1,wo.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(e){}},wo.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Na(this,this.h,t,void 0),n=this.s;if(this.P&&(n?$o(n=Qo(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=oc(this,e,r),eu(i=$a(this.F),"RID",t),eu(i,"CVER",22),this.D&&eu(i,"X-HTTP-Session-Id",this.D),ic(this,i),this.o&&n&&Xu(i,this.o,n),Tu(this.i,e),this.Ra&&eu(i,"TYPE","init"),this.ja?(eu(i,"$req",r),eu(i,"SID","null"),e.$=!0,xa(e,i,null)):xa(e,i,r),this.G=2}}else 3==this.G&&(t?rc(this,t):0==this.l.length||wu(this.i)||rc(this))},wo.Ga=function(){if(this.u=null,cc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=ma(Do(this.bb,this),t)}},wo.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,va(10),Zu(this),cc(this))},wo.ab=function(){null!=this.v&&(this.v=null,Zu(this),ac(this),va(19))},wo.jb=function(t){t?(this.h.info("Successfully pinged google.com"),va(2)):(this.h.info("Failed to ping google.com"),va(1))},(wo=mc.prototype).xa=function(){},wo.wa=function(){},wo.va=function(){},wo.ua=function(){},wo.Oa=function(){},yc.prototype.g=function(t,e){return new bc(t,e)},xo(bc,Us),bc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Qs(Do(t.hb,t,e))),va(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=vc(t,null,t.W),nc(t)},bc.prototype.close=function(){Ju(this.g)},bc.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,ec(this.g,e)}else this.v?((e={}).__data__=qs(t),ec(this.g,e)):ec(this.g,t)},bc.prototype.M=function(){this.g.j=null,delete this.j,Ju(this.g),delete this.g,bc.Z.M.call(this)},xo(wc,Sa),xo(_c,Aa),xo(Ic,mc),Ic.prototype.xa=function(){Vs(this.g,"a")},Ic.prototype.wa=function(t){Vs(this.g,new wc(t))},Ic.prototype.va=function(t){Vs(this.g,new _c(t))},Ic.prototype.ua=function(){Vs(this.g,"b")},yc.prototype.createWebChannel=yc.prototype.g,bc.prototype.send=bc.prototype.u,bc.prototype.open=bc.prototype.m,bc.prototype.close=bc.prototype.close,ya.NO_ERROR=0,ya.TIMEOUT=8,ya.HTTP_ERROR=6,ba.COMPLETE="complete",Ia.EventType=Ea,Ea.OPEN="a",Ea.CLOSE="b",Ea.ERROR="c",Ea.MESSAGE="d",Us.prototype.listen=Us.prototype.N,Fu.prototype.listenOnce=Fu.prototype.O,Fu.prototype.getLastError=Fu.prototype.La,Fu.prototype.getLastErrorCode=Fu.prototype.Da,Fu.prototype.getStatus=Fu.prototype.ba,Fu.prototype.getResponseJson=Fu.prototype.Qa,Fu.prototype.getResponseText=Fu.prototype.ga,Fu.prototype.send=Fu.prototype.ea;var Tc=ya,Ec=ba,Sc=ca,Ac=10,kc=11,Nc=Ru,Cc=Ia,Rc=Fu,Dc=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Dc.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Oc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},xc=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return _i(e,t),e}(Error),Pc=new eo("@firebase/firestore");function Lc(){return Pc.logLevel}function Mc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pc.logLevel<=Wi.DEBUG){var r=e.map(Vc);Pc.debug.apply(Pc,ki(["Firestore (8.7.0): "+t],r))}}function Fc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pc.logLevel<=Wi.ERROR){var r=e.map(Vc);Pc.error.apply(Pc,ki(["Firestore (8.7.0): "+t],r))}}function Uc(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Pc.logLevel<=Wi.WARN){var r=e.map(Vc);Pc.warn.apply(Pc,ki(["Firestore (8.7.0): "+t],r))}}function Vc(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(n){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw Fc(e),new Error(e)}function qc(t,e){t||jc()}function Bc(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gc=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Kc(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Hc(t,e){return t<e?-1:t>e?1:0}function zc(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Wc(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new xc(Oc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new xc(Oc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new xc(Oc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new xc(Oc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Hc(this.nanoseconds,t.nanoseconds):Hc(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Xc=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new Qc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Yc(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Jc(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zc=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&jc(),void 0===n?n=t.length-e:n>t.length-e&&jc(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),tl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new xc(Oc.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Zc),el=/^[_a-zA-Z][_a-zA-Z0-9]*$/,nl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return el.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new xc(Oc.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new xc(Oc.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new xc(Oc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new xc(Oc.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Zc),rl=function(){function t(t){this.fields=t,t.sort(nl.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return zc(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),il=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Hc(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();il.EMPTY_BYTE_STRING=new il("");var ol=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sl(t){if(qc(!!t),"string"==typeof t){var e=0,n=ol.exec(t);if(qc(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:al(t.seconds),nanos:al(t.nanos)}}function al(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function ul(t){return"string"==typeof t?il.fromBase64String(t):il.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cl(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ll(t){var e=t.mapValue.fields.__previous_value__;return cl(e)?ll(e):e}function hl(t){var e=sl(t.mapValue.fields.__local_write_time__.timestampValue);return new Qc(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){return null==t}function pl(t){return 0===t&&1/t==-1/0}function dl(t){return"number"==typeof t&&Number.isInteger(t)&&!pl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vl=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(tl.fromString(e))},t.fromName=function(e){return new t(tl.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===tl.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return tl.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new tl(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?cl(t)?4:10:jc()}function ml(t,e){var n,r=gl(t);if(r!==gl(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return hl(t).isEqual(hl(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=sl(t.timestampValue),r=sl(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,ul(t.bytesValue).isEqual(ul(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return al(t.geoPointValue.latitude)===al(e.geoPointValue.latitude)&&al(t.geoPointValue.longitude)===al(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return al(t.integerValue)===al(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=al(t.doubleValue),r=al(e.doubleValue);return n===r?pl(n)===pl(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return zc(t.arrayValue.values||[],e.arrayValue.values||[],ml);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if($c(n)!==$c(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!ml(n[i],r[i])))return!1;return!0}(t,e);default:return jc()}}function yl(t,e){return void 0!==(t.values||[]).find((function(t){return ml(t,e)}))}function bl(t,e){var n,r,i,o,s=gl(t),a=gl(e);if(s!==a)return Hc(s,a);switch(s){case 0:return 0;case 1:return Hc(t.booleanValue,e.booleanValue);case 2:return r=e,i=al((n=t).integerValue||n.doubleValue),o=al(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return wl(t.timestampValue,e.timestampValue);case 4:return wl(hl(t),hl(e));case 5:return Hc(t.stringValue,e.stringValue);case 6:return function(t,e){var n=ul(t),r=ul(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Hc(n[i],r[i]);if(0!==o)return o}return Hc(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Hc(al(t.latitude),al(e.latitude));return 0!==n?n:Hc(al(t.longitude),al(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=bl(n[i],r[i]);if(o)return o}return Hc(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Hc(r[s],o[s]);if(0!==a)return a;var u=bl(n[r[s]],i[o[s]]);if(0!==u)return u}return Hc(r.length,o.length)}(t.mapValue,e.mapValue);default:throw jc()}}function wl(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Hc(t,e);var n=sl(t),r=sl(e),i=Hc(n.seconds,r.seconds);return 0!==i?i:Hc(n.nanos,r.nanos)}function _l(t){return Il(t)}function Il(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(e=t.timestampValue,"time("+(n=sl(e)).seconds+","+n.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?ul(t.bytesValue).toBase64():"referenceValue"in t?(i=t.referenceValue,vl.fromName(i).toString()):"geoPointValue"in t?"geo("+(r=t.geoPointValue).latitude+","+r.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Il(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Il(t.fields[o])}return e+"}"}(t.mapValue):jc();var e,n,r,i}function Tl(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function El(t){return!!t&&"integerValue"in t}function Sl(t){return!!t&&"arrayValue"in t}function Al(t){return!!t&&"nullValue"in t}function kl(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Nl(t){return!!t&&"mapValue"in t}function Cl(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},sl(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return Yc(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Cl(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Cl(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rl=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!Nl(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Cl(e)},t.prototype.setAll=function(t){var e=this,n=nl.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Cl(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());Nl(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return ml(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];Nl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){Yc(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Cl(this.value))},t}();function Dl(t){var e=[];return Yc(t.fields,(function(t,n){var r=new nl([t]);if(Nl(n)){var i=Dl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new rl(e)}var Ol=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Xc.min(),Rl.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Rl.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Rl.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Rl.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Rl.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),xl=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pl(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new xl(t,e,n,r,i,o,s)}function Ll(t){var e=Bc(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+_l(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),fl(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Ql(e.startAt)),e.endAt&&(n+="|ub:",n+=Ql(e.endAt)),e.h=n}return e.h}function Ml(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!$l(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!ml(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Jl(t.startAt,e.startAt)&&Jl(t.endAt,e.endAt)}function Fl(t){return vl.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ul=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return _i(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Vl(t,n,r):"array-contains"===n?new Kl(t,r):"in"===n?new Gl(t,r):"not-in"===n?new Hl(t,r):"array-contains-any"===n?new zl(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new jl(t,n):new ql(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(bl(e,this.value)):null!==e&&gl(this.value)===gl(e)&&this.m(bl(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return jc()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Vl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=vl.fromName(r.referenceValue),i}return _i(e,t),e.prototype.matches=function(t){var e=vl.comparator(t.key,this.key);return this.m(e)},e}(Ul),jl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Bl("in",n),r}return _i(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ul),ql=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Bl("not-in",n),r}return _i(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(Ul);function Bl(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return vl.fromName(t.referenceValue)}))}var Kl=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return _i(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Sl(e)&&yl(e.arrayValue,this.value)},e}(Ul),Gl=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return _i(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&yl(this.value.arrayValue,e)},e}(Ul),Hl=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return _i(e,t),e.prototype.matches=function(t){if(yl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!yl(this.value.arrayValue,e)},e}(Ul),zl=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return _i(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Sl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return yl(e.value.arrayValue,t)}))},e}(Ul),Wl=function(t,e){this.position=t,this.before=e};function Ql(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return _l(t)})).join(",")}var Xl=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function $l(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Yl(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?vl.comparator(vl.fromName(s.referenceValue),n.key):bl(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Jl(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!ml(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zl=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function th(t,e,n,r,i,o,s,a){return new Zl(t,e,n,r,i,o,s,a)}function eh(t){return new Zl(t)}function nh(t){return!fl(t.limit)&&"F"===t.limitType}function rh(t){return!fl(t.limit)&&"L"===t.limitType}function ih(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function oh(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function sh(t){return null!==t.collectionGroup}function ah(t){var e=Bc(t);if(null===e.p){e.p=[];var n=oh(e),r=ih(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Xl(n)),e.p.push(new Xl(nl.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Xl(nl.keyField(),u))}}}return e.p}function uh(t){var e=Bc(t);if(!e.T)if("F"===e.limitType)e.T=Pl(e.path,e.collectionGroup,ah(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=ah(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Xl(o.field,s))}var a=e.endAt?new Wl(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Wl(e.startAt.position,!e.startAt.before):null;e.T=Pl(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function ch(t,e,n){return new Zl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function lh(t,e){return Ml(uh(t),uh(e))&&t.limitType===e.limitType}function hh(t){return Ll(uh(t))+"|lt:"+t.limitType}function fh(t){return"Query(target="+(e=uh(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+_l(e.value);var e})).join(", ")+"]"),fl(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+Ql(e.startAt)),e.endAt&&(n+=", endAt: "+Ql(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function ph(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):vl.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Yl(t.startAt,ah(t),e)||t.endAt&&Yl(t.endAt,ah(t),e))}(t,e);var n,r,i}function dh(t){return function(e,n){for(var r=!1,i=0,o=ah(t);i<o.length;i++){var s=o[i],a=vh(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function vh(t,e,n){var r,i,o,s,a=t.field.isKeyField()?vl.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),s=i.data.field(r),null!==o&&null!==s?bl(o,s):jc());switch(t.dir){case"asc":return a;case"desc":return-1*a;default:return jc()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pl(e)?"-0":e}}function mh(t){return{integerValue:""+t}}function yh(t,e){return dl(e)?mh(e):gh(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bh=function(){this._=void 0};function wh(t,e,n){return t instanceof Th?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Eh?Sh(t,e):t instanceof Ah?kh(t,e):function(t,e){var n=Ih(t,e),r=Ch(n)+Ch(t.A);return El(n)&&El(t.A)?mh(r):gh(t.R,r)}(t,e);var r,i,o}function _h(t,e,n){return t instanceof Eh?Sh(t,e):t instanceof Ah?kh(t,e):n}function Ih(t,e){return t instanceof Nh?El(r=e)||(n=r)&&"doubleValue"in n?e:{integerValue:0}:null;var n,r}var Th=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e}(bh),Eh=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return _i(e,t),e}(bh);function Sh(t,e){for(var n=Rh(e),r=function(t){n.some((function(e){return ml(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ah=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return _i(e,t),e}(bh);function kh(t,e){for(var n=Rh(e),r=function(t){n=n.filter((function(e){return!ml(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Nh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return _i(e,t),e}(bh);function Ch(t){return al(t.integerValue||t.doubleValue)}function Rh(t){return Sl(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dh=function(t,e){this.field=t,this.transform=e},Oh=function(t,e){this.version=t,this.transformResults=e},xh=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Ph(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Lh=function(){};function Mh(t,e,n){var r,i,o,s,a;t instanceof qh?(i=e,o=n,s=(r=t).value.clone(),a=Gh(r.fieldTransforms,i,o.transformResults),s.setAll(a),i.convertToFoundDocument(o.version,s).setHasCommittedMutations()):t instanceof Bh?function(t,e,n){if(Ph(t.precondition,e)){var r=Gh(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(Kh(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function Fh(t,e,n){var r;t instanceof qh?function(t,e,n){if(Ph(t.precondition,e)){var r=t.value.clone(),i=Hh(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(jh(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Bh?function(t,e,n){if(Ph(t.precondition,e)){var r=Hh(t.fieldTransforms,n,e),i=e.data;i.setAll(Kh(t)),i.setAll(r),e.convertToFoundDocument(jh(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Ph(t.precondition,r)&&r.convertToNoDocument(Xc.min()))}function Uh(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=Ih(o.transform,s||null);null!=a&&(null==n&&(n=Rl.empty()),n.set(o.field,a))}return n||null}function Vh(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&zc(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Eh&&o instanceof Eh||i instanceof Ah&&o instanceof Ah?zc(i.elements,o.elements,ml):i instanceof Nh&&o instanceof Nh?ml(i.A,o.A):i instanceof Th&&o instanceof Th);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function jh(t){return t.isFoundDocument()?t.version:Xc.min()}var qh=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return _i(e,t),e}(Lh),Bh=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return _i(e,t),e}(Lh);function Kh(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Gh(t,e,n){var r=new Map;qc(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,_h(s,a,n[i]))}return r}function Hh(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,wh(a,u,e))}return r}var zh,Wh,Qh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return _i(e,t),e}(Lh),Xh=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return _i(e,t),e}(Lh),$h=function(t){this.count=t};function Yh(t){switch(t){case Oc.OK:return jc();case Oc.CANCELLED:case Oc.UNKNOWN:case Oc.DEADLINE_EXCEEDED:case Oc.RESOURCE_EXHAUSTED:case Oc.INTERNAL:case Oc.UNAVAILABLE:case Oc.UNAUTHENTICATED:return!1;case Oc.INVALID_ARGUMENT:case Oc.NOT_FOUND:case Oc.ALREADY_EXISTS:case Oc.PERMISSION_DENIED:case Oc.FAILED_PRECONDITION:case Oc.ABORTED:case Oc.OUT_OF_RANGE:case Oc.UNIMPLEMENTED:case Oc.DATA_LOSS:return!0;default:return jc()}}function Jh(t){if(void 0===t)return Fc("GRPC error has no .code"),Oc.UNKNOWN;switch(t){case zh.OK:return Oc.OK;case zh.CANCELLED:return Oc.CANCELLED;case zh.UNKNOWN:return Oc.UNKNOWN;case zh.DEADLINE_EXCEEDED:return Oc.DEADLINE_EXCEEDED;case zh.RESOURCE_EXHAUSTED:return Oc.RESOURCE_EXHAUSTED;case zh.INTERNAL:return Oc.INTERNAL;case zh.UNAVAILABLE:return Oc.UNAVAILABLE;case zh.UNAUTHENTICATED:return Oc.UNAUTHENTICATED;case zh.INVALID_ARGUMENT:return Oc.INVALID_ARGUMENT;case zh.NOT_FOUND:return Oc.NOT_FOUND;case zh.ALREADY_EXISTS:return Oc.ALREADY_EXISTS;case zh.PERMISSION_DENIED:return Oc.PERMISSION_DENIED;case zh.FAILED_PRECONDITION:return Oc.FAILED_PRECONDITION;case zh.ABORTED:return Oc.ABORTED;case zh.OUT_OF_RANGE:return Oc.OUT_OF_RANGE;case zh.UNIMPLEMENTED:return Oc.UNIMPLEMENTED;case zh.DATA_LOSS:return Oc.DATA_LOSS;default:return jc()}}(Wh=zh||(zh={}))[Wh.OK=0]="OK",Wh[Wh.CANCELLED=1]="CANCELLED",Wh[Wh.UNKNOWN=2]="UNKNOWN",Wh[Wh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Wh[Wh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Wh[Wh.NOT_FOUND=5]="NOT_FOUND",Wh[Wh.ALREADY_EXISTS=6]="ALREADY_EXISTS",Wh[Wh.PERMISSION_DENIED=7]="PERMISSION_DENIED",Wh[Wh.UNAUTHENTICATED=16]="UNAUTHENTICATED",Wh[Wh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Wh[Wh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Wh[Wh.ABORTED=10]="ABORTED",Wh[Wh.OUT_OF_RANGE=11]="OUT_OF_RANGE",Wh[Wh.UNIMPLEMENTED=12]="UNIMPLEMENTED",Wh[Wh.INTERNAL=13]="INTERNAL",Wh[Wh.UNAVAILABLE=14]="UNAVAILABLE",Wh[Wh.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Zh=function(){function t(t,e){this.comparator=t,this.root=e||ef.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ef.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ef.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new tf(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new tf(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new tf(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new tf(this.root,t,this.comparator,!0)},t}(),tf=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ef=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw jc();if(this.right.isRed())throw jc();var t=this.left.check();if(t!==this.right.check())throw jc();return t+(this.isRed()?0:1)},t}();ef.EMPTY=null,ef.RED=!0,ef.BLACK=!1,ef.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw jc()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw jc()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ef(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var nf=function(){function t(t){this.comparator=t,this.data=new Zh(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new rf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new rf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),rf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),of=new Zh(vl.comparator);function sf(){return of}var af=new Zh(vl.comparator);function uf(){return af}var cf=new Zh(vl.comparator);var lf=new nf(vl.comparator);function hf(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=lf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ff=new nf(Hc);function pf(){return ff}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var df=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,vf.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Xc.min(),r,pf(),sf(),hf())},t}(),vf=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(il.EMPTY_BYTE_STRING,n,hf(),hf(),hf())},t}(),gf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},mf=function(t,e){this.targetId=t,this.V=e},yf=function(t,e,n,r){void 0===n&&(n=il.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},bf=function(){function t(){this.S=0,this.D=If(),this.C=il.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=hf(),e=hf(),n=hf();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:jc()}})),new vf(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=If()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),wf=function(){function t(t){this.W=t,this.G=new Map,this.H=sf(),this.J=_f(),this.Y=new nf(Hc)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:jc()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Fl(i))if(0===n){var o=new vl(i.path);this.tt(e,o,Ol.newNoDocument(o,Xc.min()))}else qc(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Fl(o.target)){var s=new vl(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,Ol.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=hf();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new df(t,n,this.Y,this.H,r);return this.H=sf(),this.J=_f(),this.Y=new nf(Hc),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new bf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new nf(Hc),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Mc("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new bf),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function _f(){return new Zh(vl.comparator)}function If(){return new Zh(vl.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tf={asc:"ASCENDING",desc:"DESCENDING"},Ef={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Sf=function(t,e){this.databaseId=t,this.I=e};function Af(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function kf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Nf(t,e){return Af(t,e.toTimestamp())}function Cf(t){return qc(!!t),Xc.fromTimestamp((e=sl(t),new Qc(e.seconds,e.nanos)));var e}function Rf(t,e){return(n=t,new tl(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function Df(t){var e=tl.fromString(t);return qc(tp(e)),e}function Of(t,e){return Rf(t.databaseId,e.path)}function xf(t,e){var n=Df(e);if(n.get(1)!==t.databaseId.projectId)throw new xc(Oc.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new xc(Oc.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new vl(Ff(n))}function Pf(t,e){return Rf(t.databaseId,e)}function Lf(t){var e=Df(t);return 4===e.length?tl.emptyPath():Ff(e)}function Mf(t){return new tl(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ff(t){return qc(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Uf(t,e,n){return{name:Of(t,e),fields:n.value.mapValue.fields}}function Vf(t,e){var n,r,i;if(e instanceof qh)n={update:Uf(t,e.key,e.value)};else if(e instanceof Qh)n={delete:Of(t,e.key)};else if(e instanceof Bh)n={update:Uf(t,e.key,e.data),updateMask:Zf(e.fieldMask)};else{if(!(e instanceof Xh))return jc();n={verify:Of(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Th)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Eh)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ah)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Nh)return{fieldPath:e.field.canonicalString(),increment:n.A};throw jc()}(0,t)}))),e.precondition.isNone||(n.currentDocument=(r=t,void 0!==(i=e.precondition).updateTime?{updateTime:Nf(r,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:jc())),n}function jf(t,e){var n,r=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?xh.updateTime(Cf(n.updateTime)):void 0!==n.exists?xh.exists(n.exists):xh.none():xh.none(),i=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)qc("REQUEST_TIME"===e.setToServerValue),n=new Th;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Eh(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Ah(i)}else"increment"in e?n=new Nh(t,e.increment):jc();var o=nl.fromServerFormat(e.fieldPath);return new Dh(o,n)}(t,e)})):[];if(e.update){e.update.name;var o=xf(t,e.update.name),s=new Rl({mapValue:{fields:e.update.fields}});if(e.updateMask){var a=function(t){var e=t.fieldPaths||[];return new rl(e.map((function(t){return nl.fromServerFormat(t)})))}(e.updateMask);return new Bh(o,s,a,r,i)}return new qh(o,s,r,i)}if(e.delete){var u=xf(t,e.delete);return new Qh(u,r)}if(e.verify){var c=xf(t,e.verify);return new Xh(c,r)}return jc()}function qf(t,e){return{documents:[Pf(t,e.path)]}}function Bf(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Pf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Pf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(kl(t.value))return{unaryFilter:{field:Xf(t.field),op:"IS_NAN"}};if(Al(t.value))return{unaryFilter:{field:Xf(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(kl(t.value))return{unaryFilter:{field:Xf(t.field),op:"IS_NOT_NAN"}};if(Al(t.value))return{unaryFilter:{field:Xf(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xf(t.field),op:Qf(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:Xf((e=t).field),direction:Wf(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s,a,u=(s=t,a=e.limit,s.I||fl(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=Hf(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Hf(e.endAt)),n}function Kf(t){var e=Lf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){qc(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Gf(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return new Xl($f((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=fl(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=zf(n.startAt));var f=null;return n.endAt&&(f=zf(n.endAt)),th(e,i,a,s,l,"F",h,f)}function Gf(t){return t?void 0!==t.unaryFilter?[Jf(t)]:void 0!==t.fieldFilter?[Yf(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Gf(t)})).reduce((function(t,e){return t.concat(e)})):jc():[]}function Hf(t){return{before:t.before,values:t.position}}function zf(t){var e=!!t.before,n=t.values||[];return new Wl(n,e)}function Wf(t){return Tf[t]}function Qf(t){return Ef[t]}function Xf(t){return{fieldPath:t.canonicalString()}}function $f(t){return nl.fromServerFormat(t.fieldPath)}function Yf(t){return Ul.create($f(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return jc()}}(t.fieldFilter.op),t.fieldFilter.value)}function Jf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=$f(t.unaryFilter.field);return Ul.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=$f(t.unaryFilter.field);return Ul.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=$f(t.unaryFilter.field);return Ul.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=$f(t.unaryFilter.field);return Ul.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return jc()}}function Zf(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function tp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=rp(e)),e=np(t.get(n),e);return rp(e)}function np(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function rp(t){return t+""}function ip(t){var e=t.length;if(qc(e>=2),2===e)return qc(""===t.charAt(0)&&""===t.charAt(1)),tl.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&jc(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:jc()}o=s+2}return new tl(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var op=function(t,e){this.seconds=t,this.nanoseconds=e},sp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};sp.store="owner",sp.key="owner";var ap=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};ap.store="mutationQueues",ap.keyPath="userId";var up=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};up.store="mutations",up.keyPath="batchId",up.userMutationsIndex="userMutationsIndex",up.userMutationsKeyPath=["userId","batchId"];var cp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,ep(e)]},t.key=function(t,e,n){return[t,ep(e),n]},t}();cp.store="documentMutations",cp.PLACEHOLDER=new cp;var lp=function(t,e){this.path=t,this.readTime=e},hp=function(t,e){this.path=t,this.version=e},fp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};fp.store="remoteDocuments",fp.readTimeIndex="readTimeIndex",fp.readTimeIndexPath="readTime",fp.collectionReadTimeIndex="collectionReadTimeIndex",fp.collectionReadTimeIndexPath=["parentPath","readTime"];var pp=function(t){this.byteSize=t};pp.store="remoteDocumentGlobal",pp.key="remoteDocumentGlobalKey";var dp=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};dp.store="targets",dp.keyPath="targetId",dp.queryTargetsIndexName="queryTargetsIndex",dp.queryTargetsKeyPath=["canonicalId","targetId"];var vp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};vp.store="targetDocuments",vp.keyPath=["targetId","path"],vp.documentTargetsIndex="documentTargetsIndex",vp.documentTargetsKeyPath=["path","targetId"];var gp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};gp.key="targetGlobalKey",gp.store="targetGlobal";var mp=function(t,e){this.collectionId=t,this.parent=e};mp.store="collectionParents",mp.keyPath=["collectionId","parent"];var yp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};yp.store="clientMetadata",yp.keyPath="clientId";var bp=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};bp.store="bundles",bp.keyPath="bundleId";var wp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};wp.store="namedQueries",wp.keyPath="name";var _p=ki(ki([],ki(ki([],ki(ki([],ki(ki([],[ap.store,up.store,cp.store,fp.store,dp.store,sp.store,gp.store,vp.store]),[yp.store])),[pp.store])),[mp.store])),[bp.store,wp.store]),Ip="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Ep=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Sp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&jc(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(r){return t.reject(r)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Ap=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Ep,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Cp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Pp(e.target.error);n.ft.reject(new Cp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(o){throw new Cp(n,o)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Mc("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Dp(e)},t}(),kp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Di())&&Fc("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Mc("SimpleDb","Removing database:",t),Op(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Di(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Ti(this,void 0,void 0,(function(){var e,n=this;return Ei(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Mc("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Cp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new xc(Oc.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new Cp(t,n))},i.onupgradeneeded=function(t){Mc("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Mc("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Ti(this,void 0,void 0,(function(){var i,o,s,a,u;return Ei(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Ei(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Ap.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch((function(t){return e.abort(t),Sp.reject(t)})).toPromise(),u={},s.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,Mc("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Np=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Op(this.Pt.delete())},t}(),Cp=function(t){function e(e,n){var r=this;return(r=t.call(this,Oc.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return _i(e,t),e}(xc);function Rp(t){return"IndexedDbTransactionError"===t.name}var Dp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Mc("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Mc("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Op(n)},t.prototype.add=function(t){return Mc("SimpleDb","ADD",this.store.name,t,t),Op(this.store.add(t))},t.prototype.get=function(t){var e=this;return Op(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Mc("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Mc("SimpleDb","DELETE",this.store.name,t),Op(this.store.delete(t))},t.prototype.count=function(){return Mc("SimpleDb","COUNT",this.store.name),Op(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){Mc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Sp((function(n,r){e.onerror=function(t){var e=Pp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Sp((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Np(i),s=e(i.primaryKey,i.value,o);if(s instanceof Sp){var a=s.catch((function(t){return o.done(),Sp.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Sp.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Op(t){return new Sp((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Pp(t.target.error);n(e)}}))}var xp=!1;function Pp(t){var e=kp._t(Di());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new xc("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return xp||(xp=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lp=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return _i(e,t),e}(Tp);function Mp(t,e){var n=Bc(t);return kp.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Mh(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&Fh(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&Fh(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Xc.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),hf())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&zc(this.mutations,t.mutations,(function(t,e){return Vh(t,e)}))&&zc(this.baseMutations,t.baseMutations,(function(t,e){return Vh(t,e)}))},t}(),Up=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){qc(e.mutations.length===r.length);for(var i=cf,o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Vp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Xc.min()),void 0===o&&(o=Xc.min()),void 0===s&&(s=il.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),jp=function(t){this.Lt=t};function qp(t,e){if(e.document)return function(t,e,n){var r=xf(t,e.name),i=Cf(e.updateTime),o=new Rl({mapValue:{fields:e.fields}}),s=Ol.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=vl.fromSegments(e.noDocument.path),r=zp(e.noDocument.readTime),i=Ol.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=vl.fromSegments(e.unknownDocument.path);return r=zp(e.unknownDocument.version),Ol.newUnknownDocument(o,r)}return jc()}function Bp(t,e,n){var r,i,o=Kp(n),s=e.key.path.popLast().toArray();if(e.isFoundDocument()){var a={name:Of(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:Af(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new fp(null,null,a,u,o,s)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=Hp(e.version);return u=e.hasCommittedMutations,new fp(null,new lp(c,l),null,u,o,s)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=Hp(e.version);return new fp(new hp(h,f),null,null,!0,o,s)}return jc()}function Kp(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Gp(t){var e=new Qc(t[0],t[1]);return Xc.fromTimestamp(e)}function Hp(t){var e=t.toTimestamp();return new op(e.seconds,e.nanoseconds)}function zp(t){var e=new Qc(t.seconds,t.nanoseconds);return Xc.fromTimestamp(e)}function Wp(t,e){for(var n=(e.baseMutations||[]).map((function(e){return jf(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return jf(t.Lt,e)})),a=Qc.fromMillis(e.localWriteTimeMs);return new Fp(e.batchId,a,n,s)}function Qp(t){var e,n,r=zp(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?zp(t.lastLimboFreeSnapshotVersion):Xc.min();return void 0!==t.query.documents?(qc(1===(n=t.query).documents.length),e=uh(eh(Lf(n.documents[0])))):e=uh(Kf(t.query)),new Vp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,il.fromBase64String(t.resumeToken))}function Xp(t,e){var n,r=Hp(e.snapshotVersion),i=Hp(e.lastLimboFreeSnapshotVersion);n=Fl(e.target)?qf(t.Lt,e.target):Bf(t.Lt,e.target);var o=e.resumeToken.toBase64();return new dp(e.targetId,Ll(e.target),r,o,e.sequenceNumber,i,n)}function $p(t){var e=Kf({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ch(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Yp=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Jp(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:zp(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Jp(t).put({bundleId:(n=e).id,createTime:Hp(Cf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Zp(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:$p(e.bundledQuery),readTime:zp(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Zp(t).put({name:(n=e).name,readTime:Hp(Cf(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function Jp(t){return Mp(t,bp.store)}function Zp(t){return Mp(t,wp.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var td=function(){function t(){this.Bt=new ed}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Sp.resolve()},t.prototype.getCollectionParents=function(t,e){return Sp.resolve(this.Bt.getEntries(e))},t}(),ed=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new nf(tl.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new nf(tl.comparator)).toArray()},t}(),nd=function(){function t(){this.qt=new ed}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:ep(i)};return rd(t).put(o)}return Sp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Wc(e),""],!1,!0);return rd(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(ip(o.parent))}return n}))},t}();function rd(t){return Mp(t,mp.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var id={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},od=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sd(t,e,n){var r=t.store(up.store),i=t.store(cp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){qc(1===a)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=cp.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Sp.waitFor(o).next((function(){return c}))}function ad(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw jc();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */od.DEFAULT_COLLECTION_PERCENTILE=10,od.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,od.DEFAULT=new od(41943040,od.DEFAULT_COLLECTION_PERCENTILE,od.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),od.DISABLED=new od(-1,0,0);var ud=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return qc(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ld(t).$t({index:up.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=hd(t),s=ld(t);return s.add({}).next((function(a){qc("number"==typeof a);for(var u=new Fp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Vf(t.Lt,e)})),i=n.mutations.map((function(e){return Vf(t.Lt,e)}));return new up(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new nf((function(t,e){return Hc(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=cp.key(i.userId,d.key.path,a);h=h.add(d.key.path.popLast()),l.push(s.put(c)),l.push(o.put(v,cp.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),Sp.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return ld(t).get(e).next((function(t){return t?(qc(t.userId===n.userId),Wp(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Sp.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return ld(t).$t({index:up.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(qc(e.batchId>=r),o=Wp(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return ld(t).$t({index:up.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ld(t).Nt(up.userMutationsIndex,n).next((function(t){return t.map((function(t){return Wp(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=cp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return hd(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],l=ip(u);if(a===n.userId&&e.path.isEqual(l))return ld(t).get(c).next((function(t){if(!t)throw jc();qc(t.userId===n.userId),o.push(Wp(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new nf(Hc),i=[];return e.forEach((function(e){var o=cp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=hd(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=ip(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),Sp.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=cp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new nf(Hc);return hd(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],l=ip(u);s===n.userId&&r.isPrefixOf(l)?l.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(ld(t).get(e).next((function(t){if(null===t)throw jc();qc(t.userId===n.userId),r.push(Wp(n.R,t))})))})),Sp.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return sd(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Sp.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Sp.resolve();var r=IDBKeyRange.lowerBound(cp.prefixForUser(e.userId)),i=[];return hd(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=ip(t[1]);i.push(o)}else r.done()})).next((function(){qc(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return cd(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return fd(t).get(this.userId).next((function(t){return t||new ap(e.userId,-1,"")}))},t}();function cd(t,e,n){var r=cp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return hd(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function ld(t){return Mp(t,up.store)}function hd(t){return Mp(t,cp.store)}function fd(t){return Mp(t,ap.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pd=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),dd=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new pd(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Xc.fromTimestamp(new Qc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return vd(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return qc(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return vd(t).$t((function(s,a){var u=Qp(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Sp.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return vd(t).$t((function(t,n){var r=Qp(n);e(r)}))},t.prototype.Xt=function(t){return gd(t).get(gp.key).next((function(t){return qc(null!==t),t}))},t.prototype.Zt=function(t,e){return gd(t).put(gp.key,e)},t.prototype.te=function(t,e){return vd(t).put(Xp(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ll(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vd(t).$t({range:r,index:dp.queryTargetsIndexName},(function(t,n,r){var o=Qp(n);Ml(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=md(t);return e.forEach((function(e){var s=ep(e.path);i.push(o.put(new vp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),Sp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=md(t);return Sp.forEach(e,(function(e){var o=ep(e.path);return Sp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=md(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=md(t),i=hf();return r.$t({range:n,kt:!0},(function(t,e,n){var r=ip(t[1]),o=new vl(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=ep(e.path),r=IDBKeyRange.bound([n],[Wc(n)],!1,!0),i=0;return md(t).$t({index:vp.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return vd(t).get(e).next((function(t){return t?Qp(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(t){return Mp(t,dp.store)}function gd(t){return Mp(t,gp.store)}function md(t){return Mp(t,vp.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){if(t.code!==Oc.FAILED_PRECONDITION||t.message!==Ip)throw t;return Mc("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bd(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Hc(n,i);return 0===s?Hc(r,o):s}var wd=function(){function t(t){this.ne=t,this.buffer=new nf(bd),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();bd(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),_d=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Mc("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return Ti(e,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Rp(e=n.sent())?(Mc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,yd(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Id=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Sp.resolve(Dc.o);var r=new wd(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Mc("LruGarbageCollector","Garbage collection skipped; disabled"),Sp.resolve(id)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Mc("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),id):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(Mc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Lc()<=Wi.DEBUG&&Mc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Sp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),Td=function(){function t(t,e){this.db=t,this.garbageCollector=new Id(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Ed(t,n)},t.prototype.removeReference=function(t,e,n){return Ed(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Ed(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,fd(n=t).Ot((function(t){return cd(n,t,r).next((function(t){return t&&(i=!0),Sp.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),md(t).delete([0,ep(s.path)])}))}));i.push(u)}})).next((function(){return Sp.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Ed(t,e)},t.prototype.we=function(t,e){var n,r=md(t),i=Dc.o;return r.$t({index:vp.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==Dc.o&&e(new vl(ip(n)),i),i=a,n=s):i=Dc.o})).next((function(){i!==Dc.o&&e(new vl(ip(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Ed(t,e){return md(t).put((n=e,r=t.currentSequenceNumber,new vp(0,ep(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Sd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Yc(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Jc(this.inner)},t}(),Ad=function(){function t(){this.changes=new Sd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Xc.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Ol.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Sp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),kd=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Rd(t).put(Dd(e),n)},t.prototype.removeEntry=function(t,e){var n=Rd(t),r=Dd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Rd(t).get(Dd(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Rd(t).get(Dd(e)).next((function(t){return{document:n.ye(e,t),size:ad(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=sf();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=sf(),i=new Zh(vl.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,ad(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Sp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Rd(t).$t({range:r},(function(t,e,r){for(var s=vl.fromSegments(t);o&&vl.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=sf(),o=e.path.length+1,s={};if(n.isEqual(Xc.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Kp(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=fp.collectionReadTimeIndex}return Rd(t).$t(s,(function(t,n,s){if(t.length===o){var a=qp(r.R,n);e.path.isPrefixOf(a.key.path)?ph(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Nd(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return Cd(t).get(pp.key).next((function(t){return qc(!!t),t}))},t.prototype.me=function(t,e){return Cd(t).put(pp.key,e)},t.prototype.ye=function(t,e){if(e){var n=qp(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Xc.min()))return n}return Ol.newInvalidDocument(t)},t}(),Nd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Sd((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return _i(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new nf((function(t,e){return Hc(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=Bp(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=ad(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Bp(e.Ie.R,Ol.newNoDocument(o,Xc.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Sp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Ad);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cd(t){return Mp(t,pp.store)}function Rd(t){return Mp(t,fp.store)}function Dd(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Od=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;qc(n<r&&n>=0&&r<=11);var o=new Ap("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(sp.store),function(t){t.createObjectStore(ap.store,{keyPath:ap.keyPath}),t.createObjectStore(up.store,{keyPath:up.keyPath,autoIncrement:!0}).createIndex(up.userMutationsIndex,up.userMutationsKeyPath,{unique:!0}),t.createObjectStore(cp.store)}(t),xd(t),function(t){t.createObjectStore(fp.store)}(t));var s=Sp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(vp.store),t.deleteObjectStore(dp.store),t.deleteObjectStore(gp.store)}(t),xd(t)),s=s.next((function(){return function(t){var e=t.store(gp.store),n=new gp(0,0,Xc.min().toTimestamp(),0);return e.put(gp.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(up.store).Nt().next((function(n){t.deleteObjectStore(up.store),t.createObjectStore(up.store,{keyPath:up.keyPath,autoIncrement:!0}).createIndex(up.userMutationsIndex,up.userMutationsKeyPath,{unique:!0});var r=e.store(up.store),i=n.map((function(t){return r.put(t)}));return Sp.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(yp.store,{keyPath:yp.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(pp.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(fp.store);e.createIndex(fp.readTimeIndex,fp.readTimeIndexPath,{unique:!1}),e.createIndex(fp.collectionReadTimeIndex,fp.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(bp.store,{keyPath:bp.keyPath})}(t),function(t){t.createObjectStore(wp.store,{keyPath:wp.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(fp.store).$t((function(t,n){e+=ad(n)})).next((function(){var n=new pp(e);return t.store(pp.store).put(pp.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(ap.store),r=t.store(up.store);return n.Nt().next((function(n){return Sp.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(up.userMutationsIndex,i).next((function(r){return Sp.forEach(r,(function(r){qc(r.userId===n.userId);var i=Wp(e.R,r);return sd(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(vp.store),n=t.store(fp.store);return t.store(gp.store).get(gp.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new tl(n),s=[0,ep(o)];r.push(e.get(s).next((function(n){return n?Sp.resolve():(r=o,e.put(new vp(0,ep(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Sp.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(mp.store,{keyPath:mp.keyPath});var n=e.store(mp.store),r=new ed,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:ep(i)})}};return e.store(fp.store).$t({kt:!0},(function(t,e){var n=new tl(t);return i(n.popLast())})).next((function(){return e.store(cp.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=ip(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(dp.store);return n.$t((function(t,r){var i=Qp(r),o=Xp(e.R,i);return n.put(o)}))},t}();function xd(t){t.createObjectStore(vp.store,{keyPath:vp.keyPath}).createIndex(vp.documentTargetsIndex,vp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(dp.store,{keyPath:dp.keyPath}).createIndex(dp.queryTargetsIndexName,dp.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(gp.store)}var Pd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ld=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new xc(Oc.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new Td(this,i),this.Le=n+"main",this.R=new jp(u),this.Be=new kp(this.Le,11,new Od(this.R)),this.qe=new dd(this.referenceDelegate,this.R),this.Ut=new nd,this.Ue=(h=this.R,f=this.Ut,new kd(h,f)),this.Ke=new Yp,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&Fc("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new xc(Oc.FAILED_PRECONDITION,Pd);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new Dc(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Ti(e,void 0,void 0,(function(){return Ei(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return Ti(e,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return Ti(e,void 0,void 0,(function(){return Ei(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Fd(e).put(new yp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Rp(e))return Mc("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Mc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Md(t).get(sp.key).next((function(t){return Sp.resolve(e.tn(t))}))},t.prototype.en=function(t){return Fd(t).delete(this.clientId)},t.prototype.nn=function(){return Ti(this,void 0,void 0,(function(){var t,e,n,r,i=this;return Ei(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Mp(t,yp.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Sp.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Sp.resolve(!0):Md(t).get(sp.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new xc(Oc.FAILED_PRECONDITION,Pd);return!1}}return!(!e.networkEnabled||!e.inForeground)||Fd(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Mc("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return Ti(this,void 0,void 0,(function(){var t=this;return Ei(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[sp.store,yp.store],(function(e){var n=new Lp(e,Dc.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Fd(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return ud.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Mc("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,_p,(function(o){return i=new Lp(o,r.Ne?r.Ne.next():Dc.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Fc("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new xc(Oc.FAILED_PRECONDITION,Ip);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Md(t).get(sp.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new xc(Oc.FAILED_PRECONDITION,Pd)}))},t.prototype.Ze=function(t){var e=new sp(this.clientId,this.allowTabSynchronization,Date.now());return Md(t).put(sp.key,e)},t.yt=function(){return kp.yt()},t.prototype.Xe=function(t){var e=this,n=Md(t);return n.get(sp.key).next((function(t){return e.tn(t)?(Mc("IndexedDbPersistence","Releasing primary lease."),n.delete(sp.key)):Sp.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Fc("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Mc("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(r){return Fc("IndexedDbPersistence","Failed to get zombied client id.",r),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Fc("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Md(t){return Mp(t,sp.store)}function Fd(t){return Mp(t,yp.store)}function Ud(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Vd=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,vl.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):sh(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new vl(e)).next((function(t){var e=uf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=uf();return this.Ut.getCollectionParents(t,i).next((function(s){return Sp.forEach(s,(function(s){var a,u,c=(a=e,u=s.child(i),new Zl(u,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=Ol.newInvalidDocument(c),r=r.insert(c,l)),Fh(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){ph(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=hf(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Bh&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),jd=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=hf(),i=hf(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),qd=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Xc.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var s=o.Cn(e,i);return(nh(e)||rh(e))&&o.Nn(e.limitType,s,r,n)?o.Dn(t,e):(Lc()<=Wi.DEBUG&&Mc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),fh(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return s.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new nf(dh(t));return e.forEach((function(e,r){ph(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Lc()<=Wi.DEBUG&&Mc("QueryEngine","Using full collection scan to execute query:",fh(e)),this.Sn.getDocumentsMatchingQuery(t,e,Xc.min())},t}(),Bd=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new Zh(Hc),this.kn=new Sd((function(t){return Ll(t)}),Ml),this.$n=Xc.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Vd(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(t,e,n,r){return new Bd(t,e,n,r)}function Gd(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o;return Ei(this,(function(s){switch(s.label){case 0:return n=Bc(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Vd(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=hf(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];s=s.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];s=s.add(y.key)}}return i.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function Hd(t,e){var n=Bc(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r,i,o,s,a,u,c,l=e.batch.keys(),h=n.On.newChangeBuffer({trackRemovals:!0});return(r=n,i=t,o=e,s=h,a=o.batch,u=a.keys(),c=Sp.resolve(),u.forEach((function(t){c=c.next((function(){return s.getEntry(i,t)})).next((function(e){var n=o.docVersions.get(t);qc(null!==n),e.version.compareTo(n)<0&&(a.applyToRemoteDocument(e,o),e.isValidDocument()&&s.addEntry(e,o.commitVersion))}))})),c.next((function(){return r._n.removeMutationBatch(i,a)}))).next((function(){return h.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,l)}))}))}function zd(t){var e=Bc(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Wd(t,e){var n=Bc(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach((function(e,o){var a,u,c,l=i.get(o);if(l){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),a=l,c=e,qc((u=f).resumeToken.approximateByteSize()>0),(0===a.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-a.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&s.push(n.qe.updateTargetData(t,f))}}}));var a=sf();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(function(t,e,n,r,i){var o=hf();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=sf();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Xc.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Mc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Xc.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return Sp.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.Fn=i,t}))}function Qd(t,e){var n=Bc(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Xd(t,e){var n=Bc(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Sp.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Vp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function $d(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o,s;return Ei(this,(function(a){switch(a.label){case 0:r=Bc(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Rp(s=a.sent()))throw s;return Mc("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function Yd(t,e,n){var r=Bc(t),i=Xc.min(),o=hf();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(s=r,a=t,u=uh(e),c=Bc(s),l=c.kn.get(u),void 0!==l?Sp.resolve(c.Fn.get(l)):c.qe.getTargetData(a,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Xc.min(),n?o:hf())})).next((function(t){return{documents:t,Bn:o}}));var s,a,u,c,l}))}function Jd(t,e){var n=Bc(t),r=Bc(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function Zd(t){var e=Bc(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=Bc(n),s=sf(),a=Kp(i),u=Rd(r),c=IDBKeyRange.lowerBound(a,!0),u.$t({index:fp.readTimeIndex,range:c},(function(t,e){var n=qp(o.R,e);s=s.insert(n.key,n),a=e.readTime})).next((function(){return{wn:s,readTime:Gp(a)}}));var n,r,i,o,s,a,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function tv(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){return[2,(e=Bc(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Rd(t),n=Xc.min(),e.$t({index:fp.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=Gp(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ev=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Sp.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Cf(n.createTime)}),Sp.resolve()},t.prototype.getNamedQuery=function(t,e){return Sp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:$p(n.bundledQuery),readTime:Cf(n.readTime)}),Sp.resolve();var n},t}(),nv=function(){function t(){this.Wn=new nf(rv.Gn),this.zn=new nf(rv.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new rv(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new rv(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new vl(new tl([])),r=new rv(n,t),i=new rv(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new vl(new tl([])),n=new rv(e,t),r=new rv(e,t+1),i=hf();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new rv(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),rv=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return vl.comparator(t.key,e.key)||Hc(t.ns,e.ns)},t.Hn=function(t,e){return Hc(t.ns,e.ns)||vl.comparator(t.key,e.key)},t}(),iv=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new nf(rv.Gn)}return t.prototype.checkEmpty=function(t){return Sp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Fp(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new rv(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Sp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Sp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Sp.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Sp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Sp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new rv(e,0),i=new rv(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Sp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new nf(Hc);return e.forEach((function(t){var e=new rv(t,0),i=new rv(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Sp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;vl.isDocumentKey(i)||(i=i.child(""));var o=new rv(new vl(i),0),s=new nf(Hc);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),Sp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;qc(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Sp.forEach(e.mutations,(function(i){var o=new rv(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new rv(e,0),r=this.rs.firstAfterOrEqual(n);return Sp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Sp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),ov=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Zh(vl.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Sp.resolve(n?n.document.clone():Ol.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=sf();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Ol.newInvalidDocument(t))})),Sp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=sf(),i=new vl(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(a.path))break;l.compareTo(n)<=0||ph(e,c)&&(r=r.insert(c.key,c.clone()))}return Sp.resolve(r)},t.prototype.fs=function(t,e){return Sp.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new sv(this)},t.prototype.getSize=function(t){return Sp.resolve(this.size)},t}(),sv=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return _i(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Sp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ad),av=function(){function t(t){this.persistence=t,this.ds=new Sd((function(t){return Ll(t)}),Ml),this.lastRemoteSnapshotVersion=Xc.min(),this.highestTargetId=0,this.ws=0,this._s=new nv,this.targetCount=0,this.ys=pd.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Sp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Sp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Sp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Sp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Sp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new pd(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Sp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Sp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Sp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),Sp.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Sp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Sp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Sp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Sp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Sp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Sp.resolve(n)},t.prototype.containsKey=function(t,e){return Sp.resolve(this._s.containsKey(e))},t}(),uv=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new Dc(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new av(this),this.Ut=new td,this.Ue=(n=this.Ut,new ov(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new jp(e),this.Ke=new ev(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new iv(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Mc("MemoryPersistence","Starting transaction:",t);var i=new cv(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Sp.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),cv=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return _i(e,t),e}(Tp),lv=function(){function t(t){this.persistence=t,this.As=new nv,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw jc()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Sp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Sp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Sp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Sp.forEach(this.vs,(function(r){var i=vl.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Sp.or([function(){return Sp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),hv=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fv(t,e){return"firestore_clients_"+t+"_"+e}function pv(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function dv(t,e){return"firestore_targets_"+t+"_"+e}hv.UNAUTHENTICATED=new hv(null),hv.GOOGLE_CREDENTIALS=new hv("google-credentials-uid"),hv.FIRST_PARTY=new hv("first-party-uid");var vv=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new xc(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Fc("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),gv=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new xc(i.error.code,i.error.message)),o?new t(e,i.state,r):(Fc("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),mv=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=pf(),s=0;i&&s<r.activeTargetIds.length;++s)i=dl(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Fc("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),yv=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Fc("SharedClientState","Failed to parse online state: "+e),null)},t}(),bv=function(){function t(){this.activeTargetIds=pf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),wv=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new Zh(Hc),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=fv(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new bv),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Ti(this,void 0,void 0,(function(){var t,e,n,r,i,o,s,a,u,c,l,h=this;return Ei(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(fv(this.persistenceKey,r)))&&(o=mv.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(dv(this.persistenceKey,t));if(n){var r=gv.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(dv(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Mc("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Mc("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Mc("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Mc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Fc("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return Ti(e,void 0,void 0,(function(){var t,e,r,i,o,s;return Ei(this,(function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=Dc.o;if(null!=t)try{var n=JSON.parse(t);qc("number"==typeof n),e=n}catch(r){Fc("SharedClientState","Failed to read sequence number from WebStorage",r)}return e}(n.newValue))!==Dc.o&&this.sequenceNumberHandler(s);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new vv(this.currentUser,t,e,n),i=pv(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=pv(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=dv(this.persistenceKey,t),i=new gv(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return mv.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return vv.Vs(new hv(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return gv.Vs(r,e)},t.prototype.js=function(t){return yv.Vs(t)},t.prototype.ii=function(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Mc("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=pf();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),_v=function(){function t(){this.li=new bv,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new bv,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Iv=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Tv=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Mc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Mc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ev={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Sv=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Av=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return _i(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var s=new Rc;s.listenOnce(Ec.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case Tc.NO_ERROR:var e=s.getResponseJson();Mc("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Tc.TIMEOUT:Mc("Connection",'RPC "'+t+'" timed out'),o(new xc(Oc.DEADLINE_EXCEEDED,"Request time out"));break;case Tc.HTTP_ERROR:var n=s.getStatus();if(Mc("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Oc).indexOf(c)>=0?c:Oc.UNKNOWN);o(new xc(a,r.message))}else o(new xc(Oc.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new xc(Oc.UNAVAILABLE,"Connection failed."));break;default:jc()}}finally{Mc("Connection",'RPC "'+t+'" completed.')}var u,c}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n,r,i=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=new yc,s=ha(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Nc({})),this.Fi(a.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Di())||"object"==typeof navigator&&"ReactNative"===navigator.product||Di().indexOf("Electron/")>=0||((r=Di()).indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0)||Di().indexOf("MSAppHost/")>=0||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(a.httpHeadersOverwriteParam="$httpHeaders");var u=i.join("");Mc("Connection","Creating WebChannel: "+u,a);var c=o.createWebChannel(u,a),l=!1,h=!1,f=new Sv({Ei:function(t){h?Mc("Connection","Not sending because WebChannel is closed:",t):(l||(Mc("Connection","Opening WebChannel transport."),c.open(),l=!0),Mc("Connection","WebChannel sending:",t),c.send(t))},Ti:function(){return c.close()}}),p=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(c,Cc.EventType.OPEN,(function(){h||Mc("Connection","WebChannel transport opened.")})),p(c,Cc.EventType.CLOSE,(function(){h||(h=!0,Mc("Connection","WebChannel transport closed"),f.Vi())})),p(c,Cc.EventType.ERROR,(function(t){h||(h=!0,Uc("Connection","WebChannel transport errored:",t),f.Vi(new xc(Oc.UNAVAILABLE,"The operation could not be completed")))})),p(c,Cc.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];qc(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Mc("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=zh[t];if(void 0!==e)return Jh(e)}(o),a=i.message;void 0===s&&(s=Oc.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,f.Vi(new xc(s,a)),c.close()}else Mc("Connection","WebChannel received:",n),f.Si(n)}})),p(s,Sc.STAT_EVENT,(function(t){t.stat===Ac?Mc("Connection","Detected buffering proxy"):t.stat===kc&&Mc("Connection","Detected no buffering proxy")})),setTimeout((function(){f.Pi()}),0),f},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Mc("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return Mc("RestConnection","Received: ",t),t}),(function(e){throw Uc("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Ev[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(){return"undefined"!=typeof window?window:null}function Nv(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){return new Sf(t,!0)}var Rv=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Mc("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Dv=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Rv(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Oc.RESOURCE_EXHAUSTED?(Fc(e.toString()),Fc("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Oc.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new xc(Oc.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return Ti(t,void 0,void 0,(function(){return Ei(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Mc("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Mc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Ov=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return _i(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:jc(),o=e.targetChange.targetIds||[],s=function(t,e){return t.I?(qc(void 0===e||"string"==typeof e),il.fromBase64String(e||"")):(qc(void 0===e||e instanceof Uint8Array),il.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),a=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Oc.UNKNOWN:Jh(t.code);return new xc(e,t.message||"")}(u);n=new yf(i,o,s,a||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=xf(t,i.document.name),s=Cf(i.document.updateTime);var u=new Rl({mapValue:{fields:i.document.fields}}),c=(a=Ol.newFoundDocument(o,s,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new gf(c,l,a.key,a)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=xf(t,i.document),s=i.readTime?Cf(i.readTime):Xc.min(),u=Ol.newNoDocument(o,s),a=i.removedTargetIds||[],n=new gf([],a,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=xf(t,i.document),s=i.removedTargetIds||[],n=new gf([],s,o,null);else{if(!("filter"in e))return jc();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new $h(i),s=h.targetId,n=new mf(s,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Xc.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Xc.min():e.readTime?Cf(e.readTime):Xc.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=Mf(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=Fl(i)?{documents:qf(e,i)}:{query:Bf(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=kf(e,n.resumeToken):n.snapshotVersion.compareTo(Xc.min())>0&&(r.readTime=Af(e,n.snapshotVersion.toTimestamp())),r);var s=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return jc()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);s&&(o.labels=s),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=Mf(this.R),e.removeTarget=t,this.cr(e)},e}(Dv),xv=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return _i(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(qc(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(qc(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?Cf(e.updateTime):Cf(n)).isEqual(Xc.min())&&(r=Cf(n)),new Oh(r,e.transformResults||[]);var e,n,r}))):[]),n=Cf(t.commitTime);return this.listener.Tr(n,e)}var r,i;return qc(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=Mf(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Vf(e.R,t)}))};this.cr(n)},e}(Dv),Pv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return _i(e,t),e.prototype.br=function(){if(this.Rr)throw new xc(Oc.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Oc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xc(Oc.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Oc.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new xc(Oc.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Lv=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Fc(e),this.Vr=!1):Mc("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Mv=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return Ti(o,void 0,void 0,(function(){return Ei(this,(function(t){switch(t.label){case 0:return Hv(this)?(Mc("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return(e=Bc(t)).Or.add(4),[4,Uv(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Fv(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Lv(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(t){return Ti(this,void 0,void 0,(function(){var e,n;return Ei(this,(function(r){switch(r.label){case 0:if(!Hv(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Uv(t){return Ti(this,void 0,void 0,(function(){var e,n;return Ei(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Vv(t,e){var n=Bc(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Gv(n)?Kv(n):sg(n).er()&&qv(n,e))}function jv(t,e){var n=Bc(t),r=sg(n);n.$r.delete(e),r.er()&&Bv(n,e),0===n.$r.size&&(r.er()?r.ir():Hv(n)&&n.Br.set("Unknown"))}function qv(t,e){t.qr.U(e.targetId),sg(t).mr(e)}function Bv(t,e){t.qr.U(e),sg(t).yr(e)}function Kv(t){t.qr=new wf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),sg(t).start(),t.Br.Sr()}function Gv(t){return Hv(t)&&!sg(t).tr()&&t.$r.size>0}function Hv(t){return 0===Bc(t).Or.size}function zv(t){t.qr=void 0}function Wv(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){return t.$r.forEach((function(e,n){qv(t,e)})),[2]}))}))}function Qv(t,e){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(n){return zv(t),Gv(t)?(t.Br.Nr(e),Kv(t)):t.Br.set("Unknown"),[2]}))}))}function Xv(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o;return Ei(this,(function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof yf&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o;return Ei(this,(function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:s.sent(),t.$r.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),Mc("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,$v(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof gf?t.qr.X(e):e instanceof mf?t.qr.rt(e):t.qr.et(e),n.isEqual(Xc.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,zd(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,(a=t,u=n,c=a.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=a.$r.get(e);n&&a.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=a.$r.get(t);if(e){a.$r.set(t,e.withResumeToken(il.EMPTY_BYTE_STRING,e.snapshotVersion)),Bv(a,t);var n=new Vp(e.target,t,1,e.sequenceNumber);qv(a,n)}})),a.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return Mc("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,$v(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}var a,u,c}))}))}function $v(t,e,n){return Ti(this,void 0,void 0,(function(){var r=this;return Ei(this,(function(i){switch(i.label){case 0:if(!Rp(e))throw e;return t.Or.add(1),[4,Uv(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return zd(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return Ti(r,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return Mc("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Fv(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function Yv(t,e){return e().catch((function(n){return $v(t,n,e)}))}function Jv(t){return Ti(this,void 0,void 0,(function(){var e,n,r,i,o;return Ei(this,(function(s){switch(s.label){case 0:e=Bc(t),n=ag(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!(Hv(a=e)&&a.kr.length<10))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Qd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=ag(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,$v(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return Zv(e)&&tg(e),[2]}var a}))}))}function Zv(t){return Hv(t)&&!ag(t).tr()&&t.kr.length>0}function tg(t){ag(t).start()}function eg(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){return ag(t).Ar(),[2]}))}))}function ng(t){return Ti(this,void 0,void 0,(function(){var e,n,r,i;return Ei(this,(function(o){for(e=ag(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function rg(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i;return Ei(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Up.from(r,e,n),[4,Yv(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,Jv(t)];case 2:return o.sent(),[2]}}))}))}function ig(t,e){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return e&&ag(t).pr?[4,function(t,e){return Ti(this,void 0,void 0,(function(){var n,r;return Ei(this,(function(i){switch(i.label){case 0:return Yh(r=e.code)&&r!==Oc.ABORTED?(n=t.kr.shift(),ag(t).sr(),[4,Yv(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Jv(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Zv(t)&&tg(t),[2]}}))}))}function og(t,e){return Ti(this,void 0,void 0,(function(){var n;return Ei(this,(function(r){switch(r.label){case 0:return n=Bc(t),e?(n.Or.delete(2),[4,Fv(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,Uv(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function sg(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:Wv.bind(null,t),Ri:Qv.bind(null,t),_r:Xv.bind(null,t)},(i=Bc(e)).br(),new Ov(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return Ti(o,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),Gv(t)?Kv(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),zv(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function ag(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:eg.bind(null,t),Ri:ig.bind(null,t),Ir:ng.bind(null,t),Tr:rg.bind(null,t)},(i=Bc(e)).br(),new xv(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return Ti(o,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,Jv(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(Mc("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var ug=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Ep,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xc(Oc.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function cg(t,e){if(Fc("AsyncQueue",e+": "+t),Rp(t))return new xc(Oc.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||vl.comparator(e.key,n.key)}:function(t,e){return vl.comparator(t.key,e.key)},this.keyedMap=uf(),this.sortedSet=new Zh(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),hg=function(){function t(){this.Qr=new Zh(vl.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):jc():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),fg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,lg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&lh(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),pg=function(){this.Wr=void 0,this.listeners=[]},dg=function(){this.queries=new Sd((function(t){return hh(t)}),lh),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s,a,u;return Ei(this,(function(c){switch(c.label){case 0:if(n=Bc(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new pg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=cg(a,"Initialization of query '"+fh(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&bg(n),[2]}}))}))}function gg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s;return Ei(this,(function(a){return n=Bc(t),r=e.query,i=!1,(o=n.queries.get(r))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function mg(t,e){for(var n=Bc(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(s)&&(r=!0);u.Wr=s}}r&&bg(n)}function yg(t,e,n){var r=Bc(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function bg(t){t.Gr.forEach((function(t){t.next()}))}var wg=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new fg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=fg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),_g=function(t){this.key=t},Ig=function(t){this.key=t},Tg=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=hf(),this.mutatedKeys=hf(),this.lo=dh(t),this.fo=new lg(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new hg,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=nh(this.query)&&i.size===this.query.limit?i.last():null,c=rh(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=ph(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(a=!0)),d&&(h?(s=s.add(h),o=p?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),nh(this.query)||rh(this.query))for(;s.size>this.query.limit;){var l=nh(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return jc()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new fg(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new hg,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=hf(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new Ig(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new _g(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=hf();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return fg.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),Eg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Sg=function(t){this.key=t,this.bo=!1},Ag=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Sd((function(t){return hh(t)}),lh),this.Vo=new Map,this.So=new Set,this.Do=new Zh(vl.comparator),this.Co=new Map,this.No=new nv,this.xo={},this.Fo=new Map,this.ko=pd.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Ei(this,(function(u){switch(u.label){case 0:return n=nm(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,Xd(n.localStore,uh(e))];case 2:return s=u.sent(),a=n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.targetId,[4,Ng(n,e,r,"current"===a)];case 3:i=u.sent(),n.isPrimaryClient&&Vv(n.remoteStore,s),u.label=4;case 4:return[2,i]}}))}))}function Ng(t,e,n,r){return Ti(this,void 0,void 0,(function(){var i,o,s,a,u,c;return Ei(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return Ti(this,void 0,void 0,(function(){var i,o,s;return Ei(this,(function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,Yd(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(qg(t,e.targetId,s.To),s.snapshot)]}}))}))}(t,e,n,r)},[4,Yd(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Tg(e,i.Bn),s=o._o(i.documents),a=vf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),qg(t,n,u.To),c=new Eg(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function Cg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i;return Ei(this,(function(o){switch(o.label){case 0:return n=Bc(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!lh(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,$d(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),jv(n.remoteStore,r.targetId),Vg(n,r.targetId)})).catch(yd)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return Vg(n,r.targetId),[4,$d(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Rg(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o,s;return Ei(this,(function(a){switch(a.label){case 0:r=rm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=Bc(u),f=Qc.now(),p=c.reduce((function(t,e){return t.add(e.key)}),hf()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],s=Uh(o,l.get(o.key));null!=s&&n.push(new Bh(o.key,s,Dl(s.value.mapValue),xh.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Zh(Hc)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Gg(r,i.changes)];case 3:return a.sent(),[4,Jv(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=cg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function Dg(t,e){return Ti(this,void 0,void 0,(function(){var n,r;return Ei(this,(function(i){switch(i.label){case 0:n=Bc(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Wd(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(qc(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?qc(r.bo):t.removedDocuments.size>0&&(qc(r.bo),r.bo=!1))})),[4,Gg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,yd(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Og(t,e,n){var r=Bc(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Bc(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&bg(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function xg(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o,s,a,u;return Ei(this,(function(c){switch(c.label){case 0:return(r=Bc(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new Zh(vl.comparator)).insert(o,Ol.newNoDocument(o,Xc.min())),a=hf().add(o),u=new df(Xc.min(),new Map,new nf(Hc),s,a),[4,Dg(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),Kg(r),[3,4];case 2:return[4,$d(r.localStore,e,!1).then((function(){return Vg(r,e,n)})).catch(yd)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function Pg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i;return Ei(this,(function(o){switch(o.label){case 0:n=Bc(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Hd(n.localStore,e)];case 2:return i=o.sent(),Ug(n,r,null),Fg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Gg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}}))}))}function Lg(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i;return Ei(this,(function(o){switch(o.label){case 0:r=Bc(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(s=r.localStore,a=e,u=Bc(s),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,a).next((function(n){return qc(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),Ug(r,e,n),Fg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Gg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,yd(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var s,a,u}))}))}function Mg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s;return Ei(this,(function(a){switch(a.label){case 0:Hv((n=Bc(t)).remoteStore)||Mc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,(u=n.localStore,c=Bc(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=cg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}var u,c}))}))}function Fg(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function Ug(t,e,n){var r=Bc(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Vg(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||jg(t,e)}))}function jg(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(jv(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),Kg(t))}function qg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof _g?(t.No.addReference(o.key,e),Bg(t,o)):o instanceof Ig?(Mc("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||jg(t,o.key)):jc()}}function Bg(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Mc("SyncEngine","New document in limbo: "+n),t.So.add(r),Kg(t))}function Kg(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new vl(tl.fromString(e)),r=t.ko.next();t.Co.set(r,new Sg(n)),t.Do=t.Do.insert(n,r),Vv(t.remoteStore,new Vp(uh(eh(n.path)),r,2,Dc.o))}}function Gg(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o,s;return Ei(this,(function(a){switch(a.label){case 0:return r=Bc(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,a){s.push(r.Oo(a,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=jd.Pn(a.targetId,t);o.push(e)}})))})),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l;return Ei(this,(function(h){switch(h.label){case 0:n=Bc(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Sp.forEach(e,(function(e){return Sp.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Sp.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Rp(r=h.sent()))throw r;return Mc("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)s=o[i],a=s.targetId,s.fromCache||(u=n.Fn.get(a),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(a,l));return[2]}}))}))}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function Hg(t,e){return Ti(this,void 0,void 0,(function(){var n,r;return Ei(this,(function(i){switch(i.label){case 0:return(n=Bc(t)).currentUser.isEqual(e)?[3,3]:(Mc("SyncEngine","User change. New user:",e.toKey()),[4,Gd(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new xc(Oc.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Gg(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function zg(t,e){var n=Bc(t),r=n.Co.get(e);if(r&&r.bo)return hf().add(r.key);var i=hf(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Wg(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i;return Ei(this,(function(o){switch(o.label){case 0:return[4,Yd((n=Bc(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&qg(n,e.targetId,i.To),i)]}}))}))}function Qg(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){return[2,Zd((e=Bc(t)).localStore).then((function(t){return Gg(e,t)}))]}))}))}function Xg(t,e,n,r){return Ti(this,void 0,void 0,(function(){var i,o;return Ei(this,(function(s){switch(s.label){case 0:return[4,(a=(i=Bc(t)).localStore,u=e,c=Bc(a),l=Bc(c._n),c.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return l.jt(t,u).next((function(e){return e?c.Mn.pn(t,e):Sp.resolve(null)}))})))];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,Jv(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Ug(i,e,r||null),Fg(i,e),function(t,e){Bc(Bc(t)._n).Gt(e)}(i.localStore,e)):jc(),s.label=4;case 4:return[4,Gg(i,o)];case 5:return s.sent(),[3,7];case 6:Mc("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}var a,u,c,l}))}))}function $g(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c;return Ei(this,(function(l){switch(l.label){case 0:return nm(n=Bc(t)),rm(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Yg(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,og(n.remoteStore,!0)];case 2:for(l.sent(),o=0,s=i;o<s.length;o++)a=s[o],Vv(n.remoteStore,a);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return Vg(n,e),$d(n.localStore,e,!0)})),jv(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,Yg(n,u)];case 5:return l.sent(),(h=Bc(n)).Co.forEach((function(t,e){jv(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new Zh(vl.comparator),n.$o=!1,[4,og(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function Yg(t,e,n){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s,a,u,c,l,h,f,p,d,v;return Ei(this,(function(g){switch(g.label){case 0:n=Bc(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(a=s[o],u=void 0,(c=n.Vo.get(a))&&0!==c.length?[4,Xd(n.localStore,uh(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,Wg(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Jd(n.localStore,a)];case 8:return v=g.sent(),[4,Xd(n.localStore,v)];case 9:return u=g.sent(),[4,Ng(n,Jg(v),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function Jg(t){return th(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Zg(t){var e=Bc(t);return Bc(Bc(e.localStore).persistence).fn()}function tm(t,e,n,r){return Ti(this,void 0,void 0,(function(){var i,o,s;return Ei(this,(function(a){switch(a.label){case 0:return(i=Bc(t)).$o?(Mc("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Zd(i.localStore)];case 3:return o=a.sent(),s=df.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Gg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,$d(i.localStore,e,!0)];case 6:return a.sent(),Vg(i,e,r),[3,8];case 7:jc(),a.label=8;case 8:return[2]}}))}))}function em(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o,s,a,u,c,l,h,f;return Ei(this,(function(p){switch(p.label){case 0:if(!(r=nm(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(s=o[i],r.Vo.has(s)?(Mc("SyncEngine","Adding an already active target "+s),[3,5]):[4,Jd(r.localStore,s)]):[3,6];case 2:return a=p.sent(),[4,Xd(r.localStore,a)];case 3:return u=p.sent(),[4,Ng(r,Jg(a),u.targetId,!1)];case 4:p.sent(),Vv(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Ei(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,$d(r.localStore,t,!1).then((function(){jv(r.remoteStore,t),Vg(r,t)})).catch(yd)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function nm(t){var e=Bc(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Dg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zg.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=xg.bind(null,e),e.vo._r=mg.bind(null,e.eventManager),e.vo.Mo=yg.bind(null,e.eventManager),e}function rm(t){var e=Bc(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Pg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Lg.bind(null,e),e}var im=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return this.R=Cv(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Kd(this.persistence,new qd,t.initialUser,this.R)},t.prototype.qo=function(t){return new uv(lv.bs,this.R)},t.prototype.Bo=function(t){return new _v},t.prototype.terminate=function(){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),om=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return _i(e,t),e.prototype.initialize=function(e){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,tv(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,rm(this.Qo.syncEngine)];case 4:return n.sent(),[4,Jv(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Kd(this.persistence,new qd,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new _d(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Ud(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?od.withCacheSize(this.cacheSizeBytes):od.DEFAULT;return new Ld(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,kv(),Nv(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new _v},e}(im),sm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return _i(e,t),e.prototype.initialize=function(e){return Ti(this,void 0,void 0,(function(){var n,r=this;return Ei(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof wv?(this.sharedClientState.syncEngine={ui:Xg.bind(null,n),ai:tm.bind(null,n),hi:em.bind(null,n),fn:Zg.bind(null,n),ci:Qg.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return Ti(r,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return[4,$g(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=kv();if(!wv.yt(e))throw new xc(Oc.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ud(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new wv(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(om),am=function(){function t(){}return t.prototype.initialize=function(t,e){return Ti(this,void 0,void 0,(function(){var n=this;return Ei(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Og(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Hg.bind(null,this.syncEngine),[4,og(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new dg},t.prototype.createDatastore=function(t){var e,n,r=Cv(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new Av(e));return n=t.credentials,new Pv(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Og(s.syncEngine,t,0)},o=Tv.yt()?new Tv:new Iv,new Mv(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,s=t.initialUser,a=t.maxConcurrentLimboResolutions,u=e,c=new Ag(n,r,i,o,s,a),u&&(c.$o=!0),c;var n,r,i,o,s,a,u,c},t.prototype.terminate=function(){return function(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return e=Bc(t),Mc("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,Uv(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),um=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),cm=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Ti(this,void 0,void 0,(function(){var e,n=this;return Ei(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new xc(Oc.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i,o,s,a;return Ei(this,(function(u){switch(u.label){case 0:return n=Bc(t),r=Mf(n.R)+"/documents",i={documents:e.map((function(t){return Of(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){qc(!!e.found),e.found.name,e.found.updateTime;var n=xf(t,e.found.name),r=Cf(e.found.updateTime),i=new Rl({mapValue:{fields:e.found.fields}});return Ol.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){qc(!!e.missing),qc(!!e.readTime);var n=xf(t,e.missing),r=Cf(e.readTime);return Ol.newNoDocument(n,r)}(e,r):jc());s.set(i.key.toString(),i)})),a=[],[2,(e.forEach((function(t){var e=s.get(t.toString());qc(!!e),a.push(e)})),a)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Qh(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Ti(this,void 0,void 0,(function(){var t,e=this;return Ei(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=vl.fromPath(n);e.mutations.push(new Xh(r,e.precondition(r)))})),[4,function(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i;return Ei(this,(function(o){switch(o.label){case 0:return n=Bc(t),r=Mf(n.R)+"/documents",i={writes:e.map((function(t){return Vf(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw jc();e=Xc.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new xc(Oc.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?xh.updateTime(e):xh.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Xc.min()))throw new xc(Oc.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return xh.updateTime(e)}return xh.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),lm=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Rv(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return Ti(t,void 0,void 0,(function(){var t,e,n=this;return Ei(this,(function(r){return t=new cm(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!fl(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Yh(e)}return!1},t}(),hm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=hv.UNAUTHENTICATED,this.clientId=Gc.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return Ti(r,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return Mc("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new xc(Oc.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Ep;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return Ti(t,void 0,void 0,(function(){var t,n;return Ei(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=cg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function fm(t,e){return Ti(this,void 0,void 0,(function(){var n,r,i=this;return Ei(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Mc("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return Ti(i,void 0,void 0,(function(){return Ei(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Gd(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function pm(t,e){return Ti(this,void 0,void 0,(function(){var n,r;return Ei(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,dm(t)];case 1:return n=i.sent(),Mc("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return Ti(this,void 0,void 0,(function(){var n,r;return Ei(this,(function(i){switch(i.label){case 0:return(n=Bc(t)).asyncQueue.verifyOperationInProgress(),Mc("RemoteStore","RemoteStore received new credentials"),r=Hv(n),n.Or.add(3),[4,Uv(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Fv(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function dm(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Mc("FirestoreClient","Using default OfflineComponentProvider"),[4,fm(t,new im)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function vm(t){return Ti(this,void 0,void 0,(function(){return Ei(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Mc("FirestoreClient","Using default OnlineComponentProvider"),[4,pm(t,new am)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function gm(t){return dm(t).then((function(t){return t.persistence}))}function mm(t){return dm(t).then((function(t){return t.localStore}))}function ym(t){return vm(t).then((function(t){return t.remoteStore}))}function bm(t){return vm(t).then((function(t){return t.syncEngine}))}function wm(t){return Ti(this,void 0,void 0,(function(){var e,n;return Ei(this,(function(r){switch(r.label){case 0:return[4,vm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=kg.bind(null,e.syncEngine),n.onUnlisten=Cg.bind(null,e.syncEngine),n)]}}))}))}function _m(t,e,n){var r=this;void 0===n&&(n={});var i=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(r,void 0,void 0,(function(){var r;return Ei(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new um({next:function(o){e.enqueueAndForget((function(){return gg(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new xc(Oc.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new xc(Oc.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new wg(eh(n.path),o,{includeMetadataChanges:!0,so:!0});return vg(t,s)},[4,wm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Im(t,e,n){var r=this;void 0===n&&(n={});var i=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(r,void 0,void 0,(function(){var r;return Ei(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new um({next:function(n){e.enqueueAndForget((function(){return gg(t,s)})),n.fromCache&&"server"===r.source?i.reject(new xc(Oc.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new wg(n,o,{includeMetadataChanges:!0,so:!0});return vg(t,s)},[4,wm(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var Tm=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},Em=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Sm=new Map,Am=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},km=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(hv.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Nm=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Cm=function(){function t(t){var e=this;this.currentUser=hv.UNAUTHENTICATED,this.oc=new Ep,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Mc("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Mc("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Mc("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(qc("string"==typeof n.accessToken),new Am(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return Ti(n,void 0,void 0,(function(){return Ei(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return qc(null===t||"string"==typeof t),new hv(t)},t}(),Rm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=hv.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Dm=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new Rm(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(hv.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e,n){if(!n)throw new xc(Oc.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function xm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xc(Oc.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Pm(t,e,n,r){if(!0===e&&!0===r)throw new xc(Oc.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Lm(t){if(!vl.isDocumentKey(t))throw new xc(Oc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Mm(t){if(vl.isDocumentKey(t))throw new xc(Oc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Fm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":jc()}function Um(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new xc(Oc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Fm(t);throw new xc(Oc.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Vm(t,e){if(e<=0)throw new xc(Oc.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jm=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new xc(Oc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new xc(Oc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Pm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),qm=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jm({}),this._settingsFrozen=!1,t instanceof Em?(this._databaseId=t,this._credentials=new km):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new xc(Oc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Em(t.options.projectId)}(t),this._credentials=new Cm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new xc(Oc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new xc(Oc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jm(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new km;switch(t.type){case"gapi":var e=t.client;return qc(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Dm(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new xc(Oc.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return this,(t=Sm.get(this))&&(Mc("ComponentProvider","Removing Datastore"),Sm.delete(this),t.terminate()),Promise.resolve();var t},t}(),Bm=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Gm(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Km=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Gm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,eh(r))||this)._path=r,i.type="collection",i}return _i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Bm(this.firestore,null,new vl(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Km);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=qi(t),Om("collection","path",e),t instanceof qm)return Mm(n=tl.fromString.apply(tl,ki([e],r))),new Gm(t,null,n);if(!(t instanceof Bm||t instanceof Gm))throw new xc(Oc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Mm(n=tl.fromString.apply(tl,ki([t.path],r)).child(tl.fromString(e))),new Gm(t.firestore,null,n)}function zm(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=qi(t),1===arguments.length&&(e=Gc.u()),Om("doc","path",e),t instanceof qm)return Lm(n=tl.fromString.apply(tl,ki([e],r))),new Bm(t,null,new vl(n));if(!(t instanceof Bm||t instanceof Gm))throw new xc(Oc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Lm(n=t._path.child(tl.fromString.apply(tl,ki([e],r)))),new Bm(t.firestore,t instanceof Gm?t.converter:null,new vl(n))}function Wm(t,e){return t=qi(t),e=qi(e),(t instanceof Bm||t instanceof Gm)&&(e instanceof Bm||e instanceof Gm)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Qm(t,e){return t=qi(t),e=qi(e),t instanceof Km&&e instanceof Km&&t.firestore===e.firestore&&lh(t._query,e._query)&&t.converter===e.converter}var Xm=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new Rv(this,"async_queue_retry"),this.Tc=function(){var e=Nv();e&&Mc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Nv();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Nv();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return Ti(this,void 0,void 0,(function(){var t,e=this;return Ei(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Rp(t=n.sent()))throw t;return Mc("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Fc("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=ug.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&jc()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return Ti(this,void 0,void 0,(function(){var t;return Ei(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function $m(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Ym=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new Xm,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return _i(e,t),e.prototype._terminate=function(){return this._firestoreClient||Zm(this),this._firestoreClient.terminate()},e}(qm);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t){return t._firestoreClient||Zm(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Zm(t){var e,n,r,i,o,s=t._freezeSettings(),a=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new Tm(n,r,i,(o=s).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new hm(t._credentials,t._queue,a)}function ty(t,e,n){var r=this,i=new Ep;return t.asyncQueue.enqueue((function(){return Ti(r,void 0,void 0,(function(){var r;return Ei(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,fm(t,n)];case 1:return o.sent(),[4,pm(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(s=r=o.sent()).name?s.code===Oc.FAILED_PRECONDITION||s.code===Oc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&s instanceof DOMException)||22===s.code||20===s.code||11===s.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var s}))}))})).then((function(){return i.promise}))}function ey(t){if(t._initialized||t._terminated)throw new xc(Oc.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ny=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new xc(Oc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nl(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),ry=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(il.fromBase64String(e))}catch(n){throw new xc(Oc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}},t.fromUint8Array=function(e){return new t(il.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),iy=function(t){this._methodName=t},oy=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new xc(Oc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new xc(Oc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Hc(this._lat,t._lat)||Hc(this._long,t._long)},t}(),sy=/^__.*__$/,ay=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Bh(t,this.data,this.fieldMask,e,this.fieldTransforms):new qh(t,this.data,e,this.fieldTransforms)},t}(),uy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Bh(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw jc()}}var ly=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return Ry(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(cy(this.Cc)&&sy.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),hy=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Cv(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new ly({Cc:t,methodName:e,Bc:n,path:nl.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function fy(t){var e=t._freezeSettings(),n=Cv(t._databaseId);return new hy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function py(t,e,n,r,i,o){void 0===o&&(o={});var s=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Ay("Data must be an object, but it was:",s,r);var a,u,c=Ey(r,s);if(o.merge)a=new rl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=ky(e,f[h],n);if(!s.contains(p))throw new xc(Oc.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");Dy(l,p)||l.push(p)}a=new rl(l),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new ay(new Rl(c),a,u)}var dy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(iy);function vy(t,e,n){return new ly({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var gy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype._toFieldTransform=function(t){return new Dh(t.path,new Th)},e.prototype.isEqual=function(t){return t instanceof e},e}(iy),my=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return _i(e,t),e.prototype._toFieldTransform=function(t){var e=vy(this,t,!0),n=this.Uc.map((function(t){return Ty(t,e)})),r=new Eh(n);return new Dh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(iy),yy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return _i(e,t),e.prototype._toFieldTransform=function(t){var e=vy(this,t,!0),n=this.Uc.map((function(t){return Ty(t,e)})),r=new Ah(n);return new Dh(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(iy),by=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return _i(e,t),e.prototype._toFieldTransform=function(t){var e=new Nh(t.R,yh(t.R,this.Kc));return new Dh(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(iy);function wy(t,e,n,r){var i=t.qc(1,e,n);Ay("Data must be an object, but it was:",i,r);var o=[],s=Rl.empty();Yc(r,(function(t,r){var a=Cy(e,t,n);r=qi(r);var u=i.$c(a);if(r instanceof dy)o.push(a);else{var c=Ty(r,u);null!=c&&(o.push(a),s.set(a,c))}}));var a=new rl(o);return new uy(s,a,i.fieldTransforms)}function _y(t,e,n,r,i,o){var s=t.qc(1,e,n),a=[ky(e,r,n)],u=[i];if(o.length%2!=0)throw new xc(Oc.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(ky(e,o[c])),u.push(o[c+1]);for(var l=[],h=Rl.empty(),f=a.length-1;f>=0;--f)if(!Dy(l,a[f])){var p=a[f],d=u[f];d=qi(d);var v=s.$c(p);if(d instanceof dy)l.push(p);else{var g=Ty(d,v);null!=g&&(l.push(p),h.set(p,g))}}var m=new rl(l);return new uy(h,m,s.fieldTransforms)}function Iy(t,e,n,r){return void 0===r&&(r=!1),Ty(n,t.qc(r?4:3,e))}function Ty(t,e){if(Sy(t=qi(t)))return Ay("Unsupported field value:",e,t),Ey(t,e);if(t instanceof iy)return function(t,e){if(!cy(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ty(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=qi(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yh(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=Qc.fromDate(t);return{timestampValue:Af(e.R,n)}}if(t instanceof Qc)return n=new Qc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Af(e.R,n)};if(t instanceof oy)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ry)return{bytesValue:kf(e.R,t._byteString)};if(t instanceof Bm){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Rf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+Fm(t))}(t,e)}function Ey(t,e){var n={};return Jc(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yc(t,(function(t,r){var i=Ty(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Sy(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Qc||t instanceof oy||t instanceof ry||t instanceof Bm||t instanceof iy)}function Ay(t,e,n){if(!Sy(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=Fm(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}var i}function ky(t,e,n){if((e=qi(e))instanceof ny)return e._internalPath;if("string"==typeof e)return Cy(t,e);throw Ry("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Ny=new RegExp("[~\\*/\\[\\]]");function Cy(t,e,n){if(e.search(Ny)>=0)throw Ry("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(ny.bind.apply(ny,ki([void 0],e.split(".")))))._internalPath}catch(Rb){throw Ry("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Ry(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new xc(Oc.INVALID_ARGUMENT,(a+=". ")+t+u)}function Dy(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Bm(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new xy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Py("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),xy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Oy);function Py(t,e){return"string"==typeof e?Cy(t,e):e instanceof ny?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ly=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),My=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return _i(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Fy(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Py("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Oy),Fy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(My),Uy=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Ly(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Fy(n._firestore,n._userDataWriter,r.key,r,new Ly(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new xc(Oc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Fy(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ly(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Fy(t._firestore,t._userDataWriter,e.doc.key,e.doc,new Ly(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:Vy(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function Vy(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return jc()}}function jy(t,e){return t instanceof My&&e instanceof My?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Uy&&e instanceof Uy&&t._firestore===e._firestore&&Qm(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(t){if(rh(t)&&0===t.explicitOrderBy.length)throw new xc(Oc.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var By=function(){};function Ky(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Gy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return _i(e,t),e.prototype._apply=function(t){var e,n,r,i=fy(t.firestore),o=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new xc(Oc.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){Yy(s,o);for(var u=[],c=0,l=s;c<l.length;c++){var h=l[c];u.push($y(r,t,h))}a={arrayValue:{values:u}}}else a=$y(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||Yy(s,o),a=Iy(n,"where",s,"in"===o||"not-in"===o);var f=Ul.create(i,o,a);return function(t,e){if(e.g()){var n=oh(t);if(null!==n&&!n.isEqual(e.field))throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=ih(t);null!==r&&Jy(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new xc(Oc.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new xc(Oc.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new Km(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(By),Hy=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return _i(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Xl(e,n);return function(t,e){if(null===ih(t)){var n=oh(t);null!==n&&Jy(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new Km(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new Zl(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(By),zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return _i(e,t),e.prototype._apply=function(t){return new Km(t.firestore,t.converter,ch(t._query,this.zc,this.Hc))},e}(By),Wy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return _i(e,t),e.prototype._apply=function(t){var e,n,r=Xy(t,this.type,this.Jc,this.Yc);return new Km(t.firestore,t.converter,(e=t._query,n=r,new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(By),Qy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return _i(e,t),e.prototype._apply=function(t){var e,n,r=Xy(t,this.type,this.Jc,this.Yc);return new Km(t.firestore,t.converter,(e=t._query,n=r,new Zl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(By);function Xy(t,e,n,r){if(n[0]=qi(n[0]),n[0]instanceof Oy)return function(t,e,n,r,i){if(!r)throw new xc(Oc.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=ah(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Tl(e,r.key));else{var c=r.data.field(u.field);if(cl(c))throw new xc(Oc.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Wl(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=fy(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new xc(Oc.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!sh(t)&&-1!==c.indexOf("/"))throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(tl.fromString(c));if(!vl.isDocumentKey(l))throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new vl(l);a.push(Tl(e,h))}else{var f=Iy(n,r,c);a.push(f)}}return new Wl(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function $y(t,e,n){if("string"==typeof(n=qi(n))){if(""===n)throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!sh(e)&&-1!==n.indexOf("/"))throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(tl.fromString(n));if(!vl.isDocumentKey(r))throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Tl(t,new vl(r))}if(n instanceof Bm)return Tl(t,n._key);throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Fm(n)+".")}function Yy(t,e){if(!Array.isArray(t)||0===t.length)throw new xc(Oc.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new xc(Oc.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Jy(t,e,n){if(!n.isEqual(e))throw new xc(Oc.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zy=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),gl(t)){case 0:return null;case 1:return t.booleanValue;case 2:return al(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(ul(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw jc()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Yc(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new oy(al(t.latitude),al(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=ll(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(hl(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=sl(t);return new Qc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=tl.fromString(t);qc(tp(n));var r=new Em(n.get(1),n.get(3)),i=new vl(n.popFirst(5));return r.isEqual(e)||Fc("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tb(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var eb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return _i(e,t),e.prototype.convertBytes=function(t){return new ry(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bm(this.firestore,null,e)},e}(Zy),nb=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=fy(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=rb(t,this._firestore),i=tb(r.converter,e,n),o=py(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,xh.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=rb(t,this._firestore);return o="string"==typeof(e=qi(e))||e instanceof ny?_y(this._dataReader,"WriteBatch.update",s._key,e,n,r):wy(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,xh.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=rb(t,this._firestore);return this._mutations=this._mutations.concat(new Qh(e._key,xh.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new xc(Oc.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb(t,e){if((t=qi(t)).firestore!==e)throw new xc(Oc.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ib=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return _i(e,t),e.prototype.convertBytes=function(t){return new ry(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Bm(this.firestore,null,e)},e}(Zy);function ob(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Um(t,Bm);var o=Um(t.firestore,Ym),s=fy(o);return ab(o,[("string"==typeof(e=qi(e))||e instanceof ny?_y(s,"updateDoc",t._key,e,n,r):wy(s,"updateDoc",t._key,e)).toMutation(t._key,xh.exists(!0))])}function sb(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=qi(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||$m(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if($m(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Bm)c=Um(t.firestore,Ym),l=eh(t._key.path),u={next:function(e){i[a]&&i[a](ub(c,t,e))},error:i[a+1],complete:i[a+2]};else{var p=Um(t,Km);c=Um(p.firestore,Ym),l=p._query;var d=new ib(c);u={next:function(t){i[a]&&i[a](new Uy(c,d,p,t))},error:i[a+1],complete:i[a+2]},qy(t._query)}return function(t,e,n,r){var i=this,o=new um(r),s=new wg(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return Ti(i,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return e=vg,[4,wm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return Ti(i,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return e=gg,[4,wm(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}}))}))}))}}(Jm(c),l,h,u)}function ab(t,e){return function(t,e){var n=this,r=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(n,void 0,void 0,(function(){var n;return Ei(this,(function(i){switch(i.label){case 0:return n=Rg,[4,bm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Jm(t),e)}function ub(t,e,n){var r=n.docs.get(e._key),i=new ib(t);return new My(t,i,e._key,r,new Ly(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return _i(e,t),e.prototype.get=function(e){var n=this,r=rb(e,this._firestore),i=new ib(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new My(n._firestore,i,r._key,t._document,new Ly(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=fy(t)}return t.prototype.get=function(t){var e=this,n=rb(t,this._firestore),r=new eb(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return jc();var i=t[0];if(i.isFoundDocument())return new Oy(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Oy(e._firestore,r,n._key,null,n.converter);throw jc()}))},t.prototype.set=function(t,e,n){var r=rb(t,this._firestore),i=tb(r.converter,e,n),o=py(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=rb(t,this._firestore);return o="string"==typeof(e=qi(e))||e instanceof ny?_y(this._dataReader,"Transaction.update",s._key,e,n,r):wy(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=rb(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(){if("undefined"==typeof Uint8Array)throw new xc(Oc.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function hb(){if("undefined"==typeof atob)throw new xc(Oc.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var fb=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return hb(),new t(ry.fromBase64String(e))},t.fromUint8Array=function(e){return lb(),new t(ry.fromUint8Array(e))},t.prototype.toBase64=function(){return hb(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return lb(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),pb=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ey(t=Um(t,Ym));var n=Jm(t),r=t._freezeSettings(),i=new am;return ty(n,i,new om(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ey(t=Um(t,Ym));var e=Jm(t),n=t._freezeSettings(),r=new am;return ty(e,r,new sm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new xc(Oc.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Ep;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return Ti(e,void 0,void 0,(function(){var e;return Ei(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return kp.yt()?(e=t+"main",[4,kp.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Ud(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),db=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Em||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||Uc("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=Um(t,qm))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Uc("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=function(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Ii({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ni.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),Ni.encodeString(JSON.stringify(o),!1),""].join(".")}(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new xc(Oc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Nm(new Am(o,new hv(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Ti(e,void 0,void 0,(function(){var e,n;return Ei(this,(function(r){switch(r.label){case 0:return[4,gm(t)];case 1:return e=r.sent(),[4,ym(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=Bc(i),o.Or.delete(0),Fv(o))]}var i,o}))}))}))}(Jm(Um(this._delegate,Ym)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return Ti(e,void 0,void 0,(function(){var e,n;return Ei(this,(function(r){switch(r.label){case 0:return[4,gm(t)];case 1:return e=r.sent(),[4,ym(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return(e=Bc(t)).Or.add(0),[4,Uv(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Jm(Um(this._delegate,Ym)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Pm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(e,void 0,void 0,(function(){var e;return Ei(this,(function(r){switch(r.label){case 0:return e=Mg,[4,bm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Jm(Um(this._delegate,Ym)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new um(e);return t.asyncQueue.enqueueAndForget((function(){return Ti(n,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return e=function(t,e){Bc(t).Gr.add(e),e.next()},[4,wm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return Ti(n,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return e=function(t,e){Bc(t).Gr.delete(e)},[4,wm(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Jm(e=Um(e,Ym)),$m(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new xc(Oc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Nb(this,Hm(this._delegate,t))}catch(e){throw wb(e,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new bb(this,zm(this._delegate,t))}catch(e){throw wb(e,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Sb(this,function(t,e){if(t=Um(t,qm),Om("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xc(Oc.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Km(t,null,(n=e,new Zl(tl.emptyPath(),n)));var n}(this._delegate,t))}catch(e){throw wb(e,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(n,void 0,void 0,(function(){var n;return Ei(this,(function(i){switch(i.label){case 0:return[4,(o=t,vm(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new lm(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(Jm(e=this._delegate),(function(r){return function(e){return t(new gb(n,e))}(new cb(e,r))}))},t.prototype.batch=function(){var t=this;return Jm(this._delegate),new mb(new nb(this._delegate,(function(e){return ab(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new xc(Oc.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new xc(Oc.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),vb=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return _i(e,t),e.prototype.convertBytes=function(t){return new fb(new ry(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return bb.tu(e,this.firestore,null)},e}(Zy);var gb=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new vb(t)}return t.prototype.get=function(t){var e=this,n=Cb(t);return this._delegate.get(n).then((function(t){return new Tb(e._firestore,new My(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=Cb(t);return n?(xm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ki([s,e,n],i)),this},t.prototype.delete=function(t){var e=Cb(t);return this._delegate.delete(e),this},t}(),mb=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=Cb(t);return n?(xm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Cb(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,ki([s,e,n],i)),this},t.prototype.delete=function(t){var e=Cb(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),yb=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Fy(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Eb(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new vb(e),n),i.set(n,o)),o},t}();yb.nu=new WeakMap;var bb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vb(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new xc(Oc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Bm(n._delegate,r,new vl(e)))},t.tu=function(e,n,r){return new t(n,new Bm(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Nb(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Nb(this.firestore,Hm(this._delegate,t))}catch(e){throw wb(e,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=qi(t))instanceof Bm&&Wm(this._delegate,t)},t.prototype.set=function(t,e){e=xm("DocumentReference.set",e);try{return function(t,e,n){t=Um(t,Bm);var r=Um(t.firestore,Ym),i=tb(t.converter,e,n);return ab(r,[py(fy(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,xh.none())])}(this._delegate,t,e)}catch(n){throw wb(n,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?ob(this._delegate,t):ob.apply(void 0,ki([this._delegate,t,e],n))}catch(i){throw wb(i,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return ab(Um((t=this._delegate).firestore,Ym),[new Qh(t._key,xh.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_b(e),i=Ib(e,(function(e){return new Tb(t.firestore,new My(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return sb(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Um(t,Bm);var e=Um(t.firestore,Ym),n=Jm(e),r=new ib(e);return function(t,e){var n=this,r=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(n,void 0,void 0,(function(){var n;return Ei(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i;return Ei(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(s=t,a=e,u=Bc(s),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,a)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new xc(Oc.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=cg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var s,a,u}))}))},[4,mm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new My(e,r,t._key,n,new Ly(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Um(t,Bm);var e=Um(t.firestore,Ym);return _m(Jm(e),t._key,{source:"server"}).then((function(n){return ub(e,t,n)}))}(this._delegate):function(t){t=Um(t,Bm);var e=Um(t.firestore,Ym);return _m(Jm(e),t._key).then((function(n){return ub(e,t,n)}))}(this._delegate)).then((function(t){return new Tb(e.firestore,new My(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(yb.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function wb(t,e,n){return t.message=t.message.replace(e,n),t}function _b(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!$m(r))return r}return{}}function Ib(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=$m(t[0])?t[0]:$m(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new bb(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return jy(this._delegate,t._delegate)},t}(),Eb=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return _i(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Tb),Sb=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new vb(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Ky(this._delegate,(o=r,s=i=n,a=Py("where",e),new Gy(a,s,o))))}catch(i){throw wb(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,s,a},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Ky(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Py("orderBy",t);return new Hy(r,n)}(e,n)))}catch(r){throw wb(r,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Ky(this._delegate,(Vm("limit",n=e),new zy("limit",n,"F"))))}catch(r){throw wb(r,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Ky(this._delegate,(Vm("limitToLast",n=e),new zy("limitToLast",n,"L"))))}catch(r){throw wb(r,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ky(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wy("startAt",t,!0)}.apply(void 0,e)))}catch(r){throw wb(r,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ky(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Wy("startAfter",t,!1)}.apply(void 0,e)))}catch(r){throw wb(r,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ky(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qy("endBefore",t,!0)}.apply(void 0,e)))}catch(r){throw wb(r,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Ky(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Qy("endAt",t,!1)}.apply(void 0,e)))}catch(r){throw wb(r,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Qm(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Um(t,Km);var e=Um(t.firestore,Ym),n=Jm(e),r=new ib(e);return function(t,e){var n=this,r=new Ep;return t.asyncQueue.enqueueAndForget((function(){return Ti(n,void 0,void 0,(function(){var n;return Ei(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o,s,a;return Ei(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Yd(t,e,!0)];case 1:return a=u.sent(),r=new Tg(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=cg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}}))}))},[4,mm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Uy(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Um(t,Km);var e=Um(t.firestore,Ym),n=Jm(e),r=new ib(e);return Im(n,t._query,{source:"server"}).then((function(n){return new Uy(e,r,t,n)}))}(this._delegate):function(t){t=Um(t,Km);var e=Um(t.firestore,Ym),n=Jm(e),r=new ib(e);return qy(t._query),Im(n,t._query).then((function(n){return new Uy(e,r,t,n)}))}(this._delegate)).then((function(t){return new kb(e.firestore,new Uy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=_b(e),i=Ib(e,(function(e){return new kb(t.firestore,new Uy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return sb(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(yb.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Ab=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Eb(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),kb=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Sb(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Eb(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Ab(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Eb(n._firestore,r))}))},t.prototype.isEqual=function(t){return jy(this._delegate,t._delegate)},t}(),Nb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return _i(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new bb(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new bb(this.firestore,void 0===t?zm(this._delegate):zm(this._delegate,t))}catch(e){throw wb(e,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,s=this;return(e=this._delegate,n=t,r=Um(e.firestore,Ym),i=zm(e),o=tb(e.converter,n),ab(r,[py(fy(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,xh.exists(!1))]).then((function(){return i}))).then((function(t){return new bb(s.firestore,t)}))},e.prototype.isEqual=function(t){return Wm(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(yb.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(Sb);function Cb(t){return Um(t,Bm)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rb,Db=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(ny.bind.apply(ny,ki([void 0],t)))}return t.documentId=function(){return new t(nl.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=qi(t))instanceof ny&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Ob=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new gy("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new dy("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new my("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new yy("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new by("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),xb={Firestore:db,GeoPoint:oy,Timestamp:Qc,Blob:fb,Transaction:gb,WriteBatch:mb,DocumentReference:bb,DocumentSnapshot:Tb,Query:Sb,QueryDocumentSnapshot:Eb,QuerySnapshot:kb,CollectionReference:Nb,FieldPath:Db,FieldValue:Ob,setLogLevel:function(t){var e;e=t,Pc.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(Rb=mo).INTERNAL.registerComponent(new Bi("firestore",(function(t){return function(t,e){return new db(t,new Ym(t,e),new pb)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},xb))),Rb.registerVersion("@firebase/firestore","2.3.8"),function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function r(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function i(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:r(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(n){e.reject(n)}}function r(){this.a=null}function o(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(r){this.f(r)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(n){return void this.g(n)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(r){n.reject(r)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(n){o(n)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=o,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=i(t),s=r.next();!s.done;s=r.next())o(s.value).Ra(e,n)}))},e.all=function(t){var n=i(t),r=n.next();return r.done?o([]):new e((function(t,e){function i(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,o(r.value).Ra(i(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var o=o||{},s=this||self,a=/^[\w+/_-]+[=]{0,2}$/,u=null;function c(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&a.test(t)?t:""}function l(){}function h(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function f(t){var e=h(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==h(t)}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function y(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function b(t,e,n){return(b=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:y).apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function I(t){return t}function T(t,e,n){this.code=A+t,this.message=e||k[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new T(e.substring(A.length),t.message,t.serverResponse):null}_(T,Error),T.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},T.prototype.toJSON=function(){return this.w()};var S,A="auth/",k={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},N={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function C(t){for(var e in N)if(N[e].id===t)return{firebaseEndpoint:(t=N[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function R(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(e){return!1}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function x(t,e){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function P(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function L(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function M(){this.b=this.a=null}S=C("__EID__")?"__EID__":void 0,_(D,Error),D.prototype.name="CustomError",_(O,D),O.prototype.name="AssertionError",P.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var F=new P((function(){return new V}),(function(t){t.reset()}));function U(){var t=ge,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function V(){this.next=this.b=this.a=null}M.prototype.add=function(t,e){var n=F.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},q=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var B=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},K=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function H(t,e){return 0<=j(t,e)}function z(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function W(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function X(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var $,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},J=/&/g,Z=/</g,tt=/>/g,et=/"/g,nt=/'/g,rt=/\x00/g,it=/[\x00&<>"']/;function ot(t,e){return-1!=t.indexOf(e)}function st(t,e){return t<e?-1:t>e?1:0}t:{var at=s.navigator;if(at){var ut=at.userAgent;if(ut){$=ut;break t}}$=""}function ct(t){return ot($,t)}function lt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ht(t){for(var e in t)return!1;return!0}function ft(t){var e,n={};for(e in t)n[e]=t[e];return n}var pt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function dt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<pt.length;o++)n=pt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(a){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(d(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(a){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function gt(t,e){this.a=t===wt&&e||"",this.b=bt}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===bt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}gt.prototype.ta=!0,gt.prototype.sa=function(){return this.a},gt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt,bt={},wt={};function _t(){if(void 0===yt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:I,createScript:I,createScriptURL:I})}catch(n){s.console&&s.console.error(n.message)}yt=t}else yt=t}return yt}function It(t,e){this.a=e===kt?t:""}function Tt(t){return t instanceof It&&t.constructor===It?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+h(t)),"type_error:TrustedResourceUrl")}function Et(t,e){var n=mt(t);if(!At.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=_t();return new It(t=e?e.createScriptURL(t):t,kt)}(t=n.replace(St,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof gt?mt(t):encodeURIComponent(String(t))})))}It.prototype.ta=!0,It.prototype.sa=function(){return this.a.toString()},It.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var St=/%{(\w+)}/g,At=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,kt={};function Nt(t,e){this.a=e===Lt?t:""}function Ct(t){return t instanceof Nt&&t.constructor===Nt?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+h(t)),"type_error:SafeUrl")}Nt.prototype.ta=!0,Nt.prototype.sa=function(){return this.a.toString()},Nt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Rt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Dt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Ot=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function xt(t){if(t instanceof Nt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Ot.test(t))t=new Nt(t,Lt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Dt);t=e&&Rt.test(e[1])?new Nt(t,Lt):null}return t}function Pt(t){return t instanceof Nt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Ot.test(t)||(t="about:invalid#zClosurez"),new Nt(t,Lt))}var Lt={},Mt=new Nt("about:invalid#zClosurez",Lt);function Ft(t,e,n){this.a=n===Ut?t:""}Ft.prototype.ta=!0,Ft.prototype.sa=function(){return this.a.toString()},Ft.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Ut={};function Vt(t,e,n,r){return t=t instanceof Nt?t:Pt(t),e=e||s,n=n instanceof gt?mt(n):n||"",e.open(Ct(t),n,r,void 0)}function jt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function qt(t){return it.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(J,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Z,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(tt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(et,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(nt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(rt,"&#0;"))),t}function Bt(t){return Bt[" "](t),t}Bt[" "]=l;var Kt,Gt=ct("Opera"),Ht=ct("Trident")||ct("MSIE"),zt=ct("Edge"),Wt=zt||Ht,Qt=ct("Gecko")&&!(ot($.toLowerCase(),"webkit")&&!ct("Edge"))&&!(ct("Trident")||ct("MSIE"))&&!ct("Edge"),Xt=ot($.toLowerCase(),"webkit")&&!ct("Edge");function $t(){var t=s.document;return t?t.documentMode:void 0}t:{var Yt="",Jt=function(){var t=$;return Qt?/rv:([^\);]+)(\)|;)/.exec(t):zt?/Edge\/([\d\.]+)/.exec(t):Ht?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Xt?/WebKit\/(\S+)/.exec(t):Gt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Jt&&(Yt=Jt?Jt[1]:""),Ht){var Zt=$t();if(null!=Zt&&Zt>parseFloat(Yt)){Kt=String(Zt);break t}}Kt=Yt}var te,ee={};function ne(t){return function(t,e){var n=ee;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=Y(String(Kt)).split("."),r=Y(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=st(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||st(0==s[2].length,0==a[2].length)||st(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}if(s.document&&Ht){var re=$t();te=re||(parseInt(Kt,10)||void 0)}else te=void 0;var ie=te;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Zo){}var oe=!Ht||9<=Number(ie);function se(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function ae(t,e){lt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:le.hasOwnProperty(n)?t.setAttribute(le[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var ue,ce,le={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function he(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!f(o)||d(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(d(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}q(s?X(o):o,r)}}}function fe(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function pe(t){s.setTimeout((function(){throw t}),0)}function de(t,e){ce||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);ce=function(){t.then(me)}}else ce=function(){var t=me;!p(s.setImmediate)||s.Window&&s.Window.prototype&&!ct("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(ue||(ue=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ct("Presto")&&(t=function(){var t=fe(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=b((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ct("Trident")&&!ct("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),ue(t)):s.setImmediate(t)}}(),ve||(ce(),ve=!0),ge.add(t,e)}var ve=!1,ge=new M;function me(){for(var t;t=U();){try{t.a.call(t.b)}catch(e){pe(e)}L(F,t)}ve=!1}function ye(t,e){if(this.a=be,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Oe(n,we,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(Rb){}Oe(n,_e,t)}))}catch(r){Oe(this,_e,r)}}var be=0,we=2,_e=3;function Ie(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Ie.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Te=new P((function(){return new Ie}),(function(t){t.reset()}));function Ee(t,e,n){var r=Te.get();return r.g=t,r.b=e,r.f=n,r}function Se(t){if(t instanceof ye)return t;var e=new ye(l);return Oe(e,we,t),e}function Ae(t){return new ye((function(e,n){n(t)}))}function ke(t,e,n){xe(t,e,n,null)||de(w(e,t))}function Ne(t){return new ye((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)ke(t[o],w(i,o,!0),w(i,o,!1));else e(r)}))}function Ce(t,e){if(t.a==be)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==be&&1==r?Ce(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Le(n),Me(n,i,_e,e)))}t.c=null}else Oe(t,_e,e)}function Re(t,e){t.b||t.a!=we&&t.a!=_e||Pe(t),t.f?t.f.next=e:t.b=e,t.f=e}function De(t,e,n,r){var i=Ee(null,null,null);return i.a=new ye((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(s){o(s)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(s){o(s)}}:o})),i.a.c=t,Re(t,i),i.a}function Oe(t,e,n){t.a==be&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,xe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,Pe(t),e!=_e||n instanceof Ve||function(t,e){t.g=!0,de((function(){t.g&&Ue.call(null,e)}))}(t,n)))}function xe(t,e,n,r){if(t instanceof ye)return Re(t,Ee(e||l,n||null,r)),!0;if(R(t))return t.then(e,n,r),!0;if(d(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){a||(a=!0,r.call(i,t))}function s(t){a||(a=!0,n.call(i,t))}var a=!1;try{e.call(t,s,o)}catch(u){o(u)}}(t,i,e,n,r),!0}catch(o){return n.call(r,o),!0}return!1}function Pe(t){t.h||(t.h=!0,de(t.gc,t))}function Le(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Me(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Fe(e,n,r);else try{e.c?e.g.call(e.f):Fe(e,n,r)}catch(Rb){Ue.call(null,Rb)}L(Te,e)}function Fe(t,e,n){e==we?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ye.prototype.then=function(t,e,n){return De(this,p(t)?t:null,p(e)?e:null,n)},ye.prototype.$goog_Thenable=!0,(t=ye.prototype).oa=function(t,e){return(t=Ee(t,t,e)).c=!0,Re(this,t),this},t.o=function(t,e){return De(this,null,t,e)},t.cancel=function(t){if(this.a==be){var e=new Ve(t);de((function(){Ce(this,e)}),this)}},t.$c=function(t){this.a=be,Oe(this,we,t)},t.ad=function(t){this.a=be,Oe(this,_e,t)},t.gc=function(){for(var t;t=Le(this);)Me(this,t,this.a,this.i);this.h=!1};var Ue=pe;function Ve(t){D.call(this,t)}function je(){this.ya=this.ya,this.pa=this.pa}_(Ve,D),Ve.prototype.name="cancel";var qe={};function Be(t){if(!t.ya&&(t.ya=!0,t.Da(),0)){var e=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(t);delete qe[e]}}je.prototype.ya=!1,je.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Ke=Object.freeze||function(t){return t},Ge=!Ht||9<=Number(ie),He=Ht&&!ne("9"),ze=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",l,e),s.removeEventListener("test",l,e)}catch(n){}return t}();function We(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Qe(t,e){if(We.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Qt){t:{try{Bt(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Xe[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}We.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Qe,We);var Xe=Ke({2:"touch",3:"pen",4:"mouse"});Qe.prototype.preventDefault=function(){Qe.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,He)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}},Qe.prototype.g=function(){return this.a};var $e="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Je(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++Ye,this.wa=this.Qa=!1}function Ze(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function tn(t){this.src=t,this.a={},this.b=0}function en(t,e){var n=e.type;n in t.a&&z(t.a[n],e)&&(Ze(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function nn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}tn.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=nn(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new Je(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var rn="closure_lm_"+(1e6*Math.random()|0),on={};function sn(t,e,n,r,i){if(r&&r.once)un(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else n=mn(n),t&&t[$e]?bn(t,e,n,d(r)?!!r.capture:!!r,i):an(t,e,n,!1,r,i)}function an(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=d(i)?!!i.capture:!!i,a=vn(t);if(a||(t[rn]=a=new tn(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=dn,e=Ge?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)ze||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(hn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function un(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)un(t,e[o],n,r,i);else n=mn(n),t&&t[$e]?wn(t,e,n,d(r)?!!r.capture:!!r,i):an(t,e,n,!0,r,i)}function cn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)cn(t,e[o],n,r,i);else r=d(r)?!!r.capture:!!r,n=mn(n),t&&t[$e]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=nn(o=t.a[e],n,r,i))&&(Ze(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=vn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=nn(e,n,r,i)),(n=-1<t?e[t]:null)&&ln(n))}function ln(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[$e])en(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(hn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=vn(e))?(en(n,t),0==n.b&&(n.src=null,e[rn]=null)):Ze(t)}}}function hn(t){return t in on?on[t]:on[t]="on"+t}function fn(t,e,n,r){var i=!0;if((t=vn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=pn(o,r),i=i&&!1!==o)}return i}function pn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&ln(t),n.call(r,e)}function dn(t,e){if(t.wa)return!0;if(!Ge){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Qe(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(a){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=fn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=fn(r[i],t,!1,e),n=n&&o}return n}return pn(t,new Qe(e,this))}function vn(t){return(t=t[rn])instanceof tn?t:null}var gn="__closure_events_fn_"+(1e9*Math.random()>>>0);function mn(t){return p(t)?t:(t[gn]||(t[gn]=function(e){return t.handleEvent(e)}),t[gn])}function yn(){je.call(this),this.v=new tn(this),this.bc=this,this.hb=null}function bn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function wn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function _n(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&en(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function In(t,e,n){if(p(t))n&&(t=b(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=b(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function Tn(t){var e=null;return new ye((function(n,r){-1==(e=In((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function En(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(f(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Sn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(f(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function An(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof An)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function kn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Nn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Nn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Nn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(yn,je),yn.prototype[$e]=!0,yn.prototype.addEventListener=function(t,e,n,r){sn(this,t,e,n,r)},yn.prototype.removeEventListener=function(t,e,n,r){cn(this,t,e,n,r)},yn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new We(t,n);else if(t instanceof We)t.target=t.target||n;else{var i=t;dt(t=new We(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=_n(s,r,!0,t)&&i}if(i=_n(s=t.b=n,r,!0,t)&&i,i=_n(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=_n(s=t.b=e[o],r,!1,t)&&i;return i},yn.prototype.Da=function(){if(yn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ze(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=An.prototype).X=function(){kn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return kn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Nn(this.b,t)?this.b[t]:e},t.set=function(t,e){Nn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Cn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Rn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Rn?(this.i=void 0!==e?e:t.i,Dn(this,t.c),this.l=t.l,this.a=t.a,On(this,t.g),this.f=t.f,xn(this,Jn(t.b)),this.h=t.h):t&&(n=String(t).match(Cn))?(this.i=!!e,Dn(this,n[1]||"",!0),this.l=Un(n[2]||""),this.a=Un(n[3]||"",!0),On(this,n[4]),this.f=Un(n[5]||"",!0),xn(this,n[6]||"",!0),this.h=Un(n[7]||"")):(this.i=!!e,this.b=new zn(null,this.i))}function Dn(t,e,n){t.c=n?Un(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function On(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function xn(t,e,n){e instanceof zn?(t.b=e,function(t,e){e&&!t.f&&(Wn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Xn(this,e),Yn(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Vn(e,Gn)),t.b=new zn(e,t.i))}function Pn(t,e,n){t.b.set(e,n)}function Ln(t,e){return t.b.get(e)}function Mn(t){return t instanceof Rn?new Rn(t):new Rn(t,void 0)}function Fn(t,e,n,r){var i=new Rn(null,void 0);return t&&Dn(i,t),e&&(i.a=e),n&&On(i,n),r&&(i.f=r),i}function Un(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Rn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Vn(e,qn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Vn(e,qn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Vn(n,"/"==n.charAt(0)?Kn:Bn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Vn(n,Hn)),t.join("")},Rn.prototype.resolve=function(t){var e=new Rn(this),n=!!t.c;n?Dn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)On(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ot(i,"./")||ot(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?xn(e,Jn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var qn=/[#\/\?@]/g,Bn=/[#\?:]/g,Kn=/[#\?]/g,Gn=/[#\?@]/g,Hn=/#/g;function zn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Wn(t){t.a||(t.a=new An,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Qn(t){var e=Sn(t);if(void 0===e)throw Error("Keys are undefined");var n=new zn(null,void 0);t=En(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Yn(n,i,o):n.add(i,o)}return n}function Xn(t,e){Wn(t),e=Zn(t,e),Nn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Nn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&kn(t)))}function $n(t,e){return Wn(t),e=Zn(t,e),Nn(t.a.b,e)}function Yn(t,e,n){Xn(t,e),0<n.length&&(t.c=null,t.a.set(Zn(t,e),X(n)),t.b+=n.length)}function Jn(t){var e=new zn;return e.c=t.c,t.a&&(e.a=new An(t.a),e.b=t.b),e}function Zn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function tr(t){var e=[];return nr(new er,t,e),e.join("")}function er(){}function nr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),nr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),or(r,n),n.push(":"),nr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":or(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=zn.prototype).add=function(t,e){Wn(this),this.c=null,t=Zn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Wn(this),this.a.forEach((function(n,r){q(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Wn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Wn(this);var e=[];if("string"==typeof t)$n(this,t)&&(e=Q(e,this.a.get(Zn(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Wn(this),this.c=null,$n(this,t=Zn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var rr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ir=/\uffff/.test("")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function or(t,e){e.push('"',t.replace(ir,(function(t){var e=rr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),rr[t]=e),e})),'"')}function sr(){var t=Ar();return Ht&&!!ie&&11==ie||/Edge\/\d+/.test(t)}function ar(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function ur(t,e){e=e||s.window;var n="about:blank";t&&(n=Ct(xt(t)||Mt)),e.location.href=n}function cr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<cr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function lr(t){return!!((t=(t||Ar()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function hr(t){t=t||s.window;try{t.close()}catch(e){}}function fr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Ar().toLowerCase(),r&&(e.target=r,ot(n,"crios/")&&(e.target="_blank")),Tr(Ar())==_r&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Nt?n:xt(void 0!==n.href?n.href:String(n))||Mt,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ct("iPhone")&&!ct("iPod")&&!ct("iPad")||ct("iPad")||ct("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(vt(s=fe(document,"A"),"HTMLAnchorElement"),e=e instanceof Nt?e:Pt(e),s.href=Ct(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Vt("",r,n,s),t=Ct(e),s&&(Wt&&ot(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+qt(t)+'">',t=new Ft(t=(r=_t())?r.createHTML(t):t,null,Ut),r=s.document)&&(r.write(function(t){return t instanceof Ft&&t.constructor===Ft?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+h(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Vt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(a){}return s}var pr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,dr=/^[^@]+@[^@]+$/;function vr(){var t=null;return new ye((function(e){"complete"==s.document.readyState?e():(t=function(){e()},un(window,"load",t))})).o((function(e){throw cn(window,"load",t),e}))}function gr(t){return t=t||Ar(),!("file:"!==Dr()&&"ionic:"!==Dr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function mr(){var t=s.window;try{return!(!t||t==t.top)}catch(e){return!1}}function yr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function br(){return mo.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":mo.INTERNAL.hasOwnProperty("node")?"Node":yr()?"Worker":"Browser"}function wr(){var t=br();return"ReactNative"===t||"Node"===t}var _r="Firefox",Ir="Chrome";function Tr(t){var e=t.toLowerCase();return ot(e,"opera/")||ot(e,"opr/")||ot(e,"opios/")?"Opera":ot(e,"iemobile")?"IEMobile":ot(e,"msie")||ot(e,"trident/")?"IE":ot(e,"edge/")?"Edge":ot(e,"firefox/")?_r:ot(e,"silk/")?"Silk":ot(e,"blackberry")?"Blackberry":ot(e,"webos")?"Webos":!ot(e,"safari/")||ot(e,"chrome/")||ot(e,"crios/")||ot(e,"android")?!ot(e,"chrome/")&&!ot(e,"crios/")||ot(e,"edge/")?ot(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ir:"Safari"}var Er={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Sr(t,e){e=e||[];var n,r=[],i={};for(n in Er)i[Er[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=br())?r=Tr(i=Ar()):"Worker"===r&&(r=Tr(i=Ar())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Ar(){return s.navigator&&s.navigator.userAgent||""}function kr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Nr(){try{var t=s.localStorage,e=Mr();if(t)return t.setItem(e,"1"),t.removeItem(e),!sr()||!!s.indexedDB}catch(n){return yr()&&!!s.indexedDB}return!1}function Cr(){return(Rr()||"chrome-extension:"===Dr()||gr())&&!wr()&&Nr()&&!yr()}function Rr(){return"http:"===Dr()||"https:"===Dr()}function Dr(){return s.location&&s.location.protocol||null}function Or(t){return!lr(t=t||Ar())&&Tr(t)!=_r}function xr(t){return void 0===t?null:tr(t)}function Pr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Lr(t){if(null!==t)return JSON.parse(t)}function Mr(t){return t||Math.floor(1e9*Math.random()).toString()}function Fr(t){return"Safari"!=Tr(t=t||Ar())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ur(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Vr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Ar(),e=br(),this.b=lr(t)||"ReactNative"===e}function jr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function qr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(n){}return null}function Br(){return!(!kr("fireauth.oauthhelper",s)&&!kr("fireauth.iframe",s))}Vr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Rr()&&"chrome-extension:"!==Dr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Kr,Gr={};function Hr(t){Gr[t]||(Gr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var zr={};Object.defineProperty(zr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(zr,"abcd",{configurable:!0,enumerable:!0,value:2}),Kr=2==zr.abcd}catch(Zo){Kr=!1}function Wr(t,e,n){Kr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Qr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Wr(t,n,e[n])}function Xr(t){var e={};return Qr(e,t),e}function $r(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Wr(e,n,$r(t[n]));return e}function Yr(t){var e=t&&(t[ni]?"phone":null);if(!(e&&t&&t[ei]))throw new T("internal-error","Internal assert: invalid MultiFactorInfo object");Wr(this,"uid",t[ei]),Wr(this,"displayName",t[Zr]||null);var n=null;t[ti]&&(n=new Date(t[ti]).toUTCString()),Wr(this,"enrollmentTime",n),Wr(this,"factorId",e)}function Jr(t){try{var e=new ri(t)}catch(n){e=null}return e}Yr.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Zr="displayName",ti="enrolledAt",ei="mfaEnrollmentId",ni="phoneInfo";function ri(t){Yr.call(this,t),Wr(this,"phoneNumber",t[ni])}function ii(t){var e={},n=t[ui],r=t[li],i=t[hi];if(t=Jr(t[ci]),!i||i!=si&&i!=ai&&!n||i==ai&&!r||i==oi&&!t)throw Error("Invalid checkActionCode response!");i==ai?(e[pi]=n||null,e[vi]=n||null,e[fi]=r):(e[pi]=r||null,e[vi]=r||null,e[fi]=n||null),e[di]=t||null,Wr(this,mi,i),Wr(this,gi,$r(e))}_(ri,Yr),ri.prototype.w=function(){var t=ri.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var oi="REVERT_SECOND_FACTOR_ADDITION",si="EMAIL_SIGNIN",ai="VERIFY_AND_CHANGE_EMAIL",ui="email",ci="mfaInfo",li="newEmail",hi="requestType",fi="email",pi="fromEmail",di="multiFactorInfo",vi="previousEmail",gi="data",mi="operation";function yi(t){var e=Ln(t=Mn(t),bi)||null,n=Ln(t,wi)||null,r=Ln(t,Ti)||null;if(r=r&&Si[r]||null,!e||!n||!r)throw new T("argument-error",bi+", "+wi+"and "+Ti+" are required in a valid action code URL.");Qr(this,{apiKey:e,operation:r,code:n,continueUrl:Ln(t,_i)||null,languageCode:Ln(t,Ii)||null,tenantId:Ln(t,Ei)||null})}var bi="apiKey",wi="oobCode",_i="continueUrl",Ii="languageCode",Ti="mode",Ei="tenantId",Si={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:oi,signIn:si,verifyAndChangeEmail:ai,verifyEmail:"VERIFY_EMAIL"};function Ai(t){try{return new yi(t)}catch(e){return null}}function ki(t){var e=t[Oi];if(void 0===e)throw new T("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new T("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ni];if(n&&"object"==typeof n){e=n[Li];var r=n[xi];if(n=n[Pi],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new T("argument-error",xi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new T("argument-error",Pi+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new T("argument-error",Li+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new T("missing-android-pkg-name")}}else if(void 0!==n)throw new T("argument-error",Ni+" property must be a non null object when specified.");if(this.f=null,(e=t[Di])&&"object"==typeof e){if("string"==typeof(e=e[Mi])&&e.length)this.f=e;else if(void 0!==e)throw new T("argument-error",Mi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new T("argument-error",Di+" property must be a non null object when specified.");if(void 0!==(e=t[Ri])&&"boolean"!=typeof e)throw new T("argument-error",Ri+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Ci])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new T("argument-error",Ci+" property must be a non empty string when specified.");this.i=t||null}var Ni="android",Ci="dynamicLinkDomain",Ri="handleCodeInApp",Di="iOS",Oi="url",xi="installApp",Pi="minimumVersion",Li="packageName",Mi="bundleId";function Fi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ui=null;function Vi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ui[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ui){Ui={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ui[o]&&(Ui[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}function ji(t){var e=Bi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function qi(t){try{return new ji(t)}catch(e){return null}}function Bi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Vi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(u){}return null}ji.prototype.T=function(){return this.f},ji.prototype.l=function(){return this.c},ji.prototype.toString=function(){return this.h};var Ki="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Gi=["client_id","response_type","scope","redirect_uri","state"],Hi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Gi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Gi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Gi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Ki},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function zi(t){for(var e in Hi)if(Hi[e].fa==t)return Hi[e];return null}function Wi(t){var e={};e["facebook.com"]=Ji,e["google.com"]=to,e["github.com"]=Zi,e["twitter.com"]=eo;var n=t&&t[Xi];try{if(n)return e[n]?new e[n](t):new Yi(t);if(void 0!==t[Qi])return new $i(t)}catch(r){}return null}var Qi="idToken",Xi="providerId";function $i(t){var e=t[Xi];if(!e&&t[Qi]){var n=qi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Wr(this,"providerId",e),Wr(this,"isNewUser",n)}function Yi(t){$i.call(this,t),Wr(this,"profile",$r((t=Lr(t.rawUserInfo||"{}"))||{}))}function Ji(t){if(Yi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Zi(t){if(Yi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Wr(this,"username",this.profile&&this.profile.login||null)}function to(t){if(Yi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function eo(t){if(Yi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Wr(this,"username",t.screenName||null)}function no(t){var e=Mn(t),n=Ln(e,"link"),r=Ln(Mn(n),"link");return e=Ln(e,"deep_link_id"),Ln(Mn(e),"link")||e||r||n||t}function ro(t,e){if(!t&&!e)throw new T("internal-error","Internal assert: no raw session string available");if(t&&e)throw new T("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?io:oo}_(Yi,$i),_(Ji,Yi),_(Zi,Yi),_(to,Yi),_(eo,Yi);var io="enroll",oo="signin";function so(){}function ao(t,e){return t.then((function(t){if(t[Js]){var n=qi(t[Js]);if(!n||e!=n.i)throw new T("user-mismatch");return t}throw new T("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==A+"user-not-found"?new T("user-mismatch"):t}))}function uo(t,e){if(!e)throw new T("internal-error","failed to construct a credential");this.a=e,Wr(this,"providerId",t),Wr(this,"signInMethod",t)}function co(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function lo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new uo(t.providerId,t.pendingToken)}catch(e){}return null}function ho(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Wr(this,"idToken",e.idToken),e.accessToken&&Wr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Wr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new T("internal-error","failed to construct a credential");Wr(this,"accessToken",e.oauthToken),Wr(this,"secret",e.oauthTokenSecret)}Wr(this,"providerId",t),Wr(this,"signInMethod",n)}function fo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Qn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function po(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ho(t.providerId,e,t.signInMethod)}catch(n){}}return null}function vo(t,e){this.Qc=e||[],Qr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(zi(t)||{}).Ja||null,this.pb=null}function go(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new T("argument-error",'SAML provider IDs must be prefixed with "saml."');vo.call(this,t,[])}function yo(t){vo.call(this,t,Gi),this.a=[]}function bo(){yo.call(this,"facebook.com")}function wo(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new bo).credential({accessToken:e})}function _o(){yo.call(this,"github.com")}function Io(t){if(!t)throw new T("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return d(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function To(){yo.call(this,"google.com"),this.Ca("profile")}function Eo(t,e){var n=t;return d(t)&&(n=t.idToken,e=t.accessToken),(new To).credential({idToken:n,accessToken:e})}function So(){vo.call(this,"twitter.com",Ki)}function Ao(t,e){var n=t;if(d(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new T("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ho("twitter.com",n,"twitter.com")}function ko(t,e,n){this.a=t,this.f=e,Wr(this,"providerId","password"),Wr(this,"signInMethod",n===Co.EMAIL_LINK_SIGN_IN_METHOD?Co.EMAIL_LINK_SIGN_IN_METHOD:Co.EMAIL_PASSWORD_SIGN_IN_METHOD)}function No(t){return t&&t.email&&t.password?new ko(t.email,t.password,t.signInMethod):null}function Co(){Qr(this,{providerId:"password",isOAuthProvider:!1})}function Ro(t,e){if(!(e=Do(e)))throw new T("argument-error","Invalid email link!");return new ko(t,e.code,Co.EMAIL_LINK_SIGN_IN_METHOD)}function Do(t){return(t=Ai(t=no(t)))&&t.operation===si?t:null}function Oo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new T("internal-error");this.a=t,Wr(this,"providerId","phone"),this.fa="phone",Wr(this,"signInMethod","phone")}function xo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return q(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Oo(e)}return null}function Po(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Lo(t){try{this.a=t||mo.auth()}catch(e){throw new T("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Qr(this,{providerId:"phone",isOAuthProvider:!1})}function Mo(t,e){if(!t)throw new T("missing-verification-id");if(!e)throw new T("missing-verification-code");return new Oo({fb:t,eb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Oo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Eo(o,n);case"facebook.com":return wo(n);case"github.com":return Io(n);case"twitter.com":return Ao(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new uo(e,s):new ho(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new yo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(a){return null}}function Uo(t){if(!t.isOAuthProvider)throw new T("invalid-oauth-provider")}function Vo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new T("invalid-auth-event");if(this.g&&this.a)throw new T("invalid-auth-event");if(this.g&&!this.f)throw new T("invalid-auth-event")}function jo(t){return(t=t||{}).type?new Vo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function qo(){this.b=null,this.a=[]}ro.prototype.Ha=function(){return this.a?Se(this.a):Se(this.b)},ro.prototype.w=function(){return this.type==io?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},so.prototype.ka=function(){},so.prototype.b=function(){},so.prototype.c=function(){},so.prototype.w=function(){},uo.prototype.ka=function(t){return wa(t,co(this))},uo.prototype.b=function(t,e){var n=co(this);return n.idToken=e,_a(t,n)},uo.prototype.c=function(t,e){return ao(Ia(t,co(this)),e)},uo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ho.prototype.ka=function(t){return wa(t,fo(this))},ho.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,_a(t,n)},ho.prototype.c=function(t,e){return ao(Ia(t,fo(this)),e)},ho.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},vo.prototype.Ka=function(t){return this.Jb=ft(t),this},_(go,vo),_(yo,vo),yo.prototype.Ca=function(t){return H(this.a,t)||this.a.push(t),this},yo.prototype.Rb=function(){return X(this.a)},yo.prototype.credential=function(t,e){var n;if(!(n=d(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new T("argument-error","credential failed: must provide the ID token and/or the access token.");return new ho(this.providerId,n,this.providerId)},_(bo,yo),Wr(bo,"PROVIDER_ID","facebook.com"),Wr(bo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(_o,yo),Wr(_o,"PROVIDER_ID","github.com"),Wr(_o,"GITHUB_SIGN_IN_METHOD","github.com"),_(To,yo),Wr(To,"PROVIDER_ID","google.com"),Wr(To,"GOOGLE_SIGN_IN_METHOD","google.com"),_(So,vo),Wr(So,"PROVIDER_ID","twitter.com"),Wr(So,"TWITTER_SIGN_IN_METHOD","twitter.com"),ko.prototype.ka=function(t){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Ra,{email:this.a,oobCode:this.f}):ru(t,Ja,{email:this.a,password:this.f})},ko.prototype.b=function(t,e){return this.signInMethod==Co.EMAIL_LINK_SIGN_IN_METHOD?ru(t,Da,{idToken:e,email:this.a,oobCode:this.f}):ru(t,Ga,{idToken:e,email:this.a,password:this.f})},ko.prototype.c=function(t,e){return ao(this.ka(t),e)},ko.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Qr(Co,{PROVIDER_ID:"password"}),Qr(Co,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Qr(Co,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Oo.prototype.ka=function(t){return t.gb(Po(this))},Oo.prototype.b=function(t,e){var n=Po(this);return n.idToken=e,ru(t,tu,n)},Oo.prototype.c=function(t,e){var n=Po(this);return n.operation="REAUTH",ao(t=ru(t,eu,n),e)},Oo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Lo.prototype.gb=function(t,e){var n=this.a.a;return Se(e.verify()).then((function(r){if("string"!=typeof r)throw new T("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=d(t)?t.session:null,o=d(t)?t.phoneNumber:t;return(i&&i.type==io?i.Ha().then((function(t){return function(t,e){return ru(t,za,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==oo?i.Ha().then((function(e){return function(t,e){return ru(t,Wa,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return ru(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new T("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Qr(Lo,{PROVIDER_ID:"phone"}),Qr(Lo,{PHONE_SIGN_IN_METHOD:"phone"}),Vo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Vo.prototype.T=function(){return this.h},Vo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Bo,Ko=null;function Go(t){var e="unauthorized-domain",n=void 0,r=Mn(t);t=r.a,"chrome-extension"==(r=r.c)?n=jt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=jt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",T.call(this,e,n)}function Ho(t,e,n){T.call(this,t,n),(t=e||{}).Kb&&Wr(this,"email",t.Kb),t.ea&&Wr(this,"phoneNumber",t.ea),t.credential&&Wr(this,"credential",t.credential),t.$b&&Wr(this,"tenantId",t.$b)}function zo(t){if(t.code){var e=t.code||"";0==e.indexOf(A)&&(e=e.substring(A.length));var n={credential:Fo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new T(e,t.message||void 0);return new Ho(e,n,t.message)}return null}function Wo(){}function Qo(t){return t.c||(t.c=t.b())}function Xo(){}function $o(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(Rb){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Yo(){}function Jo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=b(this.qc,this),this.a.onerror=b(this.Tb,this),this.a.onprogress=b(this.rc,this),this.a.ontimeout=b(this.vc,this)}function ts(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function es(t,e,n){this.reset(t,e,n,void 0,void 0)}function ns(t){this.f=t,this.b=this.c=this.a=null}function rs(t,e){this.name=t,this.value=e}_(Go,T),_(Ho,T),Ho.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&dt(t,e),t},Ho.prototype.toJSON=function(){return this.w()},Wo.prototype.c=null,_(Xo,Wo),Xo.prototype.a=function(){var t=$o(this);return t?new ActiveXObject(t):new XMLHttpRequest},Xo.prototype.b=function(){var t={};return $o(this)&&(t[0]=!0,t[1]=!0),t},Bo=new Xo,_(Yo,Wo),Yo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Jo;throw Error("Unsupported browser")},Yo.prototype.b=function(){return{}},(t=Jo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ts(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",ts(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,ts(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},es.prototype.a=null,es.prototype.reset=function(t,e,n,r,i){delete this.a},rs.prototype.toString=function(){return this.name};var is=new rs("SEVERE",1e3),os=new rs("WARNING",900),ss=new rs("CONFIG",700),as=new rs("FINE",500);function us(t){return t.c?t.c:t.a?us(t.a):(x("Root logger has no level set."),null)}ns.prototype.log=function(t,e,n){if(t.value>=us(this).value)for(p(e)&&(e=e()),t=new es(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var cs={},ls=null;function hs(t){var e;if(ls||(ls=new ns(""),cs[""]=ls,ls.c=ss),!(e=cs[t])){e=new ns(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=hs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,cs[t]=e}return e}function fs(t,e){t&&t.log(as,e,void 0)}function ps(t){this.f=t}function ds(t){yn.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=hs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}_(ps,Wo),ps.prototype.a=function(){return new ds(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),_(ds,yn);var vs=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ms(t){t.readyState=4,t.g=null,t.c=null,t.m=null,ys(t)}function ys(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function bs(t){yn.call(this),this.headers=new An,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=ws,this.u=this.S=!1}(t=ds.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,ys(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ms(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,ys(this)),this.a&&(this.readyState=3,ys(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ms(this):ys(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ms(this))},t.sc=function(t){this.a&&(this.response=t,ms(this))},t.Va=function(t){var e=this.i;e&&e.log(os,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ms(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(os,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(os,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ds.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),_(bs,yn);var ws="";bs.prototype.b=hs("goog.net.XhrIo");var _s=/^https?$/i,Is=["POST","PUT"];function Ts(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Bo.a(),t.C=t.D?Qo(t.D):Qo(Bo),t.a.onreadystatechange=b(t.Wb,t);try{fs(t.b,Os(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(a){return fs(t.b,Os(t,"Error opening Xhr: "+a.message)),void Ss(t,a)}e=r||"";var o=new An(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(f(t)||"string"==typeof t)q(t,e,void 0);else for(var n=Sn(t),r=En(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Es,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!H(Is,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Cs(t),0<t.g&&(t.u=function(t){return Ht&&ne(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),fs(t.b,Os(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=b(t.Ma,t)):t.s=In(t.Ma,t.g,t)),fs(t.b,Os(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(a){fs(t.b,Os(t,"Send error: "+a.message)),Ss(t,a)}}function Es(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),Ns(t)}function As(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==o)if(t.C[1]&&4==Rs(t)&&2==Ds(t))fs(t.b,Os(t,"Local request error detected and ignored"));else if(t.i&&4==Rs(t))In(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Rs(t)){fs(t.b,Os(t,"Request complete")),t.c=!1;try{var e,n=Ds(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var a=String(t.l).match(Cn)[1]||null;if(!a&&s.self&&s.self.location){var u=s.self.location.protocol;a=u.substr(0,u.length-1)}i=!_s.test(a?a.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Rs(t)?t.a.statusText:""}catch(l){fs(t.b,"Can not get status: "+l.message),c=""}t.h=c+" ["+Ds(t)+"]",As(t)}}finally{Ns(t)}}}function Ns(t,e){if(t.a){Cs(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(Rb){(t=t.b)&&t.log(is,"Problem encountered resetting onreadystatechange: "+Rb.message,void 0)}}}function Cs(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Rs(t){return t.a?t.a.readyState:0}function Ds(t){try{return 2<Rs(t)?t.a.status:-1}catch(e){return-1}}function Os(t,e){return e+" ["+t.P+" "+t.l+" "+Ds(t)+"]"}function xs(t){var e=Gs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ls(t){if(t.a){if(!t.v)throw new Vs(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function Fs(t){return G(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&Fs(t)){var e=t.h,n=Bs[e];n&&(s.clearTimeout(n.a),delete Bs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(R(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(c){e=c,t.f=!0,Fs(t)||(n=!0)}}t.c=e,r&&(u=b(t.m,t,!0),r=b(t.m,t,!1),e instanceof xs?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new qs(e),Bs[e.a]=e,t.h=e.a)}function Vs(){D.call(this)}function js(){D.call(this)}function qs(t){this.a=s.setTimeout(b(this.c,this),0),this.b=t}(t=bs.prototype).Ma=function(){void 0!==o&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",fs(this.b,Os(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(fs(this.b,Os(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Ns(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Ns(this,!0)),bs.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ks(this):this.Jc())},t.Jc=function(){ks(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ws:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(is,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(e){return fs(this.b,"Can not get response: "+e.message),null}},xs.prototype.cancel=function(t){if(this.a)this.c instanceof xs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new js(this),Ls(this),Ps(this,!1,t))}},xs.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},xs.prototype.then=function(t,e,n){var r,i,o=new ye((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof js?o.cancel():i(t)})),o.then(t,e,n)},xs.prototype.$goog_Thenable=!0,_(Vs,D),Vs.prototype.message="Deferred has already fired",Vs.prototype.name="AlreadyCalledError",_(js,D),js.prototype.message="Deferred was canceled",js.prototype.name="CanceledError",qs.prototype.c=function(){throw delete Bs[this.a],this.b};var Bs={};function Ks(t){var e,n=document,r=Tt(t).toString(),i=fe(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new xs(o);return e=window.setTimeout((function(){Hs(i,!0);var t=new Qs(Ws,"Timeout reached for loading script "+r);Ls(a),Ps(a,!1,t)}),5e3),o.Ma=e,i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Hs(i,!1,e),Ls(a),Ps(a,!0,null))},i.onerror=function(){Hs(i,!0,e);var t=new Qs(zs,"Error while loading script "+r);Ls(a),Ps(a,!1,t)},dt(o={},{type:"text/javascript",charset:"UTF-8"}),ae(i,o),function(t,e){vt(t,"HTMLScriptElement"),t.src=Tt(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=c(e.document):(null===u&&(u=c(s.document)),e=u),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Gs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Hs(t,!0,this.Ma)}}function Hs(t,e,n){null!=n&&s.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var zs=0,Ws=1;function Qs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Xs(t){this.f=t}function $s(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=ft(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=ft(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==br(),!(n=s.XMLHttpRequest||n&&mo.INTERNAL.node&&mo.INTERNAL.node.XMLHttpRequest)&&!yr())throw new T("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,yr()?this.f=new ps(self):wr()?this.f=new Xs(n):this.f=new Yo,this.b=null}_(Qs,D),_(Xs,Wo),Xs.prototype.a=function(){return new this.f},Xs.prototype.b=function(){return{}};var Ys,Js="idToken",Zs=new Vr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new Vr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=Mn(t),e=Mn(e.url),t.f=t.a+t.f,Dn(t,e.c),t.a=e.a,On(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,a){(function(){var t=Ar();return!((t=Tr(t)!=Ir?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Ht&&ie&&!(9<ie))})()||yr()?t=b(t.u,t):(Ys||(Ys=new ye((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Ks(Et(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=b(t.s,t)),t(e,n,r,i,o,a)}$s.prototype.T=function(){return this.b},$s.prototype.u=function(t,e,n,r,i,o){if(yr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new T("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new bs(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}bn(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return fs(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(n){t=null}e&&e(t)})),wn(a,"ready",(function(){u&&clearTimeout(u),Be(this)})),wn(a,"timeout",(function(){u&&clearTimeout(u),Be(this),e&&e(null)})),Ts(a,t,n,r,i)};var ua=new gt(wt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function la(t,e,n,r,i,o,s){var a=Mn(e+n);Pn(a,"key",t.c),s&&Pn(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Pn(a,c,i[c]);return new ye((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(ou(t,o||{})):e(t):n(new T("network-request-failed"))}),r,u?void 0:tr(Pr(i)),t.a,t.v.get())}))}function ha(t){if("string"!=typeof(t=t.email)||!dr.test(t))throw new T("invalid-email")}function fa(t){"email"in t&&ha(t)}function pa(t){if(!t[Js]){if(t.mfaPendingCredential)throw new T("multi-factor-auth-required",null,ft(t));throw new T("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new T("internal-error")}else{if(!t.sessionInfo)throw new T("missing-verification-id");if(!t.code)throw new T("missing-verification-code")}}$s.prototype.s=function(t,e,n,r,i){var o=this;Ys.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},$s.prototype.Ab=function(){return ru(this,Ha,{})},$s.prototype.Cb=function(t,e){return ru(this,Ka,{idToken:t,email:e})},$s.prototype.Db=function(t,e){return ru(this,Ga,{idToken:t,password:e})};var va={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ga(t){if(!t.phoneVerificationInfo)throw new T("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new T("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new T("missing-verification-code")}function ma(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new T("internal-error")}function ya(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&($n(t=new zn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ba(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=zo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=zo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=zo(t)):t.errorMessage&&(e=iu(t.errorMessage)),e)throw e;pa(t)}function wa(t,e){return e.returnIdpCredential=!0,ru(t,Qa,e)}function _a(t,e){return e.returnIdpCredential=!0,ru(t,$a,e)}function Ia(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,ru(t,Xa,e)}function Ta(t){if(!t.oobCode)throw new T("invalid-action-code")}(t=$s.prototype).Eb=function(t,e){var n={idToken:t},r=[];return lt(va,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),ru(this,Ka,n)},t.wb=function(t,e){return dt(t={requestType:"PASSWORD_RESET",email:t},e),ru(this,Ua,t)},t.xb=function(t,e){return dt(t={requestType:"EMAIL_SIGNIN",email:t},e),ru(this,La,t)},t.vb=function(t,e){return dt(t={requestType:"VERIFY_EMAIL",idToken:t},e),ru(this,Ma,t)},t.Fb=function(t,e,n){return dt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),ru(this,Fa,t)},t.gb=function(t){return ru(this,Za,t)},t.ob=function(t,e){return ru(this,qa,{oobCode:t,newPassword:e})},t.Sa=function(t){return ru(this,Sa,{oobCode:t})},t.kb=function(t){return ru(this,Ea,{oobCode:t})};var Ea={endpoint:"setAccountInfo",A:Ta,Z:"email",B:!0},Sa={endpoint:"resetPassword",A:Ta,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new T("internal-error")},B:!0},Aa={endpoint:"signupNewUser",A:function(t){if(ha(t),!t.password)throw new T("weak-password")},G:pa,V:!0,B:!0},ka={endpoint:"createAuthUri",B:!0},Na={endpoint:"deleteAccount",O:["idToken"]},Ca={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new T("internal-error")}},Ra={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ha,G:pa,V:!0,B:!0},Da={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ha,G:pa,V:!0},Oa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},xa={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ga,G:pa,B:!0,Na:!0},Pa={endpoint:"getAccountInfo"},La={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Fa={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new T("internal-error")},Z:"email",B:!0},Ua={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new T("internal-error");ha(t)},Z:"email",B:!0},Va={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},ja={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new T("internal-error")}},qa={endpoint:"resetPassword",A:Ta,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Ka={endpoint:"setAccountInfo",O:["idToken"],A:fa,V:!0},Ga={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(fa(t),!t.password)throw new T("weak-password")},G:pa,V:!0},Ha={endpoint:"signupNewUser",G:pa,V:!0,B:!0},za={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new T("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new T("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Wa={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new T("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new T("internal-error")},B:!0,Na:!0},Qa={endpoint:"verifyAssertion",A:ma,Za:ya,G:ba,V:!0,B:!0},Xa={endpoint:"verifyAssertion",A:ma,Za:ya,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new T("user-not-found");if(t.errorMessage)throw iu(t.errorMessage);pa(t)},V:!0,B:!0},$a={endpoint:"verifyAssertion",A:function(t){if(ma(t),!t.idToken)throw new T("internal-error")},Za:ya,G:ba,V:!0},Ya={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new T("invalid-custom-token")},G:pa,V:!0,B:!0},Ja={endpoint:"verifyPassword",A:function(t){if(ha(t),!t.password)throw new T("wrong-password")},G:pa,V:!0,B:!0},Za={endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},tu={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new T("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",zo(t);pa(t)}},eu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:pa,B:!0},nu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Js]^!!t.refreshToken)throw new T("internal-error")},B:!0,Na:!0};function ru(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ae(new T("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Se(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),la(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new T("internal-error");return r[e.Z]}))}function iu(t){return ou({error:{errors:[{message:t}],code:400,message:t}})}function ou(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new T(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",dt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new T(r[i],e);return!e&&t&&(e=xr(t)),new T("internal-error",e)}function su(t){this.b=t,this.a=null,this.sb=function(t){return(lu||(lu=new ye((function(t,e){function n(){Ur(),kr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ur(),e(Error("Network Error"))},timeout:uu.get()})}if(kr("gapi.iframes.Iframe"))t();else if(kr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){kr("gapi.load")?n():e(Error("Network Error"))},Se(Ks(r=Et(au,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw lu=null,t})))).then((function(){return new ye((function(e,n){kr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),cu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var au=new gt(wt,"https://apis.google.com/js/api.js?onload=%{onload}"),uu=new Vr(3e4,6e4),cu=new Vr(5e3,15e3),lu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Fn((t=Mn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Fn("https",this.l,null,"/__/auth/iframe"),this.a=t,Pn(this.a,"apiKey",this.h),Pn(this.a,"appName",this.i),this.b=null,this.c=[]}function fu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function pu(t){try{return mo.app(t).auth().Ga()}catch(e){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function vu(t){var e=ar();return function(t){return ru(t,Va,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Mn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=Mn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:pr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new Go(ar())}))}function gu(t){return t.m||(t.m=vr().then((function(){if(!t.u){var e=t.c,n=t.i,r=pu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=X(r||[]),t.u=i.toString()}t.v=new su(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=jo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Se(n)}return n.status="ERROR",Se(n)}))}(t)}))),t.m}function mu(t){return t.l||(t.C=t.c?Sr(t.c,pu(t.b)):null,t.l=new $s(t.g,C(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function yu(t,e,n,r,i,o,s,a,u,c,l,h){return(t=new fu(t,e,n,r,i,h)).l=o,t.g=s,t.i=a,t.b=ft(u||null),t.f=c,t.zb(l).toString()}function bu(t){if(this.a=t||mo.INTERNAL.reactNative&&mo.INTERNAL.reactNative.AsyncStorage,!this.a)throw new T("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function wu(t){this.b=t,this.a={},this.f=b(this.c,this)}hu.prototype.toString=function(){return this.f?Pn(this.a,"v",this.f):Xn(this.a.b,"v"),this.b?Pn(this.a,"eid",this.b):Xn(this.a.b,"eid"),this.c.length?Pn(this.a,"fw",this.c.join(",")):Xn(this.a.b,"fw"),this.a.toString()},fu.prototype.zb=function(t){return this.h=t,this},fu.prototype.toString=function(){if(this.v){var t=Mn(this.v.url);t=Fn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Fn("https",this.u,null,"/__/auth/handler");if(Pn(t,"apiKey",this.s),Pn(t,"appName",this.c),Pn(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=mo.app(this.c).auth().la()}catch(a){n=null}for(var r in e.pb=n,Pn(t,"providerId",this.a.providerId),e=Pr((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=ft(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),ht(e)||Pn(t,"customParameters",xr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Pn(t,"scopes",n.join(","))),this.l?Pn(t,"redirectUrl",this.l):Xn(t.b,"redirectUrl"),this.g?Pn(t,"eventId",this.g):Xn(t.b,"eventId"),this.i?Pn(t,"v",this.i):Xn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Ln(t,s)&&Pn(t,s,this.b[s]);return this.h?Pn(t,"tid",this.h):Xn(t.b,"tid"),this.f?Pn(t,"eid",this.f):Xn(t.b,"eid"),(s=pu(this.c)).length&&Pn(t,"fw",s.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new T("popup-closed-by-user"),i=new T("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return gu(t).then((function(){return function(t,e){return t.sb.then((function(){return new ye((function(n){t.a.send(e.type,e,n,kr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&hr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new ye((function(e){return function n(){Tn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return Tn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Ar();return!Or(t)&&!Fr(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Ae(new T("popup-blocked"));if(s&&!Or())return this.ma().o((function(e){hr(t),i(e)})),r(),Se();this.a||(this.a=vu(mu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw hr(t),i(e),e}));return r(),e})).then((function(){(Uo(n),s)||ur(yu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=vu(mu(this)));var i=this;return this.a.then((function(){Uo(e),ur(yu(i.s,i.g,i.b,t,e,ar(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return gu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new T("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){W(this.h,(function(e){return e==t}))},(t=bu.prototype).get=function(t){return Se(this.a.getItem(t)).then((function(t){return t&&Lr(t)}))},t.set=function(t,e){return Se(this.a.setItem(t,xr(e)))},t.U=function(t){return Se(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var _u,Iu=[];function Tu(t,e,n){ht(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Eu(t){this.a=t}function Su(t){this.c=t,this.b=!1,this.a=[]}function Au(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ae(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ye((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return ku(t,c),e})).o((function(e){throw ku(t,c),e}))}function ku(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),W(t.a,(function(t){return t==e}))}}function Nu(){if(!Ou())throw new T("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;yr()&&self?(this.v=function(){var t=yr()?self:null;if(q(Iu,(function(n){n.b==t&&(e=n)})),!e){var e=new wu(t);Iu.push(e)}return e}(),Tu(this.v,"keyChanged",(function(e,n){return Fu(t).then((function(e){return 0<e.length&&q(t.a,(function(t){t(e)})),{keyProcessed:H(e,n.key)}}))})),Tu(this.v,"ping",(function(){return Se(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Se().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Se(null)}().then((function(e){(t.h=e)&&(t.g=new Su(new Eu(e)),Au(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&H(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Cu(t){return new ye((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(e){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new ye((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Cu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Ru(t){return t.i||(t.i=Cu(t)),t.i}function Du(t,e){var n=0;return new ye((function r(i,o){Ru(t).then(e).then(i).o((function(e){if(!(3<++n))return Ru(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ou(){try{return!!s.indexedDB}catch(Zo){return!1}}function xu(t){return t.objectStore("firebaseLocalStorage")}function Pu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Lu(t){return new ye((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Mu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Au(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Se()}function Fu(t){return Ru(t).then((function(t){var e=xu(Pu(t,!1));return e.getAll?Lu(e.getAll()):new ye((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=cr(t.c,n),t.c=n}return r}))}function Uu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Vu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Se().then((function(){if(Ou()){var t=Mr(),r="__sak"+t;return _u||(_u=new Nu),(n=_u).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){q(e.a,(function(e){e(t)}))})),t}))}function ju(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==br();if(!(t=Bu()||t&&mo.INTERNAL.node&&mo.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new T("internal-error","The LocalStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Bu()||mo.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=s.localStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function Ku(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==br();if(!(t=Hu()||t&&mo.INTERNAL.node&&mo.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(e){return!1}}()){if("Node"==br())throw new T("internal-error","The SessionStorage compatibility library was not found.");throw new T("web-storage-unsupported")}this.a=Hu()||mo.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=s.sessionStorage,e=Mr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(n){return null}}function zu(){var t={};t.Browser=Xu,t.Node=$u,t.ReactNative=Yu,t.Worker=Ju,this.a=t[br()]}wu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];q(r,(function(e){i.push(Se().then((function(){return e(t.origin,t.data.data)})))})),Ne(i).then((function(r){var i=[];q(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),q(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Eu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Su.prototype.close=function(){for(;0<this.a.length;)ku(this,this.a[0]);this.b=!0},(t=Nu.prototype).set=function(t,e){var n=this,r=!1;return Du(this,(function(e){return Lu((e=xu(Pu(e,!0))).get(t))})).then((function(i){return Du(n,(function(o){if(o=xu(Pu(o,!0)),i)return i.value=e,Lu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Lu(o.add(s))}))})).then((function(){return n.c[t]=e,Mu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Du(this,(function(e){return Lu(xu(Pu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Du(this,(function(r){return n=!0,e.b++,Lu(xu(Pu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Mu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=Fu(t).then((function(e){0<e.length&&q(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Uu(t),e()}(this),this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t})),0==this.a.length&&Uu(this)},(t=Vu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){W(this.a,(function(e){return e==t}))},(t=ju.prototype).get=function(t){return Se(this.a[t])},t.set=function(t,e){return this.a[t]=e,Se()},t.U=function(t){return delete this.a[t],Se()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Se().then((function(){return Lr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Se().then((function(){var r=xr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Se().then((function(){e.a.removeItem(t)}))},t.ca=function(t){s.window&&sn(s.window,"storage",t)},t.ia=function(t){s.window&&cn(s.window,"storage",t)},(t=Ku.prototype).get=function(){return Se(null)},t.set=function(){return Se()},t.U=function(){return Se()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return Se().then((function(){return Lr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Se().then((function(){var r=xr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Se().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var Wu,Qu,Xu={F:qu,cb:Gu},$u={F:qu,cb:Gu},Yu={F:bu,cb:Ku},Ju={F:qu,cb:Ku},Zu={rd:"local",NONE:"none",td:"session"};function tc(){var t=!(Fr(Ar())||!mr()),e=Or(),n=Nr();this.m=t,this.h=e,this.l=n,this.a={},Wu||(Wu=new zu),t=Wu;try{this.g=!sr()&&Br()||!s.indexedDB?new t.a.F:new Vu(yr()?new ju:new t.a.F)}catch(r){this.g=new ju,this.h=!0}try{this.i=new t.a.cb}catch(r){this.i=new ju}this.v=new ju,this.f=b(this.Zb,this),this.b={}}function ec(){return Qu||(Qu=new tc),Qu}function nc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function rc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function ic(t,e,n){return n=rc(e,n),"local"==e.F&&(t.b[n]=null),nc(t,e.F).U(n)}function oc(t){t.c&&(clearInterval(t.c),t.c=null)}function sc(t){this.a=t,this.b=ec()}(t=tc.prototype).get=function(t,e){return nc(this,t.F).get(rc(t,e))},t.set=function(t,e,n){var r=rc(t,n),i=this,o=nc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=rc(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),ht(this.a)&&(nc(this,"local").ca(this.f),this.h||(sr()||!Br())&&s.indexedDB||!this.l||function(t){oc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Qe({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=rc(t,e),this.a[t]&&(W(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),ht(this.a)&&(nc(this,"local").ia(this.f),oc(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?nc(this,"local").ia(this.f):oc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Ht&&ie&&10==ie&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else q(t,b(this.nb,this))},t.nb=function(t){this.a[t]&&q(this.a[t],(function(t){t()}))};var ac,uc={name:"authEvent",F:"local"};function cc(){this.a=ec()}function lc(t,e){this.b=hc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===ac&&(ac=s.Int32Array?new Int32Array(yc):yc),this.reset()}_(lc,(function(){this.b=-1}));for(var hc=64,fc=hc-1,pc=[],dc=0;dc<fc;dc++)pc[dc]=0;var vc=Q(128,pc);function gc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&l^~c&h)+(0|ac[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function mc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(gc(t),i=0);else{if(!f(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(gc(t),i=0)}}t.c=i,t.g+=n}lc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):X(this.h)};var yc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function bc(){lc.call(this,8,wc)}_(bc,lc);var wc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function _c(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new cc,this.g=new sc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Ic(t){return new T("invalid-cordova-configuration",t)}function Tc(t){var e=new bc;mc(e,t),t=[];var n=8*e.g;56>e.c?mc(e,vc,56-e.c):mc(e,vc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(gc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return K(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function Ec(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(r){}}function Sc(t){return t.f||(t.f=t.ma().then((function(){return new ye((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ac(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=no(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Lr(Ln(o=Mn(i),"firebaseError")||null))?E(o):null)?new Vo(r.c,r.b,null,null,o,null,r.T()):new Vo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ec(t,i)}))}var n=new Vo("unknown",null,null,null,new T("no-auth-event")),r=!1,i=Tn(500).then((function(){return Ac(t).then((function(){r||Ec(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(kr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(n){console.error(n)}},Ko||(Ko=new qo),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=kr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ac(t){var e=null;return function(t){return t.b.get(uc,t.a).then((function(t){return jo(t)}))}(t.g).then((function(n){return e=n,ic((n=t.g).b,uc,n.a)})).then((function(){return e}))}function kc(t){this.a=t,this.b=ec()}(t=_c.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(gr(void 0)?vr().then((function(){return new ye((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ae(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof kr("universalLinks.subscribe",s))throw Ic("cordova-universal-links-plugin-fix is not installed");if(void 0===kr("BuildInfo.packageName",s))throw Ic("cordova-plugin-buildinfo is not installed");if("function"!=typeof kr("cordova.plugins.browsertab.openUrl",s))throw Ic("cordova-plugin-browsertab is not installed");if("function"!=typeof kr("cordova.InAppBrowser.open",s))throw Ic("cordova-plugin-inappbrowser is not installed")}),(function(){throw new T("cordova-not-ready")}))},t.Pb=function(t,e){return e(new T("operation-not-supported-in-this-environment")),Se()},t.Nb=function(){return Ae(new T("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ae(new T("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Se().then((function(){return Uo(e),Sc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Vo(e,r,null,o,new T("no-auth-event"),null,i),u=kr("BuildInfo.packageName",s);if("string"!=typeof u)throw new T("invalid-cordova-configuration");var c=kr("BuildInfo.displayName",s),l={};if(Ar().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!Ar().toLowerCase().match(/android/))return Ae(new T("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Tc(o),l.sessionId=o;var h=yu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(uc,a.w(),e)})).then((function(){var e=kr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new T("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=kr("cordova.plugins.browsertab.openUrl",s)))throw new T("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=kr("cordova.InAppBrowser.open",s)))throw new T("invalid-cordova-configuration");e=Ar(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new ye((function(t,e){u=function(){var e=kr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=Tn(2e3).then((function(){e(new T("redirect-cancelled-by-user"))})))},l=function(){jr()&&c()},o.addEventListener("resume",c,!1),Ar().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Ac(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Sc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Vo("unknown",null,null,null,new T("no-auth-event")),t(e))}))},t.Ta=function(t){W(this.b,(function(e){return e==t}))};var Nc={name:"pendingRedirect",F:"session"};function Cc(t){return ic(t.b,Nc,t.a)}function Rc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=b(this.s,this),this.b=new Hc,this.C=new $c,this.g=new kc(Kc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Dc(this.D,this.v,this.m,S,this.J)}function Dc(t,e,n,r,i){var o=mo.SDK_VERSION||null;return gr()?new _c(t,e,n,o,r,i):new du(t,e,n,o,r,i)}function Oc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function xc(t){t.a.Yb()&&Oc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Vc(e)&&t.s(n)})),t.a.Ub()||zc(t.b)}function Pc(t,e){H(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Nc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Cc(t.g).then((function(){Oc(t).o((function(e){var n=new Vo("unknown",null,null,null,new T("operation-not-supported-in-this-environment"));Vc(e)&&t.s(n)}))})):xc(t)})).o((function(){xc(t)}))}function Lc(t,e){W(t.h,(function(t){return t==e}))}Rc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Dc(this.D,this.v,this.m,null,this.J),this.i={}},Rc.prototype.s=function(t){if(!t)throw new T("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return zc(this.b),e};var Mc=new Vr(2e3,1e4),Fc=new Vr(3e4,6e4);function Uc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function Vc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function jc(t,e,n,r,i){var o;return function(t){return t.b.set(Nc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Vc(e))throw new T("operation-not-supported-in-this-environment");return o=e,Cc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new ye((function(){})):Cc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function qc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Mc.get())}Rc.prototype.ra=function(){return this.b.ra()};var Bc={};function Kc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=Kc(e,n,r);return Bc[i]||(Bc[i]=new Rc(t,e,n,r)),Bc[i]}function Hc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function zc(t){t.g||(t.g=!0,Xc(t,!1,null,null))}function Wc(t){t.g&&!t.i&&Xc(t,!1,null,null)}function Qc(t,e){if(t.b=function(){return Se(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Xc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ae(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Qc(t,n):Qc(t,{user:null}),t.f=[],t.c=[]}function $c(){}function Yc(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Jc(t,e){this.a=e,Wr(this,"verificationId",t)}function Zc(t,e,n,r){return new Lo(t).gb(e,n).then((function(t){return new Jc(t,r)}))}function tl(t){var e=Bi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new T("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Qr(this,{token:t,expirationTime:qr(1e3*e.exp),authTime:qr(1e3*e.auth_time),issuedAtTime:qr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function el(t,e,n){var r=e&&e[rl];if(!r)throw new T("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ft(e),this.g=n,this.c=new ro(null,r),this.b=[];var i=this;q(e[nl]||[],(function(t){(t=Jr(t))&&i.b.push(t)})),Wr(this,"auth",this.a),Wr(this,"session",this.c),Wr(this,"hints",this.b)}Hc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Hc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Xc(this,!0,null,t.a),Se()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Xc(t,a,e,null)})).o((function(e){Xc(t,a,null,e)}))}(this,t,e):Ae(new T("invalid-auth-event")):(Xc(this,!1,null,null),Se())}else Ae(new T("invalid-auth-event"))},Hc.prototype.ra=function(){var t=this;return new ye((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new T("timeout");t.a&&t.a.cancel(),t.a=Tn(Fc.get()).then((function(){t.b||(t.g=!0,Xc(t,!0,null,e))}))}(t))}))},$c.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Se()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ae(new T("invalid-auth-event"))}else Ae(new T("invalid-auth-event"))},Jc.prototype.confirm=function(t){return t=Mo(this.verificationId,t),this.a(t)};var nl="mfaInfo",rl="mfaPendingCredential";function il(t,e,n,r){T.call(this,"multi-factor-auth-required",r,e),this.b=new el(t,e,n),Wr(this,"resolver",this.b)}function ol(t,e,n){if(t&&d(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new il(e,t.serverResponse,n,t.message)}catch(r){}return null}function sl(){}function al(t){Wr(this,"factorId",t.fa),this.a=t}function ul(t){if(al.call(this,t),this.a.fa!=Lo.PROVIDER_ID)throw new T("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function cl(t,e){for(var n in We.call(this,t),e)this[n]=e[n]}function ll(t,e){this.a=t,this.b=[],this.c=b(this.yc,this),sn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&q(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ei]=t.uid),t.displayName&&(r[Zr]=t.displayName),t.enrollmentTime&&(r[ti]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[ni]=t.phoneNumber);try{e=new ri(r)}catch(i){}t=e}else t=null;t&&n.push(t)})),hl(this,n)}function hl(t,e){t.b=e,Wr(t,"enrolledFactors",e)}function fl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function pl(t,e){t.stop(),t.b=Tn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return jr()||!t?Se():new ye((function(n){e=function(){jr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){pl(t,!0)})).o((function(e){t.i(e)&&pl(t,!1)}))}function dl(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function vl(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function gl(t,e){t.b=qi(e[Js]||""),t.a=e.refreshToken,vl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function ml(t,e){return function(t,e){return new ye((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(ou(t)):t.access_token&&t.refresh_token?n(t):r(new T("internal-error")):r(new T("network-request-failed"))}),"POST",Qn(e).toString(),t.g,t.m.get()):r(new T("internal-error"))}))}(t.f,e).then((function(e){return t.b=qi(e.access_token),t.a=e.refresh_token,vl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function yl(t,e){this.a=t||null,this.b=e||null,Qr(this,{lastSignInTime:qr(e||null),creationTime:qr(t||null)})}function bl(t,e,n,r,i,o){Qr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function wl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=mo.SDK_VERSION?Sr(mo.SDK_VERSION):null;this.a=new $s(this.l,C(S),r),(this.u=t.emulatorConfig||null)&&ia(this.a,this.u),this.h=new dl(this.a),Cl(this,e[Js]),gl(this.h,e),Wr(this,"refreshToken",this.h.a),Ol(this,n||{}),yn.call(this),this.P=!1,this.s&&Cr()&&(this.b=Gc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new fl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=b(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){_l(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){El(i,t.f)},this.ja=null,this.S=new ll(this,n),Wr(this,"multiFactor",this.S)}function _l(t,e){t.u=e,ia(t.a,e),t.b&&(e=t.b,t.b=Gc(t.s,t.l,t.m,t.u),t.P&&(Lc(e,t),Pc(t.b,t)))}function Il(t,e){t.qa&&cn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&sn(e,"languageCodeChanged",t.Pa)}function Tl(t,e){t.$&&cn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&sn(e,"emulatorConfigChanged",t.Ba)}function El(t,e){t.aa=e,sa(t.a,mo.SDK_VERSION?Sr(mo.SDK_VERSION,t.aa):null)}function Sl(t,e){t.ja&&cn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&sn(e,"frameworkChanged",t.Oa)}function Al(t){try{return mo.app(t.m).auth()}catch(e){throw new T("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function kl(t){t.J||t.D.b||(t.D.start(),cn(t,"tokenChanged",t.ba),sn(t,"tokenChanged",t.ba))}function Nl(t){cn(t,"tokenChanged",t.ba),t.D.stop()}function Cl(t,e){t.Aa=e,Wr(t,"_lat",e)}function Rl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Ne(e).then((function(){return t}))}function Dl(t){t.b&&!t.P&&(t.P=!0,Pc(t.b,t))}function Ol(t,e){Qr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new yl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function xl(){}function Pl(t){return Se().then((function(){if(t.J)throw new T("app-deleted")}))}function Ll(t){return K(t.providerData,(function(t){return t.providerId}))}function Ml(t,e){e&&(Fl(t,e.providerId),t.providerData.push(e))}function Fl(t,e){W(t.providerData,(function(t){return t.providerId==e}))}function Ul(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Wr(t,e,n)}function Vl(t,e){t!=e&&(Qr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Wr(t,"metadata",function(t){return new yl(t.a,t.b)}(e.metadata)):Wr(t,"metadata",new yl),q(e.providerData,(function(e){Ml(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Wr(t,"refreshToken",t.h.a),hl(t.S,e.S.b))}function jl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return ru(t.a,Pa,{idToken:e}).then(b(t.Kc,t))}(t,e).then((function(){return n||Ul(t,"isAnonymous",!1),e}))}))}function ql(t,e){e[Js]&&t.Aa!=e[Js]&&(gl(t.h,e),t.dispatchEvent(new cl("tokenChanged")),Cl(t,e[Js]),Ul(t,"refreshToken",t.h.a))}function Bl(t,e){return jl(t).then((function(){if(H(Ll(t),e))return Rl(t).then((function(){throw new T("provider-already-linked")}))}))}function Kl(t,e,n){return Xr({user:t,credential:Fo(e),additionalUserInfo:e=Wi(e),operationType:n})}function Gl(t,e){return ql(t,e),t.reload().then((function(){return t}))}function Hl(t,e,n,r,i){if(!Cr())return Ae(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ae(t.i);var o=zi(n.providerId),s=Mr(t.uid+":::"),a=null;(!Or()||mr())&&t.s&&n.isOAuthProvider&&(a=yu(t.s,t.l,t.m,e,n,null,s,mo.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=fr(a,o&&o.va,o&&o.ua);return r=r().then((function(){if(Wl(t),!i)return t.I().then((function(){}))})).then((function(){return Uc(t.b,u,e,n,s,!!a,t.tenantId)})).then((function(){return new ye((function(n,r){t.na(e,null,new T("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=s,t.c=qc(t.b,t,e,u,s)}))})).then((function(t){return u&&hr(u),t?Xr(t):null})).o((function(t){throw u&&hr(u),t})),Ql(t,r,i)}function zl(t,e,n,r,i){if(!Cr())return Ae(new T("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ae(t.i);var o=null,s=Mr(t.uid+":::");return r=r().then((function(){if(Wl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,Rl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Yl,t.w(),e.a)),e})).then((function(){return jc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return Jl(t.ha);throw o})).then((function(){if(o)throw o})),Ql(t,r,i)}function Wl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new T("internal-error");throw new T("auth-domain-config-required")}}function Ql(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ae(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new cl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){z(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),Al(t),b(t.jc,t))),n||e}))}function Xl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Js]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new wl(e,n,t);return t.providerData&&q(t.providerData,(function(t){t&&Ml(i,Xr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function $l(t){this.a=t,this.b=ec()}el.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=ft(e.f);return delete n[nl],delete n[rl],dt(n,t),e.g(n)}))},_(il,T),sl.prototype.tb=function(t,e,n){return e.type==io?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),dt(n,{phoneVerificationInfo:Po(t.a)}),ru(e,Oa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return dt(n={mfaPendingCredential:n},{phoneVerificationInfo:Po(t.a)}),ru(e,xa,n)}))}(this,t,e)},_(al,sl),_(ul,al),_(cl,We),(t=ll.prototype).yc=function(t){hl(this,function(t){var e=[];return q(t.mfaInfo||[],(function(t){(t=Jr(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new ro(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return ql(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return ru(r,nu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=B(e.b,(function(t){return t.uid!=n}));return hl(e,r),ql(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:K(this.b,(function(t){return t.w()}))}}},fl.prototype.start=function(){this.a=this.c,pl(this,!0)},fl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},dl.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},dl.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ae(new T("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?ml(this,{grant_type:"refresh_token",refresh_token:this.a}):Se(null):Se({accessToken:this.b.toString(),refreshToken:this.a})},yl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(wl,yn),wl.prototype.xa=function(t){this.za=t,ra(this.a,t)},wl.prototype.la=function(){return this.za},wl.prototype.Ga=function(){return X(this.aa)},wl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Wr(wl.prototype,"providerId","firebase"),(t=wl.prototype).reload=function(){var t=this;return Ql(this,Pl(this).then((function(){return jl(t).then((function(){return Rl(t)})).then(xl)})))},t.oc=function(t){return this.I(t).then((function(t){return new tl(t)}))},t.I=function(t){var e=this;return Ql(this,Pl(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new T("internal-error");return t.accessToken!=e.Aa&&(Cl(e,t.accessToken),e.dispatchEvent(new cl("tokenChanged"))),Ul(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new T("internal-error");Ol(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?K(t,(function(t){return new bl(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ml(this,e[n]);Ul(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new cl("userReloaded",{hd:t}))},t.Lc=function(t){return Hr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Ql(this,t.c(this.a,this.uid).then((function(t){return ql(e,t),n=Kl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return Hr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Ql(this,Bl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=Kl(e,t,"link"),Gl(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Ql(this,Bl(this,"phone").then((function(){return Zc(Al(n),t,e,b(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Ql(this,Se().then((function(){return Zc(Al(n),t,e,b(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Ql(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return ql(e,t),e.reload()})))},t.ed=function(t){var e=this;return Ql(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return ql(e,t),e.reload()})))},t.Db=function(t){var e=this;return Ql(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return ql(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Pl(this);var e=this;return Ql(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return ql(e,t),Ul(e,"displayName",t.displayName||null),Ul(e,"photoURL",t.photoUrl||null),q(e.providerData,(function(t){"password"===t.providerId&&(Wr(t,"displayName",e.displayName),Wr(t,"photoURL",e.photoURL))})),Rl(e)})).then(xl))},t.cd=function(t){var e=this;return Ql(this,jl(this).then((function(n){return H(Ll(e),t)?function(t,e,n){return ru(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return q(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),q(Ll(e),(function(t){n[t]||Fl(e,t)})),n[Lo.PROVIDER_ID]||Wr(e,"phoneNumber",null),Rl(e)})):Rl(e).then((function(){throw new T("no-such-provider")}))})))},t.delete=function(){var t=this;return Ql(this,this.I().then((function(e){return ru(t.a,Na,{idToken:e})})).then((function(){t.dispatchEvent(new cl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Il(t,null),Tl(t,null),Sl(t,null),t.N=[],t.J=!0,Nl(t),Wr(t,"refreshToken",null),t.b&&Lc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?b(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?b(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?b(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?b(this.Mb,this):null},t.Ec=function(t){var e=this;return Hl(this,"linkViaPopup",t,(function(){return Bl(e,t.providerId).then((function(){return Rl(e)}))}),!1)},t.Nc=function(t){return Hl(this,"reauthViaPopup",t,(function(){return Se()}),!0)},t.Fc=function(t){var e=this;return zl(this,"linkViaRedirect",t,(function(){return Bl(e,t.providerId)}),!1)},t.Oc=function(t){return zl(this,"reauthViaRedirect",t,(function(){return Se()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ql(this,this.I().then((function(n){return _a(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=Kl(i,t,"link"),Gl(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Ql(this,Se().then((function(){return ao(Ia(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=Kl(i,t,"reauthenticate"),ql(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Ql(this,this.I().then((function(e){return n=e,void 0===t||ht(t)?{}:Fi(new ki(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Ql(this,this.I().then((function(t){return r=t,void 0===e||ht(e)?{}:Fi(new ki(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Ql(this,t=ao(Se(t),n.uid).then((function(t){return e=Kl(n,t,"reauthenticate"),ql(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&dt(t,this.metadata.w()),q(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),dt(t,this.S.w()),t};var Yl={name:"redirectUser",F:"session"};function Jl(t){return ic(t.b,Yl,t.a)}function Zl(t){this.a=t,this.b=ec(),this.c=null,this.f=function(t){var e=nh("local"),n=nh("session"),r=nh("none");return function(t,e,n){var r=rc(e,n),i=nc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=Lr(s.localStorage.getItem(r))}catch(u){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(eh,t.a).then((function(t){return t?nh(t):e}))}))}))})).then((function(e){return t.c=e,th(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(nh("local"),this.a,b(this.g,this))}function th(t,e){var n,r=[];for(n in Zu)Zu[n]!==e&&r.push(ic(t.b,nh(Zu[n]),t.a));return r.push(ic(t.b,eh,t.a)),function(t){return new ye((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)ke(t[a],w(o,a),s);else e(i)}))}(r)}Zl.prototype.g=function(){var t=this,e=nh("local");sh(this,(function(){return Se().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return th(t,"local").then((function(){t.c=e}))}))}))};var eh={name:"persistence",F:"session"};function nh(t){return{name:"authUser",F:t}}function rh(t,e){return sh(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function ih(t){return sh(t,(function(){return ic(t.b,t.c,t.a)}))}function oh(t,e,n){return sh(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Xl(t||{})}))}))}function sh(t,e){return t.f=t.f.then(e,e),t.f}function ah(t){if(this.l=!1,Wr(this,"settings",new Yc),Wr(this,"app",t),!gh(this).options||!gh(this).options.apiKey)throw new T("invalid-api-key");t=mo.SDK_VERSION?Sr(mo.SDK_VERSION):null,this.a=new $s(gh(this).options&&gh(this).options.apiKey,C(S),t),this.P=[],this.s=[],this.N=[],this.Pa=mo.INTERNAL.createSubscribe(b(this.zc,this)),this.W=void 0,this.ib=mo.INTERNAL.createSubscribe(b(this.Ac,this)),dh(this,null),this.i=new Zl(gh(this).options.apiKey+":"+gh(this).name),this.D=new $l(gh(this).options.apiKey+":"+gh(this).name),this.$=wh(this,function(t){var e=gh(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Yl,t.a).then((function(t){return t&&e&&(t.authDomain=e),Xl(t||{})}))}(t.D,gh(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),Jl(t.D)}));return wh(t,e)}(t).then((function(){return oh(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return rh(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:ih(t.i)}))):null})).then((function(e){dh(t,e||null)}));return wh(t,n)}(this)),this.h=wh(this,function(t){return t.$.then((function(){return fh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(nh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=b(this.Zc,this),this.Ba=b(this.da,this),this.qa=b(this.mc,this),this.za=b(this.wc,this),this.Aa=b(this.xc,this),this.b=null,function(t){var e=gh(t).options.authDomain,n=gh(t).options.apiKey;e&&Cr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,gh(t).name,t.R),Pc(t.b,t),mh(t)&&Dl(mh(t)),t.m){Dl(t.m);var r=t.m;r.xa(t.la()),Il(r,t),El(r=t.m,t.J),Sl(r,t),_l(r=t.m,t.R),Tl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=b(this.delete,this),this.INTERNAL.logFramework=b(this.Gc,this),this.u=0,yn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Mn(this.R.url);t=Xr({protocol:t.c,host:t.a,port:t.g,options:Xr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function uh(t){We.call(this,"languageCodeChanged"),this.h=t}function ch(t){We.call(this,"emulatorConfigChanged"),this.c=t}function lh(t){We.call(this,"frameworkChanged"),this.f=t}function hh(t){return t.Oa||Ae(new T("auth-domain-config-required"))}function fh(t){if(!Cr())return Ae(new T("operation-not-supported-in-this-environment"));var e=hh(t).then((function(){return t.b.ra()})).then((function(t){return t?Xr(t):null}));return wh(t,e)}function ph(t,e){var n={};return n.apiKey=gh(t).options.apiKey,n.authDomain=gh(t).options.authDomain,n.appName=gh(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new wl(t,e);return n&&(i.ha=n),r&&El(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return mh(t)&&e.uid==mh(t).uid?(Vl(mh(t),e),t.da(e)):(dh(t,e),Dl(e),t.da(e))})).then((function(){bh(t)}))}function dh(t,e){mh(t)&&(function(t,e){W(t.W,(function(t){return t==e}))}(mh(t),t.Ba),cn(mh(t),"tokenChanged",t.qa),cn(mh(t),"userDeleted",t.za),cn(mh(t),"userInvalidated",t.Aa),Nl(mh(t))),e&&(e.W.push(t.Ba),sn(e,"tokenChanged",t.qa),sn(e,"userDeleted",t.za),sn(e,"userInvalidated",t.Aa),0<t.u&&kl(e)),Wr(t,"currentUser",e),e&&(e.xa(t.la()),Il(e,t),El(e,t.J),Sl(e,t),_l(e,t.R),Tl(e,t))}function vh(t,e){var n=null,r=null;return wh(t,e.then((function(e){return n=Fo(e),r=Wi(e),ph(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ol(e.w(),t,b(t.kc,t))),n||e})).then((function(){return Xr({user:mh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function gh(t){return t.app}function mh(t){return t.currentUser}function yh(t){return mh(t)&&mh(t)._lat||null}function bh(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](yh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](yh(t))}}function wh(t,e){return t.P.push(e),e.oa((function(){z(t.P,e)})),e}function _h(){}function Ih(){this.a={},this.b=1e12}Zl.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new T("invalid-persistence-type"),n=new T("unsupported-persistence-type");t:{for(r in Zu)if(Zu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(br()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ou()&&"none"!==t)throw n;break;default:if(!Nr()&&"none"!==t)throw n}}(t),sh(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,th(n,t)})).then((function(){if(n.c=nh(t),e)return n.b.set(n.c,e,n.a)})):Se()}))},_(ah,yn),_(uh,We),_(ch,We),_(lh,We),(t=ah.prototype).yb=function(t){return wh(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new uh(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new T("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&vr().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ia(this.a,this.R),this.dispatchEvent(new ch(this.R))}},t.Gc=function(t){this.J.push(t),sa(this.a,mo.SDK_VERSION?Sr(mo.SDK_VERSION,this.J):null),this.dispatchEvent(new lh(this.J))},t.Ga=function(){return X(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:gh(this).options.apiKey,authDomain:gh(this).options.authDomain,appName:gh(this).name,currentUser:mh(this)&&mh(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?b(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return vh(i,wa(i.a,o))}))},t.Xc=function(t){if(!Cr())return Ae(new T("operation-not-supported-in-this-environment"));var e=this,n=zi(t.providerId),r=Mr(),i=null;(!Or()||mr())&&gh(this).options.authDomain&&t.isOAuthProvider&&(i=yu(gh(this).options.authDomain,gh(this).options.apiKey,gh(this).name,"signInViaPopup",t,null,r,mo.SDK_VERSION||null,null,null,this.T(),this.R));var o=fr(i,n&&n.va,n&&n.ua);return wh(this,n=hh(this).then((function(n){return Uc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new ye((function(t,n){e.na("signInViaPopup",null,new T("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=qc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&hr(o),t?Xr(t):null})).o((function(t){throw o&&hr(o),t})))},t.Yc=function(t){if(!Cr())return Ae(new T("operation-not-supported-in-this-environment"));var e=this;return wh(this,hh(this).then((function(){return function(t){return sh(t,(function(){return t.b.set(eh,t.c.F,t.a)}))}(e.i)})).then((function(){return jc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return fh(this).then((function(e){return t.b&&Wc(t.b.b),e})).o((function(e){throw t.b&&Wc(t.b.b),e}))},t.dd=function(t){if(!t)return Ae(new T("null-user"));if(this.S!=t.tenantId)return Ae(new T("tenant-id-mismatch"));var e=this,n={};n.apiKey=gh(this).options.apiKey,n.authDomain=gh(this).options.authDomain,n.appName=gh(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Js]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new wl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&El(e,r),Vl(e,t),e}(t,n,e.D,e.Ga());return wh(this,this.h.then((function(){if(gh(e).options.apiKey!=t.l)return r.reload()})).then((function(){return mh(e)&&t.uid==mh(e).uid?(Vl(mh(e),t),e.da(t)):(dh(e,r),Dl(r),e.da(r))})).then((function(){bh(e)})))},t.Bb=function(){var t=this;return wh(this,this.h.then((function(){return t.b&&Wc(t.b.b),mh(t)?(dh(t,null),ih(t.i).then((function(){bh(t)}))):Se()})))},t.Zc=function(){var t=this;return oh(this.i,gh(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=mh(t)&&e){n=mh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Vl(mh(t),e),mh(t).I();(mh(t)||e)&&(dh(t,e),e&&(Dl(e),e.ha=t.D),t.b&&Pc(t.b,t),bh(t))}}))},t.da=function(t){return rh(this.i,t)},t.mc=function(){bh(this),this.da(mh(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return vh(e,Se(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(mh(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),wh(t,t.h.then((function(){!t.l&&H(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(yh(t)))})))}(this,(function(){t.next(mh(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(mh(r)):"function"==typeof t.next&&t.next(mh(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(mh(r)):"function"==typeof t.next&&t.next(mh(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return wh(this,this.h.then((function(){return mh(e)?mh(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return vh(e,ru(e.a,Ya,{token:t}))})).then((function(t){var n=t.user;return Ul(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Ja,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return vh(n,ru(n.a,Aa,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return vh(e,t.ka(e.a))}))},t.Sc=function(t){return Hr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=mh(t);if(e&&e.isAnonymous){var n=Xr({providerId:null,isNewUser:!1});return Xr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return vh(t,t.a.Ab()).then((function(e){var n=e.user;return Ul(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return mh(this)&&mh(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&mh(this)&&kl(mh(this))},t.Pc=function(t){var e=this;q(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&mh(this)&&Nl(mh(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),wh(this,this.h.then((function(){e.l||H(e.s,t)&&t(yh(e))})))},t.removeAuthTokenListener=function(t){W(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(nh("local"),t.a,this.ja),this.b&&(Lc(this.b,this),Wc(this.b.b)),Promise.resolve()},t.hc=function(t){return wh(this,function(t,e){return ru(t,ka,{identifier:e,continueUri:Rr()?ar():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!Do(t)},t.xb=function(t,e){var n=this;return wh(this,Se().then((function(){var t=new ki(e);if(!t.c)throw new T("argument-error",Ri+" must be true when sending sign in link to email");return Fi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return wh(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return wh(this,this.a.Sa(t).then((function(t){return new ii(t)})))},t.kb=function(t){return wh(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return wh(this,Se().then((function(){return void 0===e||ht(e)?{}:Fi(new ki(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return wh(this,Zc(this,t,e,b(this.ab,this)))},t.Vc=function(t,e){var n=this;return wh(this,Se().then((function(){var r=e||ar(),i=Ro(t,r);if(!(r=Do(r)))throw new T("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new T("tenant-id-mismatch");return n.ab(i)})))},_h.prototype.render=function(){},_h.prototype.reset=function(){},_h.prototype.getResponse=function(){},_h.prototype.execute=function(){};var Th=null;function Eh(t,e){return(e=Sh(e))&&t.a[e]||null}function Sh(t){return(t=void 0===t?1e12:t)?t.toString():null}function Ah(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=se(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():sn(this.f,"click",this.i)}function kh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function Nh(){}function Ch(){}Ih.prototype.render=function(t,e){return this.a[this.b.toString()]=new Ah(t,e),this.b++},Ih.prototype.reset=function(t){var e=Eh(this,t);t=Sh(t),e&&t&&(e.delete(),delete this.a[t])},Ih.prototype.getResponse=function(t){return(t=Eh(this,t))?t.getResponse():null},Ih.prototype.execute=function(t){(t=Eh(this,t))&&t.execute()},Ah.prototype.getResponse=function(){return kh(this),this.b},Ah.prototype.execute=function(){kh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(r){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(r){}t.h&&t.execute()}),6e4)}),500))},Ah.prototype.delete=function(){kh(this),this.g=!0,clearTimeout(this.a),this.a=null,cn(this.f,"click",this.i)},Wr(Nh,"FACTOR_ID","phone"),Ch.prototype.g=function(){return Th||(Th=new Ih),Se(Th)},Ch.prototype.c=function(){};var Rh=null;function Dh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Oh=new gt(wt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),xh=new Vr(3e4,6e4);Dh.prototype.g=function(t){var e=this;return new ye((function(n,r){var i=setTimeout((function(){r(new T("network-request-failed"))}),xh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new T("internal-error"));delete s[e.a]},Se(Ks(Et(Oh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new T("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Dh.prototype.c=function(){this.b--};var Ph=null;function Lh(t,e,n,r,i,o,a){if(Wr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Rh||(Rh=new Ch),a=Rh):(Ph||(Ph=new Dh),a=Ph),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Uh])throw new T("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Vh],!s.document)throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!se(e)||!this.i&&se(e).hasChildNodes())throw new T("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new $s(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Mh];this.a[Mh]=function(t){if(jh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=kr(c,s);"function"==typeof e&&e(t)}};var l=this.a[Fh];this.a[Fh]=function(){if(jh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=kr(l,s);"function"==typeof t&&t()}}}var Mh="callback",Fh="expired-callback",Uh="sitekey",Vh="size";function jh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(r){}}function qh(t,e){return t.h.push(e),e.oa((function(){z(t.h,e)})),e}function Bh(t){if(t.J)throw new T("internal-error","RecaptchaVerifier instance has been destroyed.")}function Kh(t,e,n){var r=!1;try{this.b=n||mo.app()}catch(s){throw new T("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new T("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(s){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(s){}o=mo.SDK_VERSION?Sr(mo.SDK_VERSION,o):null,Lh.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,C(S),r)}function Gh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new T("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Hh.length)throw new T("internal-error","Argument validator received an unsupported number of arguments.");n=Hh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new T("argument-error",t+" failed: "+r)}(t=Lh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=qh(this,Se().then((function(){if(Rr()&&!yr())return vr();throw new T("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,ru(t.s,ja,{})})).then((function(e){t.a[Uh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Bh(this);var t=this;return qh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=se(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!oe&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',qt(s.name),'"'),s.type){o.push(' type="',qt(s.type),'"');var a={};dt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=fe(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):ae(o,s)),2<r.length&&he(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Bh(this);var t=this;return qh(this,this.render().then((function(e){return new ye((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){W(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Bh(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Bh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=se(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},_(Kh,Lh);var Hh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function zh(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Wh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Qh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:d}}function Xh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function $h(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Yh(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jh(t,e){return d(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function Zh(t){return d(t)&&"string"==typeof t.uid}function tf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function ef(t,e){for(var n in e){var r=e[n].name;t[r]=of(r,t[n],e[n].j)}}function nf(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:w((function(t){return this[t]}),n),set:w((function(t,e,n,r){Gh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function rf(t,e,n,r){t[e]=of(e,n,r)}function of(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Gh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}ef(ah.prototype,{kb:{name:"applyActionCode",j:[zh("code")]},Sa:{name:"checkActionCode",j:[zh("code")]},ob:{name:"confirmPasswordReset",j:[zh("code"),zh("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[zh("email"),zh("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[zh("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[zh("emailLink")]},Hc:{name:"onAuthStateChanged",j:[tf(Qh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[tf(Qh(),Xh(),"nextOrObserver"),Xh("opt_error",!0),Xh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[zh("email"),tf(Qh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[zh("email"),Qh("actionCodeSettings")]},yb:{name:"setPersistence",j:[zh("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Yh()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Yh()]},Tc:{name:"signInWithCustomToken",j:[zh("token")]},Uc:{name:"signInWithEmailAndPassword",j:[zh("email"),zh("password")]},Vc:{name:"signInWithEmailLink",j:[zh("email"),zh("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[tf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof wl)}},$h(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[zh(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[zh("url"),Qh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[zh("code")]}}),nf(ah.prototype,{lc:{name:"languageCode",lb:tf(zh(),$h(),"languageCode")},ti:{name:"tenantId",lb:tf(zh(),$h(),"tenantId")}}),ah.Persistence=Zu,ah.Persistence.LOCAL="local",ah.Persistence.SESSION="session",ah.Persistence.NONE="none",ef(wl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Wh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Wh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Yh()]},rb:{name:"linkWithCredential",j:[Yh()]},Dc:{name:"linkWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Yh()]},ub:{name:"reauthenticateWithCredential",j:[Yh()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[zh("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[tf(Qh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[zh(null,!0)]},cd:{name:"unlink",j:[zh("provider")]},Cb:{name:"updateEmail",j:[zh("email")]},Db:{name:"updatePassword",j:[zh("password")]},ed:{name:"updatePhoneNumber",j:[Yh("phone")]},Eb:{name:"updateProfile",j:[Qh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[zh("email"),tf(Qh("opt_actionCodeSettings",!0),$h(null,!0),"opt_actionCodeSettings",!0)]}}),ef(Ih.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(_h.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),ef(ye.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),nf(Yc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Wh("appVerificationDisabledForTesting")}}),ef(Jc.prototype,{confirm:{name:"confirm",j:[zh("verificationCode")]}}),rf(so,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[po,No,xo,lo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[tf(zh(),Qh(),"json")]),rf(Co,"credential",(function(t,e){return new ko(t,e)}),[zh("email"),zh("password")]),ef(ko.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(bo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(bo,"credential",wo,[tf(zh(),Qh(),"token")]),rf(Co,"credentialWithLink",Ro,[zh("email"),zh("emailLink")]),ef(_o.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(_o,"credential",Io,[tf(zh(),Qh(),"token")]),ef(To.prototype,{Ca:{name:"addScope",j:[zh("scope")]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(To,"credential",Eo,[tf(zh(),tf(Qh(),$h()),"idToken"),tf(zh(),$h(),"accessToken",!0)]),ef(So.prototype,{Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),rf(So,"credential",Ao,[tf(zh(),Qh(),"token"),zh("secret",!0)]),ef(yo.prototype,{Ca:{name:"addScope",j:[zh("scope")]},credential:{name:"credential",j:[tf(zh(),tf(Qh(),$h()),"optionsOrIdToken"),tf(zh(),$h(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Qh("customOAuthParameters")]}}),ef(ho.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(uo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),rf(Lo,"credential",Mo,[zh("verificationId"),zh("verificationCode")]),ef(Lo.prototype,{gb:{name:"verifyPhoneNumber",j:[tf(zh(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jh(t.session,io)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jh(t.session,oo)&&Zh(t.multiFactorHint):t.session&&t.multiFactorUid?Jh(t.session,oo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),ef(Oo.prototype,{w:{name:"toJSON",j:[zh(null,!0)]}}),ef(T.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(Ho.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(Go.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(il.prototype,{toJSON:{name:"toJSON",j:[zh(null,!0)]}}),ef(el.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),ef(ll.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},zh("displayName",!0)]},bd:{name:"unenroll",j:[tf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:Zh},zh(),"multiFactorInfoIdentifier")]}}),ef(Kh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),rf(yi,"parseLink",Ai,[zh("link")]),rf(Nh,"assertion",(function(t){return new ul(t)}),[Yh("phone")]),function(){if(void 0===mo||!mo.INTERNAL||!mo.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:si,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:oi,VERIFY_AND_CHANGE_EMAIL:ai,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:ah,AuthCredential:so,Error:T};rf(t,"EmailAuthProvider",Co,[]),rf(t,"FacebookAuthProvider",bo,[]),rf(t,"GithubAuthProvider",_o,[]),rf(t,"GoogleAuthProvider",To,[]),rf(t,"TwitterAuthProvider",So,[]),rf(t,"OAuthProvider",yo,[zh("providerId")]),rf(t,"SAMLAuthProvider",go,[zh("providerId")]),rf(t,"PhoneAuthProvider",Lo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof ah)}}]),rf(t,"RecaptchaVerifier",Kh,[tf(zh(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Qh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof mo.app.App)}}]),rf(t,"ActionCodeURL",yi,[]),rf(t,"PhoneMultiFactorGenerator",Nh,[]),mo.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new ah(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),mo.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:b((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:b(t.nc,t),addAuthTokenListener:b(t.cc,t),removeAuthTokenListener:b(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),mo.registerVersion("@firebase/auth","0.16.8"),mo.INTERNAL.extendNamespace({User:wl})}()}.apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Pb=function(t){function e(n,r){var i=t.call(this,Lb(n),"Firebase Storage: "+r+" ("+Lb(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return _i(e,t),e.prototype._codeEquals=function(t){return Lb(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(xi);function Lb(t){return"storage/"+t}function Mb(){return new Pb("unknown","An unknown error occurred, please check the error payload for server response.")}function Fb(){return new Pb("canceled","User canceled the upload/download.")}function Ub(){return new Pb("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Vb(t){return new Pb("invalid-argument",t)}function jb(){return new Pb("app-deleted","The Firebase app was deleted.")}function qb(t){return new Pb("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Bb(t,e){return new Pb("invalid-format","String does not match format '"+t+"': "+e)}function Kb(t){throw new Pb("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Gb={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Hb=function(t,e){this.data=t,this.contentType=e||null};function zb(t,e){switch(t){case Gb.RAW:return new Hb(Wb(e));case Gb.BASE64:case Gb.BASE64URL:return new Hb(Qb(t,e));case Gb.DATA_URL:return new Hb((n=new Xb(e)).base64?Qb(Gb.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Rb){throw Bb(Gb.DATA_URL,"Malformed data URL.")}return Wb(e)}(n.rest),function(t){return new Xb(t).contentType}(e))}var n;throw Mb()}function Wb(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Qb(t,e){switch(t){case Gb.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw Bb(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case Gb.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw Bb(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Rb){throw Bb(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var Xb=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw Bb(Gb.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n=e[1]||null;null!=n&&(this.base64=(r=n,i=";base64",r.length>=i.length&&r.substring(r.length-i.length)===i),this.contentType=this.base64?n.substring(0,n.length-";base64".length):n),this.rest=t.substring(t.indexOf(",")+1);var r,i;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */};var $b,Yb,Jb={STATE_CHANGED:"state_changed"},Zb={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function tw(t){switch(t){case"running":case"pausing":case"canceling":return Zb.RUNNING;case"paused":return Zb.PAUSED;case"success":return Zb.SUCCESS;case"canceled":return Zb.CANCELED;case"error":default:return Zb.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Yb=$b||($b={}))[Yb.NO_ERROR=0]="NO_ERROR",Yb[Yb.NETWORK_ERROR=1]="NETWORK_ERROR",Yb[Yb.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ew=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=$b.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=$b.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=$b.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw Kb("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw Kb("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw Kb("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Rb){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw Kb("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var nw=function(){function t(){}return t.prototype.createConnection=function(){return new ew},t}(),rw=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Rb){return new t(e,"")}if(""===r.path)return r;throw new Pb("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new Pb("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),iw=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ow(t){return"string"==typeof t||t instanceof String}function sw(t){return aw()&&t instanceof Blob}function aw(){return"undefined"!=typeof Blob}function uw(t,e,n,r){if(r<e)throw Vb("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw Vb("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cw(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function lw(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var hw=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Rb){o(Rb)}else null!==s?((r=Mb()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?jb():Fb()):o(r=new Pb("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new fw(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,s=0;function a(){return 2===s}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,a())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,ki([null,t],e));else{var i;a()||o?c.call.apply(c,ki([null,t],e)):(r<64&&(r*=2),1===s?(s=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(s=2),clearTimeout(i),l(0)):t||(s=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new fw(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===$b.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new fw(s,r))}else{var a=r.getErrorCode()===$b.ABORT;e(!1,new fw(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),fw=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function pw(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function dw(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=pw();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(aw())return new Blob(t);throw new Pb("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vw=function(){function t(t,e){var n=0,r="";sw(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(sw(this.data_)){var r=this.data_,i=(s=e,a=n,(o=r).webkitSlice?o.webkitSlice(s,a):o.mozSlice?o.mozSlice(s,a):o.slice?o.slice(s,a):null);return null===i?null:new t(i)}var o,s,a;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(aw()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(dw.apply(null,r))}var i=e.map((function(t){return ow(t)?zb(Gb.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gw(t){var e,n;try{e=JSON.parse(t)}catch(Rb){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yw(t,e){return e}var bw=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||yw},ww=null;function _w(){if(ww)return ww;var t=[];t.push(new bw("bucket")),t.push(new bw("generation")),t.push(new bw("metageneration")),t.push(new bw("name","fullPath",!0));var e=new bw("name");e.xform=function(t,e){return function(t){return!ow(t)||t.length<2?t:mw(t)}(e)},t.push(e);var n=new bw("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new bw("timeCreated")),t.push(new bw("updated")),t.push(new bw("md5Hash",null,!0)),t.push(new bw("cacheControl",null,!0)),t.push(new bw("contentDisposition",null,!0)),t.push(new bw("contentEncoding",null,!0)),t.push(new bw("contentLanguage",null,!0)),t.push(new bw("contentType",null,!0)),t.push(new bw("metadata","customMetadata",!0)),ww=t}function Iw(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new rw(n,r);return e._makeStorageReference(i)}})}(r,t),r}function Tw(t,e,n){var r=gw(e);return null===r?null:Iw(t,r,n)}function Ew(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t,e,n){var r=gw(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new rw(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];a=t._makeStorageReference(new rw(e,l.name)),r.items.push(a)}return r}(t,e,r)}var Aw=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kw(t){if(!t)throw Mb()}function Nw(t,e){return function(n,r){var i=Tw(t,r,e);return kw(null!==i),i}}function Cw(t,e){return function(n,r){var i=Tw(t,r,e);return kw(null!==i),function(t,e,n){var r=gw(e);if(null===r)return null;if(!ow(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return cw("/b/"+o(r)+"/o/"+o(i),n)+lw({alt:"media",token:e})}))[0]}(i,r,t.host)}}function Rw(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new Pb("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Pb("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new Pb("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new Pb("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function Dw(t){var e=Rw(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new Pb("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function Ow(t,e,n){var r=cw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Aw(r,"GET",Nw(t,n),i);return o.errorHandler=Dw(e),o}function xw(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=cw(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new Aw(s,"GET",function(t,e){return function(n,r){var i=Sw(t,e,r);return kw(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Rw(e),u}function Pw(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var Lw=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Mw(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Rb){kw(!1)}return kw(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Fw(t,e,n,r,i,o,s,a){var u=new Lw(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new Pb("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,f);if(null===d)throw Ub();var v=e.maxUploadRetryTime,g=new Aw(n,"POST",(function(t,n){var i,s=Mw(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?Nw(e,o)(t,n):null,new Lw(a,c,"final"===s,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=a||null,g.errorHandler=Rw(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Uw=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vw(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jw=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=_w(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=Pw(e,r,i),a={name:s.fullPath},u=cw(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=Ew(s,n),h=t.maxUploadRetryTime,f=new Aw(u,"POST",(function(t){var e;Mw(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Rb){kw(!1)}return kw(ow(e)),e}),h);return f.urlParams=a,f.headers=c,f.body=l,f.errorHandler=Rw(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new Aw(n,"POST",(function(t){var e=Mw(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Rb){kw(!1)}n||kw(!1);var i=Number(n);return kw(!isNaN(i)),new Lw(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Rw(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new Lw(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=Fw(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Rb){return t._error=Rb,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=Ow(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=Pw(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ew(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+a+"--",h=vw.getBlob(c,r,l);if(null===h)throw Ub();var f={name:u.fullPath},p=cw(o,t.host),d=t.maxUploadRetryTime,v=new Aw(p,"POST",Nw(t,n),d);return v.urlParams=f,v.headers=s,v.body=h.uploadData(),v.errorHandler=Rw(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=Fb(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=tw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new Uw(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(tw(this._state)){case Zb.SUCCESS:Vw(this._resolve.bind(null,this.snapshot))();break;case Zb.CANCELED:case Zb.ERROR:Vw(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(tw(this._state)){case Zb.RUNNING:case Zb.PAUSED:t.next&&Vw(t.next.bind(t,this.snapshot))();break;case Zb.SUCCESS:t.complete&&Vw(t.complete.bind(t))();break;case Zb.CANCELED:case Zb.ERROR:t.error&&Vw(t.error.bind(t,this._error))();break;default:t.error&&Vw(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),qw=function(){function t(t,e){this._service=t,this._location=e instanceof rw?e:rw.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new rw(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return mw(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new rw(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw qb(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bw(t){var e={prefixes:[],items:[]};return Kw(t,e).then((function(){return e}))}function Kw(t,e,n){return Ti(this,void 0,void 0,(function(){var r,i,o;return Ei(this,(function(s){switch(s.label){case 0:return[4,Gw(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,Kw(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function Gw(t,e){return Ti(this,void 0,void 0,(function(){var n,r;return Ei(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&uw("options.maxResults",1,1e3,e.maxResults),n=e||{},r=xw(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function Hw(t,e){return Ti(this,void 0,void 0,(function(){var n;return Ei(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=cw(e.fullServerUrl(),t.host),o=Ew(n,r),s=t.maxOperationRetryTime,a=new Aw(i,"PATCH",Nw(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=Dw(e),a}(t.storage,t._location,e,_w()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function zw(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=cw(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new Aw(r,"GET",Cw(t,n),i);return o.errorHandler=Dw(e),o}(t.storage,t._location,_w()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new Pb("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function Ww(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=cw(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new Aw(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=Dw(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function Qw(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new rw(t._location.bucket,n);return new qw(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(t){return/^[A-Za-z]+:\/\//.test(t)}function $w(t,e){if(t instanceof Zw){var n=t;if(null==n._bucket)throw new Pb("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new qw(n,n._bucket);return null!=e?$w(r,e):r}if(void 0!==e){if(e.includes(".."))throw Vb('`path` param cannot contain ".."');return Qw(t,e)}return t}function Yw(t,e){if(e&&Xw(e)){if(t instanceof Zw)return new qw(t,e);throw Vb("To use ref(service, url), the first argument must be a Storage instance.")}return $w(t,e)}function Jw(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:rw.makeFromBucketSpec(n,t)}var Zw=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?rw.makeFromBucketSpec(i,this._host):Jw(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=rw.makeFromBucketSpec(this._url,t):this._bucket=Jw(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){uw("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){uw("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Ti(this,void 0,void 0,(function(){var t,e;return Ei(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return Ti(this,void 0,void 0,(function(){var t;return Ei(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new qw(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new iw(jb());var i=function(t,e,n,r,i,o){var s=lw(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new hw(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return Ti(this,void 0,void 0,(function(){var e,n,r;return Ei(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new jw(t,new vw(e),n)}(t=qi(t),e,n)}function e_(t){return function(t){return Ti(this,void 0,void 0,(function(){var e;return Ei(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=Ow(t.storage,t._location,_w()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=qi(t))}function n_(t,e){return Yw(t=qi(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var r_,i_,o_=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),s_=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new o_(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new o_(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new o_(t,i,i._ref))}:{next:e.next?function(t){return e.next(new o_(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),a_=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new u_(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new u_(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),u_=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return Qw(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new s_(t_(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=Gb.RAW),this._throwIfRoot("putString");var r=zb(e,t),i=Ii({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new s_(new jw(this._delegate,new vw(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,Bw(t=qi(t))).then((function(t){return new a_(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return Gw(t=qi(t),e)}(this._delegate,t||void 0).then((function(t){return new a_(t,e.storage)}))},t.prototype.getMetadata=function(){return e_(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return Hw(t=qi(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return zw(qi(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),Ww(qi(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw qb(t)},t}(),c_=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(Xw(t))throw Vb("ref() expected a child path but got a URL, use refFromURL instead.");return new u_(n_(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!Xw(t))throw Vb("refFromURL() expected a full URL but got a child path, use ref() instead.");try{rw.makeFromUrl(t,this._delegate.host)}catch(Rb){throw Vb("refFromUrl() expected a valid full URL but got an invalid one.")}return new u_(n_(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l_(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new c_(r,new Zw(r,i,o,new nw,n,mo.SDK_VERSION))}i_={TaskState:Zb,TaskEvent:Jb,StringFormat:Gb,Storage:Zw,Reference:u_},(r_=mo).INTERNAL.registerComponent(new Bi("storage",l_,"PUBLIC").setServiceProps(i_).setMultipleInstances(!0)),r_.registerVersion("@firebase/storage","0.5.6");
/*!
  * vue-router v4.0.10
  * (c) 2021 Eduardo San Martin Morote
  * @license MIT
  */
const h_="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag,f_=t=>h_?Symbol(t):"_vr_"+t,p_=f_("rvlm"),d_=f_("rvd"),v_=f_("r"),g_=f_("rl"),m_=f_("rvl"),y_="undefined"!=typeof window;const b_=Object.assign;function w_(t,e){const n={};for(const r in e){const i=e[r];n[r]=Array.isArray(i)?i.map(t):t(i)}return n}let __=()=>{};const I_=/\/$/;function T_(t,e,n="/"){let r,i={},o="",s="";const a=e.indexOf("?"),u=e.indexOf("#",a>-1?a:0);return a>-1&&(r=e.slice(0,a),o=e.slice(a+1,u>-1?u:e.length),i=t(o)),u>-1&&(r=r||e.slice(0,u),s=e.slice(u,e.length)),r=function(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/");let i,o,s=n.length-1;for(i=0;i<r.length;i++)if(o=r[i],1!==s&&"."!==o){if(".."!==o)break;s--}return n.slice(0,s).join("/")+"/"+r.slice(i-(i===r.length?1:0)).join("/")}(null!=r?r:e,n),{fullPath:r+(o&&"?")+o+s,path:r,query:i,hash:s}}function E_(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function S_(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function A_(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(!k_(t[n],e[n]))return!1;return!0}function k_(t,e){return Array.isArray(t)?N_(t,e):Array.isArray(e)?N_(e,t):t===e}function N_(t,e){return Array.isArray(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}var C_,R_,D_,O_;function x_(t){if(!t)if(y_){const e=document.querySelector("base");t=(t=e&&e.getAttribute("href")||"/").replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),t.replace(I_,"")}(R_=C_||(C_={})).pop="pop",R_.push="push",(O_=D_||(D_={})).back="back",O_.forward="forward",O_.unknown="";const P_=/^[^#]+#/;function L_(t,e){return t.replace(P_,"#")+e}const M_=()=>({left:window.pageXOffset,top:window.pageYOffset});function F_(t){let e;if("el"in t){let n=t.el;const r="string"==typeof n&&n.startsWith("#"),i="string"==typeof n?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!i)return;e=function(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}(i,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.pageXOffset,null!=e.top?e.top:window.pageYOffset)}function U_(t,e){return(history.state?history.state.position-e:-1)+t}const V_=new Map;function j_(t,e){const{pathname:n,search:r,hash:i}=e,o=t.indexOf("#");if(o>-1){let e=i.includes(t.slice(o))?t.slice(o).length:1,n=i.slice(e);return"/"!==n[0]&&(n="/"+n),E_(n,"")}return E_(n,t)+r+i}function q_(t,e,n,r=!1,i=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:i?M_():null}}function B_(t){const{history:e,location:n}=window;let r={value:j_(t,n)},i={value:e.state};function o(r,o,s){const a=t.indexOf("#"),u=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+r:location.protocol+"//"+location.host+t+r;try{e[s?"replaceState":"pushState"](o,"",u),i.value=o}catch(c){console.error(c),n[s?"replace":"assign"](u)}}return i.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:r,state:i,push:function(t,n){const s=b_({},i.value,e.state,{forward:t,scroll:M_()});o(s.current,s,!0),o(t,b_({},q_(r.value,t,null),{position:s.position+1},n),!1),r.value=t},replace:function(t,n){o(t,b_({},e.state,q_(i.value.back,t,i.value.forward,!0),n,{position:i.value.position}),!0),r.value=t}}}function K_(t){const e=B_(t=x_(t)),n=function(t,e,n,r){let i=[],o=[],s=null;const a=({state:o})=>{const a=j_(t,location),u=n.value,c=e.value;let l=0;if(o){if(n.value=a,e.value=o,s&&s===u)return void(s=null);l=c?o.position-c.position:0}else r(a);i.forEach((t=>{t(n.value,u,{delta:l,type:C_.pop,direction:l?l>0?D_.forward:D_.back:D_.unknown})}))};function u(){const{history:t}=window;t.state&&t.replaceState(b_({},t.state,{scroll:M_()}),"")}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u),{pauseListeners:function(){s=n.value},listen:function(t){i.push(t);const e=()=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)};return o.push(e),e},destroy:function(){for(const t of o)t();o=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}}}(t,e.state,e.location,e.replace);const r=b_({location:"",base:t,go:function(t,e=!0){e||n.pauseListeners(),history.go(t)},createHref:L_.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function G_(t){return"string"==typeof t||"symbol"==typeof t}const H_={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},z_=f_("nf");var W_,Q_;function X_(t,e){return b_(new Error,{type:t,[z_]:!0},e)}function $_(t,e){return t instanceof Error&&z_ in t&&(null==e||!!(t.type&e))}(Q_=W_||(W_={}))[Q_.aborted=4]="aborted",Q_[Q_.cancelled=8]="cancelled",Q_[Q_.duplicated=16]="duplicated";const Y_={sensitive:!1,strict:!1,start:!0,end:!0},J_=/[.+*?^${}()[\]/\\]/g;function Z_(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function tI(t,e){let n=0;const r=t.score,i=e.score;for(;n<r.length&&n<i.length;){const t=Z_(r[n],i[n]);if(t)return t;n++}return i.length-r.length}const eI={type:0,value:""},nI=/[a-zA-Z0-9_]/;function rI(t,e,n){const r=function(t,e){const n=b_({},Y_,e);let r=[],i=n.start?"^":"";const o=[];for(const u of t){const t=u.length?[]:[90];n.strict&&!u.length&&(i+="/");for(let e=0;e<u.length;e++){const r=u[e];let s=40+(n.sensitive?.25:0);if(0===r.type)e||(i+="/"),i+=r.value.replace(J_,"\\$&"),s+=40;else if(1===r.type){const{value:t,repeatable:n,optional:c,regexp:l}=r;o.push({name:t,repeatable:n,optional:c});const h=l||"[^/]+?";if("[^/]+?"!==h){s+=10;try{new RegExp(`(${h})`)}catch(a){throw new Error(`Invalid custom RegExp for param "${t}" (${h}): `+a.message)}}let f=n?`((?:${h})(?:/(?:${h}))*)`:`(${h})`;e||(f=c&&u.length<2?`(?:/${f})`:"/"+f),c&&(f+="?"),i+=f,s+=20,c&&(s+=-8),n&&(s+=-20),".*"===h&&(s+=-50)}t.push(s)}r.push(t)}if(n.strict&&n.end){const t=r.length-1;r[t][r[t].length-1]+=.7000000000000001}n.strict||(i+="/?"),n.end?i+="$":n.strict&&(i+="(?:/|$)");const s=new RegExp(i,n.sensitive?"":"i");return{re:s,score:r,keys:o,parse:function(t){const e=t.match(s),n={};if(!e)return null;for(let r=1;r<e.length;r++){const t=e[r]||"",i=o[r-1];n[i.name]=t&&i.repeatable?t.split("/"):t}return n},stringify:function(e){let n="",r=!1;for(const i of t){r&&n.endsWith("/")||(n+="/"),r=!1;for(const t of i)if(0===t.type)n+=t.value;else if(1===t.type){const{value:o,repeatable:s,optional:a}=t,u=o in e?e[o]:"";if(Array.isArray(u)&&!s)throw new Error(`Provided param "${o}" is an array but it is not repeatable (* or + modifiers)`);const c=Array.isArray(u)?u.join("/"):u;if(!c){if(!a)throw new Error(`Missing required param "${o}"`);i.length<2&&(n.endsWith("/")?n=n.slice(0,-1):r=!0)}n+=c}}return n}}}(function(t){if(!t)return[[]];if("/"===t)return[[eI]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,r=n;const i=[];let o;function s(){o&&i.push(o),o=[]}let a,u=0,c="",l="";function h(){c&&(0===n?o.push({type:0,value:c}):1===n||2===n||3===n?(o.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:c,regexp:l,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function f(){c+=a}for(;u<t.length;)if(a=t[u++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),s()):":"===a?(h(),n=1):f();break;case 4:f(),n=r;break;case 1:"("===a?n=2:nI.test(a)?f():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--);break;case 2:")"===a?"\\"==l[l.length-1]?l=l.slice(0,-1)+a:n=3:l+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&u--,l="";break;default:e("Unknown state")}else r=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),s(),i}(t.path),n),i=b_(r,{record:t,parent:e,children:[],alias:[]});return e&&!i.record.aliasOf==!e.record.aliasOf&&e.children.push(i),i}function iI(t,e){const n=[],r=new Map;function i(t,n,r){let a=!r,u=function(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:oI(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||{}:{default:t.component}}}(t);u.aliasOf=r&&r.record;const c=uI(e,t),l=[u];if("alias"in t){const e="string"==typeof t.alias?[t.alias]:t.alias;for(const t of e)l.push(b_({},u,{components:r?r.record.components:u.components,path:t,aliasOf:r?r.record:u}))}let h,f;for(const e of l){let{path:l}=e;if(n&&"/"!==l[0]){let t=n.record.path,r="/"===t[t.length-1]?"":"/";e.path=n.record.path+(l&&r+l)}if(h=rI(e,n,c),r?r.alias.push(h):(f=f||h,f!==h&&f.alias.push(h),a&&t.name&&!sI(h)&&o(t.name)),"children"in u){let t=u.children;for(let e=0;e<t.length;e++)i(t[e],h,r&&r.children[e])}r=r||h,s(h)}return f?()=>{o(f)}:__}function o(t){if(G_(t)){const e=r.get(t);e&&(r.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{let e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&r.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function s(t){let e=0;for(;e<n.length&&tI(t,n[e])>=0;)e++;n.splice(e,0,t),t.record.name&&!sI(t)&&r.set(t.record.name,t)}return e=uI({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>i(t))),{addRoute:i,resolve:function(t,e){let i,o,s,a={};if("name"in t&&t.name){if(i=r.get(t.name),!i)throw X_(1,{location:t});s=i.record.name,a=b_(function(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}(e.params,i.keys.filter((t=>!t.optional)).map((t=>t.name))),t.params),o=i.stringify(a)}else if("path"in t)o=t.path,i=n.find((t=>t.re.test(o))),i&&(a=i.parse(o),s=i.record.name);else{if(i=e.name?r.get(e.name):n.find((t=>t.re.test(e.path))),!i)throw X_(1,{location:t,currentLocation:e});s=i.record.name,a=b_({},e.params,t.params),o=i.stringify(a)}const u=[];let c=i;for(;c;)u.unshift(c.record),c=c.parent;return{name:s,path:o,params:a,matched:u,meta:aI(u)}},removeRoute:o,getRoutes:function(){return n},getRecordMatcher:function(t){return r.get(t)}}}function oI(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(let r in t.components)e[r]="boolean"==typeof n?n:n[r];return e}function sI(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function aI(t){return t.reduce(((t,e)=>b_(t,e.meta)),{})}function uI(t,e){let n={};for(let r in t)n[r]=r in e?e[r]:t[r];return n}const cI=/#/g,lI=/&/g,hI=/\//g,fI=/=/g,pI=/\?/g,dI=/\+/g,vI=/%5B/g,gI=/%5D/g,mI=/%5E/g,yI=/%60/g,bI=/%7B/g,wI=/%7C/g,_I=/%7D/g,II=/%20/g;function TI(t){return encodeURI(""+t).replace(wI,"|").replace(vI,"[").replace(gI,"]")}function EI(t){return TI(t).replace(dI,"%2B").replace(II,"+").replace(cI,"%23").replace(lI,"%26").replace(yI,"`").replace(bI,"{").replace(_I,"}").replace(mI,"^")}function SI(t){return function(t){return TI(t).replace(cI,"%23").replace(pI,"%3F")}(t).replace(hI,"%2F")}function AI(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}function kI(t){const e={};if(""===t||"?"===t)return e;const n=("?"===t[0]?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const t=n[r].replace(dI," ");let i=t.indexOf("="),o=AI(i<0?t:t.slice(0,i)),s=i<0?null:AI(t.slice(i+1));if(o in e){let t=e[o];Array.isArray(t)||(t=e[o]=[t]),t.push(s)}else e[o]=s}return e}function NI(t){let e="";for(let n in t){const r=t[n];if(n=EI(n).replace(fI,"%3D"),null==r){void 0!==r&&(e+=(e.length?"&":"")+n);continue}(Array.isArray(r)?r.map((t=>t&&EI(t))):[r&&EI(r)]).forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function CI(t){const e={};for(let n in t){let r=t[n];void 0!==r&&(e[n]=Array.isArray(r)?r.map((t=>null==t?null:""+t)):null==r?r:""+r)}return e}function RI(){let t=[];return{add:function(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}},list:()=>t,reset:function(){t=[]}}}function DI(t,e,n,r,i){const o=r&&(r.enterCallbacks[i]=r.enterCallbacks[i]||[]);return()=>new Promise(((s,a)=>{const u=t=>{var u;!1===t?a(X_(4,{from:n,to:e})):t instanceof Error?a(t):"string"==typeof(u=t)||u&&"object"==typeof u?a(X_(2,{from:e,to:t})):(o&&r.enterCallbacks[i]===o&&"function"==typeof t&&o.push(t),s())},c=t.call(r&&r.instances[i],e,n,u);let l=Promise.resolve(c);t.length<3&&(l=l.then(u)),l.catch((t=>a(t)))}))}function OI(t,e,n,r){const i=[];for(const s of t)for(const t in s.components){let a=s.components[t];if("beforeRouteEnter"===e||s.instances[t])if("object"==typeof(o=a)||"displayName"in o||"props"in o||"__vccOpts"in o){const o=(a.__vccOpts||a)[e];o&&i.push(DI(o,n,r,s,t))}else{let o=a();i.push((()=>o.then((i=>{if(!i)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${s.path}"`));const o=(a=i).__esModule||h_&&"Module"===a[Symbol.toStringTag]?i.default:i;var a;s.components[t]=o;const u=(o.__vccOpts||o)[e];return u&&DI(u,n,r,s,t)()}))))}}var o;return i}function xI(t){const e=Qe(v_),n=Qe(g_),r=Gr((()=>e.resolve(oe(t.to)))),i=Gr((()=>{let{matched:t}=r.value,{length:e}=t;const i=t[e-1];let o=n.matched;if(!i||!o.length)return-1;let s=o.findIndex(S_.bind(null,i));if(s>-1)return s;let a=LI(t[e-2]);return e>1&&LI(i)===a&&o[o.length-1].path!==a?o.findIndex(S_.bind(null,t[e-2])):s})),o=Gr((()=>i.value>-1&&function(t,e){for(let n in e){let r=e[n],i=t[n];if("string"==typeof r){if(r!==i)return!1}else if(!Array.isArray(i)||i.length!==r.length||r.some(((t,e)=>t!==i[e])))return!1}return!0}(n.params,r.value.params))),s=Gr((()=>i.value>-1&&i.value===n.matched.length-1&&A_(n.params,r.value.params)));return{route:r,href:Gr((()=>r.value.href)),isActive:o,isExactActive:s,navigate:function(n={}){return function(t){if(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)return;if(t.defaultPrevented)return;if(void 0!==t.button&&0!==t.button)return;if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}t.preventDefault&&t.preventDefault();return!0}(n)?e[oe(t.replace)?"replace":"push"](oe(t.to)).catch(__):Promise.resolve()}}}const PI=nn({name:"RouterLink",props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:xI,setup(t,{slots:e}){const n=zt(xI(t)),{options:r}=Qe(v_),i=Gr((()=>({[MI(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[MI(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:Hr("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:i.value},r)}}});function LI(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const MI=(t,e,n)=>null!=t?t:null!=e?e:n;function FI(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const UI=nn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},setup(t,{attrs:e,slots:n}){const r=Qe(m_),i=Gr((()=>t.route||r.value)),o=Qe(d_,0),s=Gr((()=>i.value.matched[o]));We(d_,o+1),We(p_,s),We(m_,i);const a=ne();return Ye((()=>[a.value,s.value,t.name]),(([t,e,n],[r,i,o])=>{e&&(e.instances[n]=t,i&&i!==e&&t&&t===r&&(e.leaveGuards.size||(e.leaveGuards=i.leaveGuards),e.updateGuards.size||(e.updateGuards=i.updateGuards))),!t||!e||i&&S_(e,i)&&r||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=i.value,o=s.value,u=o&&o.components[t.name],c=t.name;if(!u)return FI(n.default,{Component:u,route:r});const l=o.props[t.name],h=l?!0===l?r.params:"function"==typeof l?l(r):l:null,f=Hr(u,b_({},h,e,{onVnodeUnmounted:t=>{t.component.isUnmounted&&(o.instances[c]=null)},ref:a}));return FI(n.default,{Component:f,route:r})||f}}});function VI(t){const e=iI(t.routes,t);let n=t.parseQuery||kI,r=t.stringifyQuery||NI,i=t.history;const o=RI(),s=RI(),a=RI(),u=ie(H_,!0);let c=H_;y_&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const l=w_.bind(null,(t=>""+t)),h=w_.bind(null,SI),f=w_.bind(null,AI);function p(t,o){if(o=b_({},o||u.value),"string"==typeof t){let r=T_(n,t,o.path),s=e.resolve({path:r.path},o),a=i.createHref(r.fullPath);return b_(r,s,{params:f(s.params),hash:AI(r.hash),redirectedFrom:void 0,href:a})}let s;"path"in t?s=b_({},t,{path:T_(n,t.path,o.path).path}):(s=b_({},t,{params:h(t.params)}),o.params=h(o.params));let a=e.resolve(s,o);const c=t.hash||"";a.params=l(f(a.params));const p=function(t,e){let n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}(r,b_({},t,{hash:(d=c,TI(d).replace(bI,"{").replace(_I,"}").replace(mI,"^")),path:a.path}));var d;let v=i.createHref(p);return b_({fullPath:p,hash:c,query:r===NI?CI(t.query):t.query},a,{redirectedFrom:void 0,href:v})}function d(t){return"string"==typeof t?T_(n,t,u.value.path):b_({},t)}function v(t,e){if(c!==t)return X_(8,{from:e,to:t})}function g(t){return y(t)}function m(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let r="function"==typeof n?n(t):n;return"string"==typeof r&&(r=r.includes("?")||r.includes("#")?r=d(r):{path:r},r.params={}),b_({query:t.query,hash:t.hash,params:t.params},r)}}function y(t,e){const n=c=p(t),i=u.value,o=t.state,s=t.force,a=!0===t.replace,l=m(n);if(l)return y(b_(d(l),{state:o,force:s,replace:a}),e||n);const h=n;let f;return h.redirectedFrom=e,!s&&function(t,e,n){let r=e.matched.length-1,i=n.matched.length-1;return r>-1&&r===i&&S_(e.matched[r],n.matched[i])&&A_(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}(r,i,n)&&(f=X_(16,{to:h,from:i}),R(i,i,!0,!1)),(f?Promise.resolve(f):w(h,i)).catch((t=>$_(t)?t:N(t,h,i))).then((t=>{if(t){if($_(t,2))return y(b_(d(t.to),{state:o,force:s,replace:a}),e||h)}else t=I(h,i,!0,a,o);return _(h,i,t),t}))}function b(t,e){const n=v(t,e);return n?Promise.reject(n):Promise.resolve()}function w(t,e){let n;const[r,i,a]=function(t,e){const n=[],r=[],i=[],o=Math.max(e.matched.length,t.matched.length);for(let s=0;s<o;s++){const o=e.matched[s];o&&(t.matched.find((t=>S_(t,o)))?r.push(o):n.push(o));const a=t.matched[s];a&&(e.matched.find((t=>S_(t,a)))||i.push(a))}return[n,r,i]}(t,e);n=OI(r.reverse(),"beforeRouteLeave",t,e);for(const o of r)o.leaveGuards.forEach((r=>{n.push(DI(r,t,e))}));const u=b.bind(null,t,e);return n.push(u),jI(n).then((()=>{n=[];for(const r of o.list())n.push(DI(r,t,e));return n.push(u),jI(n)})).then((()=>{n=OI(i,"beforeRouteUpdate",t,e);for(const r of i)r.updateGuards.forEach((r=>{n.push(DI(r,t,e))}));return n.push(u),jI(n)})).then((()=>{n=[];for(const r of t.matched)if(r.beforeEnter&&!e.matched.includes(r))if(Array.isArray(r.beforeEnter))for(const i of r.beforeEnter)n.push(DI(i,t,e));else n.push(DI(r.beforeEnter,t,e));return n.push(u),jI(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=OI(a,"beforeRouteEnter",t,e),n.push(u),jI(n)))).then((()=>{n=[];for(const r of s.list())n.push(DI(r,t,e));return n.push(u),jI(n)})).catch((t=>$_(t,8)?t:Promise.reject(t)))}function _(t,e,n){for(const r of a.list())r(t,e,n)}function I(t,e,n,r,o){const s=v(t,e);if(s)return s;const a=e===H_,c=y_?history.state:{};n&&(r||a?i.replace(t.fullPath,b_({scroll:a&&c&&c.scroll},o)):i.push(t.fullPath,o)),u.value=t,R(t,e,n,a),C()}let T;function E(){T=i.listen(((t,e,n)=>{let r=p(t);const o=m(r);if(o)return void y(b_(o,{replace:!0}),r).catch(__);c=r;const s=u.value;var a,l;y_&&(a=U_(s.fullPath,n.delta),l=M_(),V_.set(a,l)),w(r,s).catch((t=>$_(t,12)?t:$_(t,2)?(y(t.to,r).then((t=>{$_(t,20)&&!n.delta&&n.type===C_.pop&&i.go(-1,!1)})).catch(__),Promise.reject()):(n.delta&&i.go(-n.delta,!1),N(t,r,s)))).then((t=>{(t=t||I(r,s,!1))&&(n.delta?i.go(-n.delta,!1):n.type===C_.pop&&$_(t,20)&&i.go(-1,!1)),_(r,s,t)})).catch(__)}))}let S,A=RI(),k=RI();function N(t,e,n){C(t);const r=k.list();return r.length?r.forEach((r=>r(t,e,n))):console.error(t),Promise.reject(t)}function C(t){S||(S=!0,E(),A.list().forEach((([e,n])=>t?n(t):e())),A.reset())}function R(e,n,r,i){const{scrollBehavior:o}=t;if(!y_||!o)return Promise.resolve();let s=!r&&function(t){const e=V_.get(t);return V_.delete(t),e}(U_(e.fullPath,0))||(i||!r)&&history.state&&history.state.scroll||null;return Se().then((()=>o(e,n,s))).then((t=>t&&F_(t))).catch((t=>N(t,e,n)))}const D=t=>i.go(t);let O;const x=new Set;return{currentRoute:u,addRoute:function(t,n){let r,i;return G_(t)?(r=e.getRecordMatcher(t),i=n):i=t,e.addRoute(i,r)},removeRoute:function(t){let n=e.getRecordMatcher(t);n&&e.removeRoute(n)},hasRoute:function(t){return!!e.getRecordMatcher(t)},getRoutes:function(){return e.getRoutes().map((t=>t.record))},resolve:p,options:t,push:g,replace:function(t){return g(b_(d(t),{replace:!0}))},go:D,back:()=>D(-1),forward:()=>D(1),beforeEach:o.add,beforeResolve:s.add,afterEach:a.add,onError:k.add,isReady:function(){return S&&u.value!==H_?Promise.resolve():new Promise(((t,e)=>{A.add([t,e])}))},install(t){t.component("RouterLink",PI),t.component("RouterView",UI),t.config.globalProperties.$router=this,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>oe(u)}),y_&&!O&&u.value===H_&&(O=!0,g(i.location).catch((t=>{})));const e={};for(let r in H_)e[r]=Gr((()=>u.value[r]));t.provide(v_,this),t.provide(g_,zt(e)),t.provide(m_,u);let n=t.unmount;x.add(t),t.unmount=function(){x.delete(t),x.size<1&&(T(),u.value=H_,O=!1,S=!1),n()}}}}function jI(t){return t.reduce(((t,e)=>t.then((()=>e()))),Promise.resolve())}function qI(){return Qe(v_)}export{sr as F,je as a,_r as b,vr as c,Tr as d,rr as e,mo as f,Nr as g,Xe as h,Er as i,zn as j,gi as k,Gr as l,Be as m,VI as n,fr as o,Ve as p,K_ as q,ne as r,bi as s,u as t,qI as u,pi as v,qe as w};
